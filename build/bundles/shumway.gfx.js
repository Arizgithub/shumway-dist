/*

 Copyright 2014 Mozilla Foundation

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
console.time("Load Shared Dependencies");var Shumway,Shumway$$inline_0=Shumway||(Shumway={});Shumway$$inline_0.version="0.11.599";Shumway$$inline_0.build="f242f5d";var jsGlobal=function(){return this||(0,eval)("this//# sourceURL=jsGlobal-getter")}(),inBrowser="undefined"!==typeof window&&"document"in window&&"plugins"in window.document,inFirefox="undefined"!==typeof navigator&&0<=navigator.userAgent.indexOf("Firefox");jsGlobal.performance||(jsGlobal.performance={});
jsGlobal.performance.now||(jsGlobal.performance.now=function(){return Date.now()});var START_TIME=performance.now();
(function(c){function g(a){return(a|0)===a}function E(a){return"object"===typeof a||"function"===typeof a}function r(a){return String(Number(a))===a}function B(a){var h=0;if("number"===typeof a)return h=a|0,a===h&&0<=h?!0:a>>>0===a;if("string"!==typeof a)return!1;var C=a.length;if(0===C)return!1;if("0"===a)return!0;if(C>c.UINT32_CHAR_BUFFER_LENGTH)return!1;var b=0,h=a.charCodeAt(b++)-48;if(1>h||9<h)return!1;for(var J=0,f=0;b<C;){f=a.charCodeAt(b++)-48;if(0>f||9<f)return!1;J=h;h=10*h+f}return J<c.UINT32_MAX_DIV_10||
J===c.UINT32_MAX_DIV_10&&f<=c.UINT32_MAX_MOD_10?!0:!1}c.UINT32_CHAR_BUFFER_LENGTH=10;c.UINT32_MAX=4294967295;c.UINT32_MAX_DIV_10=429496729;c.UINT32_MAX_MOD_10=5;c.isString=function(a){return"string"===typeof a};c.isFunction=function(a){return"function"===typeof a};c.isNumber=function(a){return"number"===typeof a};c.isInteger=g;c.isArray=function(a){return a instanceof Array};c.isNumberOrString=function(a){return"number"===typeof a||"string"===typeof a};c.isObject=E;c.toNumber=function(a){return+a};
c.isNumericString=r;c.isNumeric=function(a){if("number"===typeof a)return!0;if("string"===typeof a){var h=a.charCodeAt(0);return 65<=h&&90>=h||97<=h&&122>=h||36===h||95===h?!1:B(a)||r(a)}return!1};c.isIndex=B;c.isNullOrUndefined=function(a){return void 0==a};c.argumentsToString=function(a){for(var h=[],C=0;C<a.length;C++){var b=a[C];try{var J;J="object"===typeof b&&b?"toString"in b?b.toString():Object.prototype.toString.call(b):b+"";h.push(J)}catch(f){h.push("<unprintable value>")}}return h.join(", ")};
var v;(function(a){a.error=function(a){console.error(a);throw Error(a);};a.assert=function(h,C){void 0===C&&(C="assertion failed");""===h&&(h=!0);if(!h){if("undefined"!==typeof console&&"assert"in console)throw console.assert(!1,C),Error(C);a.error(C.toString())}};a.assertUnreachable=function(a){var h=Error().stack.split("\n")[1];throw Error("Reached unreachable location "+h+a);};a.assertNotImplemented=function(h,C){h||a.error("notImplemented: "+C)};var h=Object.create(null);a.warning=function(a,
h,C){};a.warnCounts=function(){var a=[],C;for(C in h)a.push({key:C,count:h[C]});a.sort(function(a,h){return h.count-a.count});return a.reduce(function(a,h){return a+("\n"+h.count+"\t"+h.key)},"")};a.notImplemented=function(a){};a.dummyConstructor=function(a){};a.abstractMethod=function(a){};var C={};a.somewhatImplemented=function(h){C[h]||(C[h]=!0,a.warning("somewhatImplemented: "+h))};a.unexpected=function(h){a.assert(!1,"Unexpected: "+h)};a.unexpectedCase=function(h){a.assert(!1,"Unexpected Case: "+
h)}})(v=c.Debug||(c.Debug={}));c.getTicks=function(){return performance.now()};(function(a){function h(a,h){for(var b=0,f=a.length;b<f;b++)if(a[b]===h)return b;a.push(h);return a.length-1}a.popManyInto=function(a,h,b){for(var f=h-1;0<=f;f--)b[f]=a.pop();b.length=h};a.popMany=function(a,h){var b=a.length-h,f=a.slice(b,this.length);a.length=b;return f};a.popManyIntoVoid=function(a,h){a.length-=h};a.pushMany=function(a,h){for(var b=0;b<h.length;b++)a.push(h[b])};a.top=function(a){return a.length&&a[a.length-
1]};a.last=function(a){return a.length&&a[a.length-1]};a.peek=function(a){return a[a.length-1]};a.indexOf=function(a,h){for(var b=0,f=a.length;b<f;b++)if(a[b]===h)return b;return-1};a.equals=function(a,h){if(a.length!==h.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!==h[b])return!1;return!0};a.pushUnique=h;a.unique=function(a){for(var b=[],J=0;J<a.length;J++)h(b,a[J]);return b};a.copyFrom=function(h,b){h.length=0;a.pushMany(h,b)};a.ensureTypedArrayCapacity=function(a,h){if(a.length<h){var b=
a;a=new a.constructor(c.IntegerUtilities.nearestPowerOfTwo(h));a.set(b,0)}return a};a.memCopy=function(a,h,b,f,c){void 0===b&&(b=0);void 0===f&&(f=0);void 0===c&&(c=0);0<f||0<c&&c<h.length?(0>=c&&(c=h.length-f),a.set(h.subarray(f,f+c),b)):a.set(h,b)}})(c.ArrayUtilities||(c.ArrayUtilities={}));(function(a){function h(a,h){return Object.prototype.hasOwnProperty.call(a,h)}a.boxValue=function(a){return void 0==a||E(a)?a:Object(a)};a.toKeyValueArray=function(a){var h=Object.prototype.hasOwnProperty,b=
[],f;for(f in a)h.call(a,f)&&b.push([f,a[f]]);return b};a.isPrototypeWriteable=function(a){return Object.getOwnPropertyDescriptor(a,"prototype").writable};a.hasOwnProperty=h;a.propertyIsEnumerable=function(a,h){return Object.prototype.propertyIsEnumerable.call(a,h)};a.getPropertyDescriptor=function(a,h){do{var b=Object.getOwnPropertyDescriptor(a,h);if(b)return b;a=Object.getPrototypeOf(a)}while(a);return null};a.hasOwnGetter=function(a,h){var b=Object.getOwnPropertyDescriptor(a,h);return!(!b||!b.get)};
a.getOwnGetter=function(a,h){var b=Object.getOwnPropertyDescriptor(a,h);return b?b.get:null};a.hasOwnSetter=function(a,h){var b=Object.getOwnPropertyDescriptor(a,h);return!(!b||!b.set)};a.createMap=function(){return Object.create(null)};a.createArrayMap=function(){return[]};a.defineReadOnlyProperty=function(a,h,b){Object.defineProperty(a,h,{value:b,writable:!1,configurable:!0,enumerable:!1})};a.copyProperties=function(a,h){for(var b in h)a[b]=h[b]};a.copyOwnProperties=function(a,b){for(var f in b)h(b,
f)&&(a[f]=b[f])};a.copyOwnPropertyDescriptors=function(a,b,f,c,m){void 0===f&&(f=null);void 0===c&&(c=!0);void 0===m&&(m=!1);for(var d in b)if(h(b,d)&&(!f||f(d))){var e=Object.getOwnPropertyDescriptor(b,d);if(c||!h(a,d))try{m&&!1===e.writable&&(e.writable=!0),Object.defineProperty(a,d,e)}catch(w){v.assert("Can't define: "+d)}}};a.copyPropertiesByList=function(a,h,b){for(var f=0;f<b.length;f++){var c=b[f];a[c]=h[c]}};a.defineNonEnumerableGetter=function(a,h,b){Object.defineProperty(a,h,{get:b,configurable:!0,
enumerable:!1})};a.defineNonEnumerableProperty=function(a,h,b){Object.defineProperty(a,h,{value:b,writable:!0,configurable:!0,enumerable:!1})}})(c.ObjectUtilities||(c.ObjectUtilities={}));(function(a){a.makeForwardingGetter=function(a){return new Function('return this["'+a+'"]//# sourceURL=fwd-get-'+a+".as")};a.makeForwardingSetter=function(a){return new Function("value",'this["'+a+'"] = value;//# sourceURL=fwd-set-'+a+".as")}})(c.FunctionUtilities||(c.FunctionUtilities={}));(function(a){function h(e){return"string"===
typeof e?'"'+e+'"':"number"===typeof e||"boolean"===typeof e?String(e):e instanceof Array?"[] "+e.length:typeof e}function b(e,a,d){m[0]=e;m[1]=a;m[2]=d;return m.join("")}function f(e,a,d,h){p[0]=e;p[1]=a;p[2]=d;p[3]=h;return p.join("")}a.repeatString=function(e,a){for(var d="",h=0;h<a;h++)d+=e;return d};a.memorySizeToString=function(e){e|=0;return 1024>e?e+" B":1048576>e?(e/1024).toFixed(2)+"KB":(e/1048576).toFixed(2)+"MB"};a.toSafeString=h;a.toSafeArrayString=function(e){for(var a=[],d=0;d<e.length;d++)a.push(h(e[d]));
return a.join(", ")};a.utf8decode=function(e){for(var a=new Uint8Array(4*e.length),d=0,h=0,t=e.length;h<t;h++){var l=e.charCodeAt(h);if(127>=l)a[d++]=l;else{if(55296<=l&&56319>=l){var x=e.charCodeAt(h+1);56320<=x&&57343>=x&&(l=((l&1023)<<10)+(x&1023)+65536,++h)}0!==(l&4292870144)?(a[d++]=248|l>>>24&3,a[d++]=128|l>>>18&63,a[d++]=128|l>>>12&63,a[d++]=128|l>>>6&63):0!==(l&4294901760)?(a[d++]=240|l>>>18&7,a[d++]=128|l>>>12&63,a[d++]=128|l>>>6&63):0!==(l&4294965248)?(a[d++]=224|l>>>12&15,a[d++]=128|l>>>
6&63):a[d++]=192|l>>>6&31;a[d++]=128|l&63}}return a.subarray(0,d)};a.utf8encode=function(e){for(var a=0,d="";a<e.length;){var h=e[a++]&255;if(127>=h)d+=String.fromCharCode(h);else{var t=192,l=5;do{if((h&(t>>1|128))===t)break;t=t>>1|128;--l}while(0<=l);if(0>=l)d+=String.fromCharCode(h);else{for(var h=h&(1<<l)-1,t=!1,x=5;x>=l;--x){var b=e[a++];if(128!=(b&192)){t=!0;break}h=h<<6|b&63}if(t)for(l=a-(7-x);l<a;++l)d+=String.fromCharCode(e[l]&255);else d=65536<=h?d+String.fromCharCode(h-65536>>10&1023|55296,
h&1023|56320):d+String.fromCharCode(h)}}}return d};a.base64EncodeBytes=function(e){for(var a="",d=e.byteLength,h=d%3,d=d-h,t,l,x,y,q=0;q<d;q+=3)y=e[q]<<16|e[q+1]<<8|e[q+2],t=(y&16515072)>>18,l=(y&258048)>>12,x=(y&4032)>>6,y&=63,a+=f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t],"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l],"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[x],"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[y]);
1==h?(y=e[d],a+=b("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(y&252)>>2],"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(y&3)<<4],"==")):2==h&&(y=e[d]<<8|e[d+1],a+=f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(y&64512)>>10],"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(y&1008)>>4],"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(y&15)<<2],"="));return a};var c=[62,0,0,0,63,52,53,54,55,56,57,
58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,0,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];a.decodeRestrictedBase64ToBytes=function(e){var a,d,h;a=e.length;a="="===e.charAt(a-2)?2:"="===e.charAt(a-1)?1:0;for(var t=new Uint8Array(3*(e.length>>2)-a),l=0,x=0;l<e.length;){a=e.charCodeAt(l++);d=c[a-43];a=e.charCodeAt(l++);h=c[a-43];t[x++]=d<<2|(h&48)>>4;a=e.charCodeAt(l++);if(61==a)break;d=c[a-43];t[x++]=(h&15)<<
4|(d&60)>>2;a=e.charCodeAt(l++);if(61==a)break;h=c[a-43];t[x++]=(d&3)<<6|h}return t};a.escapeString=function(e){void 0!==e&&(e=e.replace(/[^\w$]/gi,"$"),/^\d/.test(e)&&(e="$"+e));return e};a.fromCharCodeArray=function(e){for(var a="",d=0;d<e.length;d+=16384)var h=Math.min(e.length-d,16384),a=a+String.fromCharCode.apply(null,e.subarray(d,d+h));return a};a.variableLengthEncodeInt32=function(e){for(var a=32-Math.clz32(e),d=Math.ceil(a/6),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_"[d],
d=d-1;0<=d;d--)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_"[e>>6*d&63];return a};a.toEncoding=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_"[e]};a.fromEncoding=function(e){if(65<=e&&90>=e)return e-65;if(97<=e&&122>=e)return e-71;if(48<=e&&57>=e)return e+4;if(36===e)return 62;if(95===e)return 63};a.variableLengthDecodeInt32=function(e){for(var d=a.fromEncoding(e.charCodeAt(0)),h=0,b=0;b<d;b++)var t=6*(d-b-1),h=h|a.fromEncoding(e.charCodeAt(1+
b))<<t;return h};a.trimMiddle=function(e,a){if(e.length<=a)return e;var d=a>>1,h=a-d-1;return e.substr(0,d)+"\u2026"+e.substr(e.length-h,h)};a.multiple=function(e,a){for(var d="",h=0;h<a;h++)d+=e;return d};a.indexOfAny=function(e,a,d){for(var h=e.length,t=0;t<a.length;t++){var l=e.indexOf(a[t],d);0<=l&&(h=Math.min(h,l))}return h===e.length?-1:h};var m=Array(3),p=Array(4),d=Array(9);a.concat3=b;a.concat4=f;a.concat9=function(e,a,h,b,t,l,x,y,q){d[0]=e;d[1]=a;d[2]=h;d[3]=b;d[4]=t;d[5]=l;d[6]=x;d[7]=
y;d[8]=q;return d.join("")}})(c.StringUtilities||(c.StringUtilities={}));(function(a){var h=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),b=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,
-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);a.hashBytesTo32BitsMD5=
function(a,f,c){var m=1732584193,d=-271733879,e=-1732584194,w=271733878,G=c+72&-64,F=new Uint8Array(G),t;for(t=0;t<c;++t)F[t]=a[f++];F[t++]=128;for(a=G-8;t<a;)F[t++]=0;F[t++]=c<<3&255;F[t++]=c>>5&255;F[t++]=c>>13&255;F[t++]=c>>21&255;F[t++]=c>>>29&255;F[t++]=0;F[t++]=0;F[t++]=0;a=new Int32Array(16);for(t=0;t<G;){for(c=0;16>c;++c,t+=4)a[c]=F[t]|F[t+1]<<8|F[t+2]<<16|F[t+3]<<24;var l=m;f=d;var x=e,y=w,q,n;for(c=0;64>c;++c){16>c?(q=f&x|~f&y,n=c):32>c?(q=y&f|~y&x,n=5*c+1&15):48>c?(q=f^x^y,n=3*c+5&15):
(q=x^(f|~y),n=7*c&15);var k=y,l=l+q+b[c]+a[n]|0;q=h[c];y=x;x=f;f=f+(l<<q|l>>>32-q)|0;l=k}m=m+l|0;d=d+f|0;e=e+x|0;w=w+y|0}return m};a.mixHash=function(a,h){return(31*a|0)+h|0}})(c.HashUtilities||(c.HashUtilities={}));var H=function(){function a(a){this._data=Object.create(null);this._size=0;this._maxSize=a}a.prototype.get=function(a){return this._data[a]};a.prototype.set=function(a,b){if(this._size>=this._maxSize)return!1;this._data[a]=b;this._size++;return!0};return a}();c.Cache=H;var z=function(){function a(){}
a.seed=function(h){a._state[0]=h;a._state[1]=h};a.reset=function(){a._state[0]=57005;a._state[1]=48879};a.next=function(){var a=this._state,b=Math.imul(18273,a[0]&65535)+(a[0]>>>16)|0;a[0]=b;var f=Math.imul(36969,a[1]&65535)+(a[1]>>>16)|0;a[1]=f;a=(b<<16)+(f&65535)|0;return 2.3283064365386963E-10*(0>a?a+4294967296:a)};a._state=new Uint32Array([57005,48879]);return a}();c.Random=z;Math.random=function(){return z.next()};c.installTimeWarper=function(){var a=Date,h=1428107694580;jsGlobal.Date=function(b,
f,c,m,p,d,e){switch(arguments.length){case 0:return new a(h);case 1:return new a(b);case 2:return new a(b,f);case 3:return new a(b,f,c);case 4:return new a(b,f,c,m);case 5:return new a(b,f,c,m,p);case 6:return new a(b,f,c,m,p,d);default:return new a(b,f,c,m,p,d,e)}};jsGlobal.Date.now=function(){return h+=10};jsGlobal.Date.UTC=function(){return a.UTC.apply(a,arguments)}};(function(){function a(){this.id="$weakmap"+h++}if("function"!==typeof jsGlobal.WeakMap){var h=0;a.prototype={has:function(a){return a.hasOwnProperty(this.id)},
get:function(a,h){return a.hasOwnProperty(this.id)?a[this.id]:h},set:function(a,h){Object.defineProperty(a,this.id,{value:h,enumerable:!1,configurable:!0})},delete:function(a){delete a[this.id]}};jsGlobal.WeakMap=a}})();var p=function(){function a(){"undefined"!==typeof ShumwayCom&&ShumwayCom.getWeakMapKeys?(this._map=new WeakMap,this._id=0,this._newAdditions=[]):this._list=[]}a.prototype.clear=function(){this._map?this._map.clear():this._list.length=0};a.prototype.push=function(a){this._map?(this._map.set(a,
this._id++),this._newAdditions.forEach(function(b){b.push(a)})):this._list.push(a)};a.prototype.remove=function(a){this._map?this._map.delete(a):this._list[this._list.indexOf(a)]=null};a.prototype.forEach=function(a){if(this._map){var b=[];this._newAdditions.push(b);var f=this._map,c=ShumwayCom.getWeakMapKeys(f);c.sort(function(a,e){return f.get(a)-f.get(e)});c.forEach(function(d){0!==d._referenceCount&&a(d)});b.forEach(function(d){0!==d._referenceCount&&a(d)});this._newAdditions.splice(this._newAdditions.indexOf(b),
1)}else{for(var b=this._list,m=0,c=0;c<b.length;c++){var p=b[c];p&&(0===p._referenceCount?(b[c]=null,m++):a(p))}if(16<m&&m>b.length>>2){m=[];for(c=0;c<b.length;c++)(p=b[c])&&0<p._referenceCount&&m.push(p);this._list=m}}};Object.defineProperty(a.prototype,"length",{get:function(){return this._map?-1:this._list.length},enumerable:!0,configurable:!0});return a}();c.WeakList=p;var b;(function(a){a.pow2=function(a){return a===(a|0)?0>a?1/(1<<-a):1<<a:Math.pow(2,a)};a.clamp=function(a,b,f){return Math.max(b,
Math.min(f,a))};a.roundHalfEven=function(a){if(.5===Math.abs(a%1)){var b=Math.floor(a);return 0===b%2?b:Math.ceil(a)}return Math.round(a)};a.altTieBreakRound=function(a,b){return.5!==Math.abs(a%1)||b?Math.round(a):a|0};a.epsilonEquals=function(a,b){return 1E-7>Math.abs(a-b)}})(b=c.NumberUtilities||(c.NumberUtilities={}));var m;(function(a){function h(a){return 256*a<<16>>16}function b(a){return a/256}var f=new ArrayBuffer(8);a.i8=new Int8Array(f);a.u8=new Uint8Array(f);a.i32=new Int32Array(f);a.f32=
new Float32Array(f);a.f64=new Float64Array(f);a.nativeLittleEndian=1===(new Int8Array((new Int32Array([1])).buffer))[0];a.floatToInt32=function(h){a.f32[0]=h;return a.i32[0]};a.int32ToFloat=function(h){a.i32[0]=h;return a.f32[0]};a.swap16=function(a){return(a&255)<<8|a>>8&255};a.swap32=function(a){return(a&255)<<24|(a&65280)<<8|a>>8&65280|a>>24&255};a.toS8U8=h;a.fromS8U8=b;a.clampS8U8=function(a){return b(h(a))};a.toS16=function(a){return a<<16>>16};a.bitCount=function(a){a-=a>>1&1431655765;a=(a&
858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24};a.ones=function(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24};a.trailingZeros=function(h){return a.ones((h&-h)-1)};a.getFlags=function(a,h){var b="";for(a=0;a<h.length;a++)a&1<<a&&(b+=h[a]+" ");return 0===b.length?"":b.trim()};a.isPowerOfTwo=function(a){return a&&0===(a&a-1)};a.roundToMultipleOfFour=function(a){return a+3&-4};a.nearestPowerOfTwo=function(a){a--;a|=a>>1;a|=a>>2;
a|=a>>4;a|=a>>8;a|=a>>16;a++;return a};a.roundToMultipleOfPowerOfTwo=function(a,h){var b=(1<<h)-1;return a+b&~b};a.toHEX=function(a){return"0x"+("00000000"+(0>a?4294967295+a+1:a).toString(16)).substr(-8)};Math.imul||(Math.imul=function(a,h){var b=a&65535,d=h&65535;return b*d+((a>>>16&65535)*d+b*(h>>>16&65535)<<16>>>0)|0});Math.clz32||(Math.clz32=function(h){h|=h>>1;h|=h>>2;h|=h>>4;h|=h>>8;return 32-a.ones(h|h>>16)})})(m=c.IntegerUtilities||(c.IntegerUtilities={}));p=function(){function a(h,b){void 0===
h&&(h=!1);this._tab="  ";this._padding="";this._suppressOutput=h;this._out=b||a._consoleOut;this._outNoNewline=b||a._consoleOutNoNewline}Object.defineProperty(a.prototype,"suppressOutput",{get:function(){return this._suppressOutput},set:function(a){this._suppressOutput=a},enumerable:!0,configurable:!0});a.prototype.write=function(a,b){void 0===a&&(a="");void 0===b&&(b=!1);this._suppressOutput||this._outNoNewline((b?this._padding:"")+a)};a.prototype.writeLn=function(a){void 0===a&&(a="");this._suppressOutput||
this._out(this._padding+a)};a.prototype.writeObject=function(a,b){void 0===a&&(a="");this._suppressOutput||this._out(this._padding+a,b)};a.prototype.writeTimeLn=function(a){void 0===a&&(a="");this._suppressOutput||this._out(this._padding+performance.now().toFixed(2)+" "+a)};a.prototype.writeComment=function(a){a=(a||"").split("\n");if(1===a.length)this.writeLn("// "+a[0]);else{this.writeLn("/**");for(var b=0;b<a.length;b++)this.writeLn(" * "+a[b]);this.writeLn(" */")}};a.prototype.writeLns=function(a){a=
(a||"").split("\n");for(var b=0;b<a.length;b++)this.writeLn(a[b])};a.prototype.errorLn=function(h){a.logLevel&1&&this.boldRedLn(h)};a.prototype.warnLn=function(h){a.logLevel&2&&this.yellowLn(h)};a.prototype.debugLn=function(h){a.logLevel&4&&this.purpleLn(h)};a.prototype.logLn=function(h){a.logLevel&8&&this.writeLn(h)};a.prototype.infoLn=function(h){a.logLevel&16&&this.writeLn(h)};a.prototype.yellowLn=function(h){this.colorLn(a.YELLOW,h)};a.prototype.greenLn=function(h){this.colorLn(a.GREEN,h)};a.prototype.boldRedLn=
function(h){this.colorLn(a.BOLD_RED,h)};a.prototype.redLn=function(h){this.colorLn(a.RED,h)};a.prototype.purpleLn=function(h){this.colorLn(a.PURPLE,h)};a.prototype.colorLn=function(h,b){this._suppressOutput||(inBrowser?this._out(this._padding+b):this._out(this._padding+h+b+a.ENDC))};a.prototype.redLns=function(h){this.colorLns(a.RED,h)};a.prototype.colorLns=function(a,b){for(var f=(b||"").split("\n"),c=0;c<f.length;c++)this.colorLn(a,f[c])};a.prototype.enter=function(a){this._suppressOutput||this._out(this._padding+
a);this.indent()};a.prototype.leaveAndEnter=function(a){this.leave(a);this.indent()};a.prototype.leave=function(a){this.outdent();!this._suppressOutput&&a&&this._out(this._padding+a)};a.prototype.indent=function(){this._padding+=this._tab};a.prototype.outdent=function(){0<this._padding.length&&(this._padding=this._padding.substring(0,this._padding.length-this._tab.length))};a.prototype.writeArray=function(a,b,f){void 0===b&&(b=!1);void 0===f&&(f=!1);b=b||!1;for(var c=0,m=a.length;c<m;c++){var p="";
b&&(p=null===a[c]?"null":void 0===a[c]?"undefined":a[c].constructor.name,p+=" ");var d=f?"":(""+c).padRight(" ",4);this.writeLn(d+p+a[c])}};a.PURPLE="\u001b[94m";a.YELLOW="\u001b[93m";a.GREEN="\u001b[92m";a.RED="\u001b[91m";a.BOLD_RED="\u001b[1;91m";a.ENDC="\u001b[0m";a.logLevel=31;a._consoleOut=console.log.bind(console);a._consoleOutNoNewline=console.log.bind(console);return a}();c.IndentingWriter=p;p=function(){function a(a,b){void 0===b&&(b=12);this.start=this.index=0;this._size=1<<b;this._mask=
this._size-1;this.array=new a(this._size)}a.prototype.get=function(a){return this.array[a]};a.prototype.forEachInReverse=function(a){if(!this.isEmpty())for(var b=0===this.index?this._size-1:this.index-1,f=this.start-1&this._mask;b!==f&&!a(this.array[b],b);)b=0===b?this._size-1:b-1};a.prototype.write=function(a){this.array[this.index]=a;this.index=this.index+1&this._mask;this.index===this.start&&(this.start=this.start+1&this._mask)};a.prototype.isFull=function(){return(this.index+1&this._mask)===this.start};
a.prototype.isEmpty=function(){return this.index===this.start};a.prototype.reset=function(){this.start=this.index=0};return a}();c.CircularBuffer=p;p=function(){function a(){}a.randomStyle=function(){a._randomStyleCache||(a._randomStyleCache="#ff5e3a #ff9500 #ffdb4c #87fc70 #52edc7 #1ad6fd #c644fc #ef4db6 #4a4a4a #dbddde #ff3b30 #ff9500 #ffcc00 #4cd964 #34aadc #007aff #5856d6 #ff2d55 #8e8e93 #c7c7cc #5ad427 #c86edf #d1eefc #e0f8d8 #fb2b69 #f7f7f7 #1d77ef #d6cec3 #55efcb #ff4981 #ffd3e0 #f7f7f7 #ff1300 #1f1f21 #bdbec2 #ff3a2d".split(" "));
return a._randomStyleCache[a._nextStyle++%a._randomStyleCache.length]};a.gradientColor=function(h){return a._gradient[a._gradient.length*b.clamp(h,0,1)|0]};a.contrastStyle=function(a){a=parseInt(a.substr(1),16);return 128<=(299*(a>>16)+587*(a>>8&255)+114*(a&255))/1E3?"#000000":"#ffffff"};a.reset=function(){a._nextStyle=0};a.TabToolbar="#252c33";a.Toolbars="#343c45";a.HighlightBlue="#1d4f73";a.LightText="#f5f7fa";a.ForegroundText="#b6babf";a.Black="#000000";a.VeryDark="#14171a";a.Dark="#181d20";a.Light=
"#a9bacb";a.Grey="#8fa1b2";a.DarkGrey="#5f7387";a.Blue="#46afe3";a.Purple="#6b7abb";a.Pink="#df80ff";a.Red="#eb5368";a.Orange="#d96629";a.LightOrange="#d99b28";a.Green="#70bf53";a.BlueGrey="#5e88b0";a._nextStyle=0;a._gradient="#FF0000 #FF1100 #FF2300 #FF3400 #FF4600 #FF5700 #FF6900 #FF7B00 #FF8C00 #FF9E00 #FFAF00 #FFC100 #FFD300 #FFE400 #FFF600 #F7FF00 #E5FF00 #D4FF00 #C2FF00 #B0FF00 #9FFF00 #8DFF00 #7CFF00 #6AFF00 #58FF00 #47FF00 #35FF00 #24FF00 #12FF00 #00FF00".split(" ");return a}();c.ColorStyle=
p;p=function(){function a(a,b,f,c){this.xMin=a|0;this.yMin=b|0;this.xMax=f|0;this.yMax=c|0}a.FromUntyped=function(h){return new a(h.xMin,h.yMin,h.xMax,h.yMax)};a.FromRectangle=function(h){return new a(20*h.x|0,20*h.y|0,20*(h.x+h.width)|0,20*(h.y+h.height)|0)};a.prototype.setElements=function(a,b,f,c){this.xMin=a;this.yMin=b;this.xMax=f;this.yMax=c};a.prototype.copyFrom=function(a){this.setElements(a.xMin,a.yMin,a.xMax,a.yMax)};a.prototype.contains=function(a,b){return a<this.xMin!==a<this.xMax&&b<
this.yMin!==b<this.yMax};a.prototype.unionInPlace=function(a){a.isEmpty()||(this.extendByPoint(a.xMin,a.yMin),this.extendByPoint(a.xMax,a.yMax))};a.prototype.extendByPoint=function(a,b){this.extendByX(a);this.extendByY(b)};a.prototype.extendByX=function(a){134217728===this.xMin?this.xMin=this.xMax=a:(this.xMin=Math.min(this.xMin,a),this.xMax=Math.max(this.xMax,a))};a.prototype.extendByY=function(a){134217728===this.yMin?this.yMin=this.yMax=a:(this.yMin=Math.min(this.yMin,a),this.yMax=Math.max(this.yMax,
a))};a.prototype.intersects=function(a){return this.contains(a.xMin,a.yMin)||this.contains(a.xMax,a.yMax)};a.prototype.isEmpty=function(){return this.xMax<=this.xMin||this.yMax<=this.yMin};Object.defineProperty(a.prototype,"width",{get:function(){return this.xMax-this.xMin},set:function(a){this.xMax=this.xMin+a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this.yMax-this.yMin},set:function(a){this.yMax=this.yMin+a},enumerable:!0,configurable:!0});
a.prototype.getBaseWidth=function(a){var b=Math.abs(Math.cos(a));a=Math.abs(Math.sin(a));return b*(this.xMax-this.xMin)+a*(this.yMax-this.yMin)};a.prototype.getBaseHeight=function(a){var b=Math.abs(Math.cos(a));return Math.abs(Math.sin(a))*(this.xMax-this.xMin)+b*(this.yMax-this.yMin)};a.prototype.setEmpty=function(){this.xMin=this.yMin=this.xMax=this.yMax=0};a.prototype.setToSentinels=function(){this.xMin=this.yMin=this.xMax=this.yMax=134217728};a.prototype.clone=function(){return new a(this.xMin,
this.yMin,this.xMax,this.yMax)};a.prototype.toString=function(){return"{ xMin: "+this.xMin+", xMin: "+this.yMin+", xMax: "+this.xMax+", xMax: "+this.yMax+" }"};return a}();c.Bounds=p;p=function(){function a(a,b,f,c){v.assert(g(a));v.assert(g(b));v.assert(g(f));v.assert(g(c));this._xMin=a|0;this._yMin=b|0;this._xMax=f|0;this._yMax=c|0}a.FromUntyped=function(b){return new a(b.xMin,b.yMin,b.xMax,b.yMax)};a.FromRectangle=function(b){return new a(20*b.x|0,20*b.y|0,20*(b.x+b.width)|0,20*(b.y+b.height)|
0)};a.prototype.setElements=function(a,b,f,c){this.xMin=a;this.yMin=b;this.xMax=f;this.yMax=c};a.prototype.copyFrom=function(a){this.setElements(a.xMin,a.yMin,a.xMax,a.yMax)};a.prototype.contains=function(a,b){return a<this.xMin!==a<this.xMax&&b<this.yMin!==b<this.yMax};a.prototype.unionInPlace=function(a){a.isEmpty()||(this.extendByPoint(a.xMin,a.yMin),this.extendByPoint(a.xMax,a.yMax))};a.prototype.extendByPoint=function(a,b){this.extendByX(a);this.extendByY(b)};a.prototype.extendByX=function(a){134217728===
this.xMin?this.xMin=this.xMax=a:(this.xMin=Math.min(this.xMin,a),this.xMax=Math.max(this.xMax,a))};a.prototype.extendByY=function(a){134217728===this.yMin?this.yMin=this.yMax=a:(this.yMin=Math.min(this.yMin,a),this.yMax=Math.max(this.yMax,a))};a.prototype.intersects=function(a){return this.contains(a._xMin,a._yMin)||this.contains(a._xMax,a._yMax)};a.prototype.isEmpty=function(){return this._xMax<=this._xMin||this._yMax<=this._yMin};Object.defineProperty(a.prototype,"xMin",{get:function(){return this._xMin},
set:function(a){v.assert(g(a));this._xMin=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"yMin",{get:function(){return this._yMin},set:function(a){v.assert(g(a));this._yMin=a|0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"xMax",{get:function(){return this._xMax},set:function(a){v.assert(g(a));this._xMax=a|0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._xMax-this._xMin},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"yMax",{get:function(){return this._yMax},set:function(a){v.assert(g(a));this._yMax=a|0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this._yMax-this._yMin},enumerable:!0,configurable:!0});a.prototype.getBaseWidth=function(a){var b=Math.abs(Math.cos(a));a=Math.abs(Math.sin(a));return b*(this._xMax-this._xMin)+a*(this._yMax-this._yMin)};a.prototype.getBaseHeight=function(a){var b=Math.abs(Math.cos(a));return Math.abs(Math.sin(a))*
(this._xMax-this._xMin)+b*(this._yMax-this._yMin)};a.prototype.setEmpty=function(){this._xMin=this._yMin=this._xMax=this._yMax=0};a.prototype.clone=function(){return new a(this.xMin,this.yMin,this.xMax,this.yMax)};a.prototype.toString=function(){return"{ xMin: "+this._xMin+", yMin: "+this._yMin+", xMax: "+this._xMax+", yMax: "+this._yMax+" }"};a.prototype.assertValid=function(){};return a}();c.DebugBounds=p;p=function(){function a(a,b,f,c){this.r=a;this.g=b;this.b=f;this.a=c}a.FromARGB=function(b){return new a((b>>
16&255)/255,(b>>8&255)/255,(b>>0&255)/255,(b>>24&255)/255)};a.FromRGBA=function(b){return a.FromARGB(u.RGBAToARGB(b))};a.prototype.toRGBA=function(){return 255*this.r<<24|255*this.g<<16|255*this.b<<8|255*this.a};a.prototype.toCSSStyle=function(){return u.rgbaToCSSStyle(this.toRGBA())};a.prototype.set=function(a){this.r=a.r;this.g=a.g;this.b=a.b;this.a=a.a};a.randomColor=function(b){void 0===b&&(b=1);return new a(Math.random(),Math.random(),Math.random(),b)};a.parseColor=function(b){a.colorCache||
(a.colorCache=Object.create(null));if(a.colorCache[b])return a.colorCache[b];var f=document.createElement("span");document.body.appendChild(f);f.style.backgroundColor=b;var c=getComputedStyle(f).backgroundColor;document.body.removeChild(f);(f=/^rgb\((\d+), (\d+), (\d+)\)$/.exec(c))||(f=/^rgba\((\d+), (\d+), (\d+), ([\d.]+)\)$/.exec(c));c=new a(0,0,0,0);c.r=parseFloat(f[1])/255;c.g=parseFloat(f[2])/255;c.b=parseFloat(f[3])/255;c.a=f[4]?parseFloat(f[4])/255:1;return a.colorCache[b]=c};a.Red=new a(1,
0,0,1);a.Green=new a(0,1,0,1);a.Blue=new a(0,0,1,1);a.None=new a(0,0,0,0);a.White=new a(1,1,1,1);a.Black=new a(0,0,0,1);a.colorCache={};return a}();c.Color=p;var u;(function(a){function b(a){var e=a>>0&255,w=a>>8&255,G=a>>24&255;a=(Math.imul(a>>16&255,G)+127)/255|0;w=(Math.imul(w,G)+127)/255|0;e=(Math.imul(e,G)+127)/255|0;return G<<24|a<<16|w<<8|e}function p(){if(!z){z=new Uint8Array(65536);for(var a=0;256>a;a++)for(var e=0;256>e;e++)z[(e<<8)+a]=Math.imul(255,a)/e}}a.RGBAToARGB=function(a){return a>>
8&16777215|(a&255)<<24};a.ARGBToRGBA=function(a){return a<<8|a>>24&255};var u=new H(1024);a.rgbaToCSSStyle=function(a){var e=u.get(a);if("string"===typeof e)return e;e=c.StringUtilities.concat9("rgba(",a>>24&255,",",a>>16&255,",",a>>8&255,",",(a&255)/255,")");u.set(a,e);return e};var g=new H(1024);a.cssStyleToRGBA=function(a){var e=g.get(a);if("number"===typeof e)return e;e=4278190335;if("#"===a[0])7===a.length&&(e=parseInt(a.substring(1),16)<<8|255);else if("r"===a[0])var w=a.substring(5,a.length-
1).split(","),e=parseInt(w[0]),b=parseInt(w[1]),h=parseInt(w[2]),w=parseFloat(w[3]),e=(e&255)<<24|(b&255)<<16|(h&255)<<8|255*w&255;g.set(a,e);return e};a.hexToRGB=function(a){return parseInt(a.slice(1),16)};a.rgbToHex=function(a){return"#"+("000000"+(a>>>0).toString(16)).slice(-6)};a.isValidHexColor=function(a){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(a)};a.clampByte=function(a){return Math.max(0,Math.min(255,a))};a.unpremultiplyARGB=function(a){var e=a>>0&255,w=a>>8&255,b=a>>24&255;a=Math.imul(255,
a>>16&255)/b&255;w=Math.imul(255,w)/b&255;e=Math.imul(255,e)/b&255;return b<<24|a<<16|w<<8|e};a.premultiplyARGB=b;var z;a.ensureUnpremultiplyTable=p;a.getUnpremultiplyTable=function(){p();return z};a.tableLookupUnpremultiplyARGB=function(a){a|=0;var e=a>>24&255;if(0===e)return 0;if(255===e)return a;var w,b,h=e<<8,t=z;b=t[h+(a>>16&255)];w=t[h+(a>>8&255)];a=t[h+(a>>0&255)];return e<<24|b<<16|w<<8|a};a.blendPremultipliedBGRA=function(a,e){var w=e&16711935,b=e>>8&16711935,h,t=a>>8&16711935,l=256-(e&255);
h=Math.imul(a&16711935,l)>>8;t=Math.imul(t,l)>>8;return(b+t&16711935)<<8|w+h&16711935};var v=m.swap32;a.convertImage=function(a,e,w,G){var F=w.length;if(a===e){if(w!==G)for(a=0;a<F;a++)G[a]=w[a]}else if(a===f.PremultipliedAlphaARGB&&e===f.StraightAlphaRGBA)for(c.ColorUtilities.ensureUnpremultiplyTable(),a=0;a<F;a++){var t=w[a];e=t&255;if(0===e)G[a]=0;else if(255===e)G[a]=4278190080|t>>8&16777215;else{var l=t>>24&255,x=t>>16&255,t=t>>8&255,y=e<<8,q=z,t=q[y+t],x=q[y+x],l=q[y+l];G[a]=e<<24|l<<16|x<<
8|t}}else if(a===f.StraightAlphaARGB&&e===f.StraightAlphaRGBA)for(a=0;a<F;a++)G[a]=v(w[a]);else if(a===f.StraightAlphaRGBA&&e===f.PremultipliedAlphaARGB)for(a=0;a<F;a++)e=w[a],G[a]=v(b(e&4278255360|e>>16&255|(e&255)<<16));else for(a=0;a<F;a++)G[a]=w[a]}})(u=c.ColorUtilities||(c.ColorUtilities={}));p=function(){function a(a){void 0===a&&(a=32);this._list=[];this._maxSize=a}a.prototype.acquire=function(b){if(a._enabled)for(var f=this._list,c=0;c<f.length;c++){var m=f[c];if(m.byteLength>=b)return f.splice(c,
1),m}return new ArrayBuffer(b)};a.prototype.release=function(b){if(a._enabled){var f=this._list;f.length===this._maxSize&&f.shift();f.push(b)}};a.prototype.ensureUint8ArrayLength=function(a,b){if(a.length>=b)return a;var f=Math.max(a.length+b,(3*a.length>>1)+1),f=new Uint8Array(this.acquire(f),0,f);f.set(a);this.release(a.buffer);return f};a.prototype.ensureFloat64ArrayLength=function(a,b){if(a.length>=b)return a;var f=Math.max(a.length+b,(3*a.length>>1)+1),f=new Float64Array(this.acquire(f*Float64Array.BYTES_PER_ELEMENT),
0,f);f.set(a);this.release(a.buffer);return f};a._enabled=!0;return a}();c.ArrayBufferPool=p;(function(a){a.instance})(c.Telemetry||(c.Telemetry={}));(function(a){a.instance})(c.FileLoadingService||(c.FileLoadingService={}));(function(a){a.instance})(c.SystemResourcesLoadingService||(c.SystemResourcesLoadingService={}));c.registerCSSFont=function(a,b,f){if(inBrowser){var m=document.head;m.insertBefore(document.createElement("style"),m.firstChild);m=document.styleSheets[0];b="@font-face{font-family:swffont"+
a+";src:url(data:font/opentype;base64,"+c.StringUtilities.base64EncodeBytes(b)+")}";m.insertRule(b,m.cssRules.length);f&&(f=document.createElement("div"),f.style.fontFamily="swffont"+a,f.innerHTML="hello",document.body.appendChild(f),document.body.removeChild(f))}else v.warning("Cannot register CSS font outside the browser")};(function(a){a.instance={enabled:!1,initJS:function(a){},registerCallback:function(a){},unregisterCallback:function(a){},eval:function(a){},call:function(a){},getId:function(){return null}}})(c.ExternalInterfaceService||
(c.ExternalInterfaceService={}));(function(a){a.instance})(c.LocalConnectionService||(c.LocalConnectionService={}));(function(a){a.instance={setClipboard:function(a){}}})(c.ClipboardService||(c.ClipboardService={}));p=function(){function a(){this._queues={}}a.prototype.register=function(a,b){v.assert(a);v.assert(b);var f=this._queues[a];if(f){if(-1<f.indexOf(b))return}else f=this._queues[a]=[];f.push(b)};a.prototype.unregister=function(a,b){v.assert(a);v.assert(b);var f=this._queues[a];if(f){var c=
f.indexOf(b);-1!==c&&f.splice(c,1);0===f.length&&(this._queues[a]=null)}};a.prototype.notify=function(a,b){var f=this._queues[a];if(f){f=f.slice();b=Array.prototype.slice.call(arguments,0);for(var c=0;c<f.length;c++)f[c].apply(null,b)}};a.prototype.notify1=function(a,b){var f=this._queues[a];if(f)for(var f=f.slice(),c=0;c<f.length;c++)(0,f[c])(a,b)};return a}();c.Callback=p;(function(a){a[a.None=0]="None";a[a.PremultipliedAlphaARGB=1]="PremultipliedAlphaARGB";a[a.StraightAlphaARGB=2]="StraightAlphaARGB";
a[a.StraightAlphaRGBA=3]="StraightAlphaRGBA";a[a.JPEG=4]="JPEG";a[a.PNG=5]="PNG";a[a.GIF=6]="GIF"})(c.ImageType||(c.ImageType={}));var f=c.ImageType;c.getMIMETypeForImageType=function(a){switch(a){case f.JPEG:return"image/jpeg";case f.PNG:return"image/png";case f.GIF:return"image/gif";default:return"text/plain"}};(function(a){a.toCSSCursor=function(a){switch(a){case 0:return"auto";case 2:return"pointer";case 3:return"grab";case 4:return"text";default:return"default"}}})(c.UI||(c.UI={}));p=function(){function a(){this.promise=
new Promise(function(a,b){this.resolve=a;this.reject=b}.bind(this))}a.prototype.then=function(a,b){return this.promise.then(a,b)};return a}();c.PromiseWrapper=p})(Shumway||(Shumway={}));"undefined"!==typeof exports&&(exports.Shumway=Shumway);
(function(){function c(c,E,r){c[E]||Object.defineProperty(c,E,{value:r,writable:!0,configurable:!0,enumerable:!1})}c(String.prototype,"padRight",function(c,E){var r=this,B=r.replace(/\033\[[0-9]*m/g,"").length;if(!c||B>=E)return r;for(var B=(E-B)/c.length,v=0;v<B;v++)r+=c;return r});c(String.prototype,"padLeft",function(c,E){var r=this,B=r.length;if(!c||B>=E)return r;for(var B=(E-B)/c.length,v=0;v<B;v++)r=c+r;return r});c(String.prototype,"trim",function(){return this.replace(/^\s+|\s+$/g,"")});c(String.prototype,
"endsWith",function(c){return-1!==this.indexOf(c,this.length-c.length)});c(Array.prototype,"replace",function(c,E){if(c===E)return 0;for(var r=0,B=0;B<this.length;B++)this[B]===c&&(this[B]=E,r++);return r})})();
(function(c){(function(g){var r=c.isObject,B=function(){function c(b,m,p,f){this.shortName=b;this.longName=m;this.type=p;f=f||{};this.positional=f.positional;this.parseFn=f.parse;this.value=f.defaultValue}c.prototype.parse=function(b){this.value="boolean"===this.type?b:"number"===this.type?parseInt(b,10):b;this.parseFn&&this.parseFn(this.value)};return c}();g.Argument=B;var v=function(){function c(){this.args=[]}c.prototype.addArgument=function(b,c,p,f){b=new B(b,c,p,f);this.args.push(b);return b};
c.prototype.addBoundOption=function(b){this.args.push(new B(b.shortName,b.longName,b.type,{parse:function(c){b.value=c}}))};c.prototype.addBoundOptionSet=function(b){var c=this;b.options.forEach(function(b){H.isOptionSet(b)?c.addBoundOptionSet(b):c.addBoundOption(b)})};c.prototype.getUsage=function(){var b="";this.args.forEach(function(c){b=c.positional?b+c.longName:b+("[-"+c.shortName+"|--"+c.longName+("boolean"===c.type?"":" "+c.type[0].toUpperCase())+"]");b+=" "});return b};c.prototype.parse=function(b){var c=
{},p=[];this.args.forEach(function(a){a.positional?p.push(a):(c["-"+a.shortName]=a,c["--"+a.longName]=a)});for(var f=[];b.length;){var a=b.shift(),h=null,g=a;if("--"==a){f=f.concat(b);break}else if("-"==a.slice(0,1)||"--"==a.slice(0,2)){h=c[a];if(!h)continue;g="boolean"!==h.type?b.shift():b.length&&0<="yes no true false t f".split(" ").indexOf(b[0])?0<=["yes","true","t"].indexOf(b.shift()):!0}else p.length?h=p.shift():f.push(g);h&&h.parse(g)}return f};return c}();g.ArgumentParser=v;var H=function(){function c(b,
m){void 0===m&&(m=null);this.open=!1;this.name=b;this.settings=m||{};this.options=[]}c.isOptionSet=function(b){return b instanceof c?!0:"object"!==typeof b||null===b||b instanceof z?!1:"options"in b&&"name"in b&&"settings"in b};c.prototype.register=function(b){if(c.isOptionSet(b))for(var m=0;m<this.options.length;m++){var u=this.options[m];if(c.isOptionSet(u)&&u.name===b.name)return u}this.options.push(b);if(this.settings)if(c.isOptionSet(b))m=this.settings[b.name],r(m)&&(b.settings=m.settings,b.open=
m.open);else if("undefined"!==typeof this.settings[b.longName])switch(b.type){case "boolean":b.value=!!this.settings[b.longName];break;case "number":b.value=+this.settings[b.longName];break;default:b.value=this.settings[b.longName]}return b};c.prototype.trace=function(b){b.enter(this.name+" {");this.options.forEach(function(c){c.trace(b)});b.leave("}")};c.prototype.getSettings=function(){var b={};this.options.forEach(function(m){c.isOptionSet(m)?b[m.name]={settings:m.getSettings(),open:m.open}:b[m.longName]=
m.value});return b};c.prototype.setSettings=function(b){b&&this.options.forEach(function(m){c.isOptionSet(m)?m.name in b&&m.setSettings(b[m.name].settings):m.longName in b&&(m.value=b[m.longName])})};return c}();g.OptionSet=H;var z=function(){function c(b,m,p,f,a,h){void 0===h&&(h=null);this.longName=m;this.shortName=b;this.type=p;this.value=this.defaultValue=f;this.description=a;this.config=h}c.prototype.parse=function(b){this.value=b};c.prototype.trace=function(b){b.writeLn(("-"+this.shortName+
"|--"+this.longName).padRight(" ",30)+" = "+this.type+" "+this.value+" ["+this.defaultValue+"] ("+this.description+")")};return c}();g.Option=z})(c.Options||(c.Options={}));(function(g){g.ROOT="Shumway Options";g.shumwayOptions=new c.Options.OptionSet(g.ROOT);g.setSettings=function(c){g.shumwayOptions.setSettings(c)};g.getSettings=function(){return g.shumwayOptions.getSettings()}})(c.Settings||(c.Settings={}));var g=c.Options.Option;c.loggingOptions=c.Settings.shumwayOptions.register(new c.Options.OptionSet("Logging Options"));
c.omitRepeatedWarnings=c.loggingOptions.register(new g("wo","warnOnce","boolean",!0,"Omit Repeated Warnings"));(function(g){var r=function(){function g(v,r){this._parent=v;this._timers=c.ObjectUtilities.createMap();this._name=r;this._count=this._total=this._last=this._begin=0}g.time=function(c,r){g.start(c);r();g.stop()};g.start=function(c){g._top=g._top._timers[c]||(g._top._timers[c]=new g(g._top,c));g._top.start();c=g._flat._timers[c]||(g._flat._timers[c]=new g(g._flat,c));c.start();g._flatStack.push(c)};
g.stop=function(){g._top.stop();g._top=g._top._parent;g._flatStack.pop().stop()};g.stopStart=function(c){g.stop();g.start(c)};g.prototype.start=function(){this._begin=c.getTicks()};g.prototype.stop=function(){this._last=c.getTicks()-this._begin;this._total+=this._last;this._count+=1};g.prototype.toJSON=function(){return{name:this._name,total:this._total,timers:this._timers}};g.prototype.trace=function(c){c.enter(this._name+": "+this._total.toFixed(2)+" ms, count: "+this._count+", average: "+(this._total/
this._count).toFixed(2)+" ms");for(var g in this._timers)this._timers[g].trace(c);c.outdent()};g.trace=function(c){g._base.trace(c);g._flat.trace(c)};g._base=new g(null,"Total");g._top=g._base;g._flat=new g(null,"Flat");g._flatStack=[];return g}();g.Timer=r;r=function(){function g(c){this._enabled=c;this.clear()}Object.defineProperty(g.prototype,"counts",{get:function(){return this._counts},enumerable:!0,configurable:!0});g.prototype.setEnabled=function(c){this._enabled=c};g.prototype.clear=function(){this._counts=
c.ObjectUtilities.createMap();this._times=c.ObjectUtilities.createMap()};g.prototype.toJSON=function(){return{counts:this._counts,times:this._times}};g.prototype.count=function(c,g,z){void 0===g&&(g=1);void 0===z&&(z=0);if(this._enabled)return void 0===this._counts[c]&&(this._counts[c]=0,this._times[c]=0),this._counts[c]+=g,this._times[c]+=z,this._counts[c]};g.prototype.trace=function(c){for(var g in this._counts)c.writeLn(g+": "+this._counts[g])};g.prototype._pairToString=function(c,g){var z=g[0],
p=g[1],b=c[z],z=z+": "+p;b&&(z+=", "+b.toFixed(4),1<p&&(z+=" ("+(b/p).toFixed(4)+")"));return z};g.prototype.toStringSorted=function(){var c=this,g=this._times,z=[],p;for(p in this._counts)z.push([p,this._counts[p]]);z.sort(function(b,c){return c[1]-b[1]});return z.map(function(b){return c._pairToString(g,b)}).join(", ")};g.prototype.traceSorted=function(c,g){void 0===g&&(g=!1);var z=this,p=this._times,b=[],m;for(m in this._counts)b.push([m,this._counts[m]]);b.sort(function(b,c){return c[1]-b[1]});
g?c.writeLn(b.map(function(b){return z._pairToString(p,b)}).join(", ")):b.forEach(function(b){c.writeLn(z._pairToString(p,b))})};g.instance=new g(!0);return g}();g.Counter=r;r=function(){function c(g){this._samples=new Float64Array(g);this._index=this._count=0}c.prototype.push=function(c){this._count<this._samples.length&&this._count++;this._index++;this._samples[this._index%this._samples.length]=c};c.prototype.average=function(){for(var c=0,g=0;g<this._count;g++)c+=this._samples[g];return c/this._count};
return c}();g.Average=r})(c.Metrics||(c.Metrics={}))})(Shumway||(Shumway={}));var __extends=this&&this.__extends||function(c,g){function E(){this.constructor=c}for(var r in g)g.hasOwnProperty(r)&&(c[r]=g[r]);E.prototype=g.prototype;c.prototype=new E};
(function(c){(function(g){function p(a){for(var e=Math.max.apply(null,a),k=a.length,d=1<<e,b=new Uint32Array(d),w=e<<16|65535,n=0;n<d;n++)b[n]=w;for(var w=0,n=1,l=2;n<=e;w<<=1,++n,l<<=1)for(var q=0;q<k;++q)if(a[q]===n){for(var t=0,c=0;c<n;++c)t=2*t+(w>>c&1);for(c=t;c<d;c+=l)b[c]=n<<16|q;++w}return{codes:b,maxBits:e}}function b(a){for(var e=new Uint16Array(a),k=0;k<a;k++)e[k]=1024;return e}function m(a,e,k,d){for(var b=1,w=0,n=0;n<k;n++)var l=d.decodeBit(a,b+e),b=(b<<1)+l,w=w|l<<n;return w}function u(a,
e){var d=[];d.length=e;for(var b=0;b<e;b++)d[b]=new k(a);return d}function f(a){return"string"===typeof a?a:void 0==a?null:a+""}var a;(function(a){a[a.INIT=0]="INIT";a[a.BLOCK_0=1]="BLOCK_0";a[a.BLOCK_1=2]="BLOCK_1";a[a.BLOCK_2_PRE=3]="BLOCK_2_PRE";a[a.BLOCK_2=4]="BLOCK_2";a[a.DONE=5]="DONE";a[a.ERROR=6]="ERROR";a[a.VERIFY_HEADER=7]="VERIFY_HEADER"})(a||(a={}));var h=function(){function a(e){}a.prototype.push=function(a){};a.prototype.close=function(){};a.create=function(a){return"undefined"!==typeof ShumwayCom&&
ShumwayCom.createSpecialInflate?new F(a,ShumwayCom.createSpecialInflate):new r(a)};a.prototype._processZLibHeader=function(a,e,k){if(e+2>k)return 0;a=a[e]<<8|a[e+1];e=null;2048!==(a&3840)?e="inflate: unknown compression method":0!==a%31?e="inflate: bad FCHECK":0!==(a&32)&&(e="inflate: FDICT bit set");if(e){if(this.onError)this.onError(e);return-1}return 2};a.inflate=function(e,k,d){var b=new Uint8Array(k),w=0;k=a.create(d);k.onData=function(a){var e=Math.min(a.length,b.length-w);e&&g.memCopy(b,a,
w,0,e);w+=e};k.onError=function(a){throw Error(a);};k.push(e);k.close();return b};return a}();g.Inflate=h;var r=function(k){function b(n){k.call(this,n);this._buffer=null;this._bitLength=this._bitBuffer=this._bufferPosition=this._bufferSize=0;this._window=new Uint8Array(65794);this._windowPosition=0;this._state=n?a.VERIFY_HEADER:a.INIT;this._isFinalBlock=!1;this._distanceTable=this._literalTable=null;this._block0Read=0;this._block2State=null;this._copyState={state:0,len:0,lenBits:0,dist:0,distBits:0};
if(!G){E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);v=new Uint16Array(30);D=new Uint8Array(30);for(var l=n=0,q=1;30>n;++n)v[n]=q,q+=1<<(D[n]=~~((l+=2<n?1:0)/2));var t=new Uint8Array(288);for(n=0;32>n;++n)t[n]=5;A=p(t.subarray(0,32));d=new Uint16Array(29);e=new Uint8Array(29);l=n=0;for(q=3;29>n;++n)d[n]=q-(28==n?1:0),q+=1<<(e[n]=~~((l+=4<n?1:0)/4%6));for(n=0;288>n;++n)t[n]=144>n||279<n?8:256>n?9:7;w=p(t);G=!0}}__extends(b,k);b.prototype.push=function(e){if(!this._buffer||this._buffer.length<
this._bufferSize+e.length){var k=new Uint8Array(this._bufferSize+e.length);this._buffer&&k.set(this._buffer);this._buffer=k}this._buffer.set(e,this._bufferSize);this._bufferSize+=e.length;this._bufferPosition=0;e=!1;do{k=this._windowPosition;if(this._state===a.INIT&&(e=this._decodeInitState()))break;switch(this._state){case a.BLOCK_0:e=this._decodeBlock0();break;case a.BLOCK_2_PRE:if(e=this._decodeBlock2Pre())break;case a.BLOCK_1:case a.BLOCK_2:e=this._decodeBlock();break;case a.ERROR:case a.DONE:this._bufferPosition=
this._bufferSize;break;case a.VERIFY_HEADER:var d=this._processZLibHeader(this._buffer,this._bufferPosition,this._bufferSize);0<d?(this._bufferPosition+=d,this._state=a.INIT):0===d?e=!0:this._state=a.ERROR}if(0<this._windowPosition-k)this.onData(this._window.subarray(k,this._windowPosition));65536<=this._windowPosition&&("copyWithin"in this._buffer?this._window.copyWithin(0,this._windowPosition-32768,this._windowPosition):this._window.set(this._window.subarray(this._windowPosition-32768,this._windowPosition)),
this._windowPosition=32768)}while(!e&&this._bufferPosition<this._bufferSize);this._bufferPosition<this._bufferSize?("copyWithin"in this._buffer?this._buffer.copyWithin(0,this._bufferPosition,this._bufferSize):this._buffer.set(this._buffer.subarray(this._bufferPosition,this._bufferSize)),this._bufferSize-=this._bufferPosition):this._bufferSize=0};b.prototype._decodeInitState=function(){if(this._isFinalBlock)return this._state=a.DONE,!1;var e=this._buffer,k=this._bufferSize,d=this._bitBuffer,b=this._bitLength,
n=this._bufferPosition;if(3>(k-n<<3)+b)return!0;3>b&&(d|=e[n++]<<b,b+=8);var l=d&7,d=d>>3,b=b-3;switch(l>>1){case 0:b=d=0;if(4>k-n)return!0;var q=e[n]|e[n+1]<<8,e=e[n+2]|e[n+3]<<8,n=n+4;if(65535!==(q^e)){this._error("inflate: invalid block 0 length");e=a.ERROR;break}0===q?e=a.INIT:(this._block0Read=q,e=a.BLOCK_0);break;case 1:e=a.BLOCK_1;this._literalTable=w;this._distanceTable=A;break;case 2:if(26>(k-n<<3)+b)return!0;for(;14>b;)d|=e[n++]<<b,b+=8;q=(d>>10&15)+4;if((k-n<<3)+b<14+3*q)return!0;for(var k=
{numLiteralCodes:(d&31)+257,numDistanceCodes:(d>>5&31)+1,codeLengthTable:void 0,bitLengths:void 0,codesRead:0,dupBits:0},d=d>>14,b=b-14,t=new Uint8Array(19),c=0;c<q;++c)3>b&&(d|=e[n++]<<b,b+=8),t[E[c]]=d&7,d>>=3,b-=3;for(;19>c;c++)t[E[c]]=0;k.bitLengths=new Uint8Array(k.numLiteralCodes+k.numDistanceCodes);k.codeLengthTable=p(t);this._block2State=k;e=a.BLOCK_2_PRE;break;default:return this._error("inflate: unsupported block type"),!1}this._isFinalBlock=!!(l&1);this._state=e;this._bufferPosition=n;
this._bitBuffer=d;this._bitLength=b;return!1};b.prototype._error=function(a){if(this.onError)this.onError(a)};b.prototype._decodeBlock0=function(){var e=this._bufferPosition,k=this._windowPosition,d=this._block0Read,b=65794-k,n=this._bufferSize-e,w=n<d,l=Math.min(b,n,d);this._window.set(this._buffer.subarray(e,e+l),k);this._windowPosition=k+l;this._bufferPosition=e+l;this._block0Read=d-l;return d===l?(this._state=a.INIT,!1):w&&b<n};b.prototype._readBits=function(a){var e=this._bitBuffer,k=this._bitLength;
if(a>k){var d=this._bufferPosition,b=this._bufferSize;do{if(d>=b)return this._bufferPosition=d,this._bitBuffer=e,this._bitLength=k,-1;e|=this._buffer[d++]<<k;k+=8}while(a>k);this._bufferPosition=d}this._bitBuffer=e>>a;this._bitLength=k-a;return e&(1<<a)-1};b.prototype._readCode=function(e){var k=this._bitBuffer,d=this._bitLength,b=e.maxBits;if(b>d){var n=this._bufferPosition,w=this._bufferSize;do{if(n>=w)return this._bufferPosition=n,this._bitBuffer=k,this._bitLength=d,-1;k|=this._buffer[n++]<<d;
d+=8}while(b>d);this._bufferPosition=n}e=e.codes[k&(1<<b)-1];b=e>>16;if(e&32768)return this._error("inflate: invalid encoding"),this._state=a.ERROR,-1;this._bitBuffer=k>>b;this._bitLength=d-b;return e&65535};b.prototype._decodeBlock2Pre=function(){var e=this._block2State,k=e.numLiteralCodes+e.numDistanceCodes,d=e.bitLengths,b=e.codesRead,n=0<b?d[b-1]:0,w=e.codeLengthTable,l;if(0<e.dupBits){l=this._readBits(e.dupBits);if(0>l)return!0;for(;l--;)d[b++]=n;e.dupBits=0}for(;b<k;){var q=this._readCode(w);
if(0>q)return e.codesRead=b,!0;if(16>q)d[b++]=n=q;else{var t;switch(q){case 16:t=2;l=3;q=n;break;case 17:l=t=3;q=0;break;case 18:t=7,l=11,q=0}for(;l--;)d[b++]=q;l=this._readBits(t);if(0>l)return e.codesRead=b,e.dupBits=t,!0;for(;l--;)d[b++]=q;n=q}}this._literalTable=p(d.subarray(0,e.numLiteralCodes));this._distanceTable=p(d.subarray(e.numLiteralCodes));this._state=a.BLOCK_2;this._block2State=null;return!1};b.prototype._decodeBlock=function(){var k=this._literalTable,b=this._distanceTable,n=this._window,
w=this._windowPosition,l=this._copyState,q,t,c,x;if(0!==l.state)switch(l.state){case 1:if(0>(q=this._readBits(l.lenBits)))return!0;l.len+=q;l.state=2;case 2:if(0>(q=this._readCode(b)))return!0;l.distBits=D[q];l.dist=v[q];l.state=3;case 3:q=0;if(0<l.distBits&&0>(q=this._readBits(l.distBits)))return!0;x=l.dist+q;t=l.len;for(q=w-x;t--;)n[w++]=n[q++];l.state=0;if(65536<=w)return this._windowPosition=w,!1;break}do{q=this._readCode(k);if(0>q)return this._windowPosition=w,!0;if(256>q)n[w++]=q;else if(256<
q){this._windowPosition=w;q-=257;c=e[q];t=d[q];q=0===c?0:this._readBits(c);if(0>q)return l.state=1,l.len=t,l.lenBits=c,!0;t+=q;q=this._readCode(b);if(0>q)return l.state=2,l.len=t,!0;c=D[q];x=v[q];q=0===c?0:this._readBits(c);if(0>q)return l.state=3,l.len=t,l.dist=x,l.distBits=c,!0;x+=q;for(q=w-x;t--;)n[w++]=n[q++]}else{this._state=a.INIT;break}}while(65536>w);this._windowPosition=w;return!1};return b}(h),E,v,D,A,d,e,w,G=!1,F=function(a){function e(k,d){a.call(this,k);this._verifyHeader=k;this._specialInflate=
d();this._specialInflate.setDataCallback(function(a){this.onData(a)}.bind(this))}__extends(e,a);e.prototype.push=function(a){if(this._verifyHeader){var e;this._buffer?(e=new Uint8Array(this._buffer.length+a.length),e.set(this._buffer),e.set(a,this._buffer.length),this._buffer=null):e=new Uint8Array(a);var k=this._processZLibHeader(e,0,e.length);if(0===k){this._buffer=e;return}this._verifyHeader=!0;0<k&&(a=e.subarray(k))}this._specialInflate.push(a)};e.prototype.close=function(){this._specialInflate&&
(this._specialInflate.close(),this._specialInflate=null)};return e}(h),t;(function(a){a[a.WRITE=0]="WRITE";a[a.DONE=1]="DONE";a[a.ZLIB_HEADER=2]="ZLIB_HEADER"})(t||(t={}));var l=function(){function a(){this.a=1;this.b=0}a.prototype.update=function(a,e,k){for(var d=this.a,b=this.b;e<k;++e)d=(d+(a[e]&255))%65521,b=(b+d)%65521;this.a=d;this.b=b};a.prototype.getChecksum=function(){return this.b<<16|this.a};return a}();g.Adler32=l;h=function(){function a(e){this._state=(this._writeZlibHeader=e)?t.ZLIB_HEADER:
t.WRITE;this._adler32=e?new l:null}a.prototype.push=function(a){this._state===t.ZLIB_HEADER&&(this.onData(new Uint8Array([120,156])),this._state=t.WRITE);for(var e=a.length,k=e+5*Math.ceil(e/65535),k=new Uint8Array(k),d=0,b=0;65535<e;)k.set(new Uint8Array([0,255,255,0,0]),d),d+=5,k.set(a.subarray(b,b+65535),d),b+=65535,d+=65535,e-=65535;k.set(new Uint8Array([0,e&255,e>>8&255,~e&255,~e>>8&255]),d);d+=5;k.set(a.subarray(b,e),d);this.onData(k);this._adler32&&this._adler32.update(a,0,e)};a.prototype.close=
function(){this._state=t.DONE;this.onData(new Uint8Array([1,0,0,255,255]));if(this._adler32){var a=this._adler32.getChecksum();this.onData(new Uint8Array([a&255,a>>8&255,a>>16&255,a>>>24&255]))}};return a}();g.Deflate=h;var x=function(){function a(){this.pos=this.available=0;this.buffer=new Uint8Array(2E3)}a.prototype.append=function(a){var e=this.pos+this.available,k=e+a.length;if(k>this.buffer.length){for(var d=2*this.buffer.length;d<k;)d*=2;k=new Uint8Array(d);k.set(this.buffer);this.buffer=k}this.buffer.set(a,
e);this.available+=a.length};a.prototype.compact=function(){0!==this.available&&(this.buffer.set(this.buffer.subarray(this.pos,this.pos+this.available),0),this.pos=0)};a.prototype.readByte=function(){if(0>=this.available)throw Error("Unexpected end of file");this.available--;return this.buffer[this.pos++]};return a}(),y=function(){function a(e){this.onData=e;this.processed=0}a.prototype.writeBytes=function(a){this.onData.call(null,a);this.processed+=a.length};return a}(),q=function(){function a(e){this.outStream=
e;this.buf=null;this.size=this.pos=0;this.isFull=!1;this.totalPos=this.writePos=0}a.prototype.create=function(a){this.buf=new Uint8Array(a);this.pos=0;this.size=a;this.isFull=!1;this.totalPos=this.writePos=0};a.prototype.putByte=function(a){this.totalPos++;this.buf[this.pos++]=a;this.pos===this.size&&(this.flush(),this.pos=0,this.isFull=!0)};a.prototype.getByte=function(a){return this.buf[a<=this.pos?this.pos-a:this.size-a+this.pos]};a.prototype.flush=function(){this.writePos<this.pos&&(this.outStream.writeBytes(this.buf.subarray(this.writePos,
this.pos)),this.writePos=this.pos===this.size?0:this.pos)};a.prototype.copyMatch=function(a,e){for(var k=this.pos,d=this.size,b=this.buf,n=a<=k?k-a:d-a+k,w=e;0<w;){for(var l=Math.min(Math.min(w,d-k),d-n),q=0;q<l;q++){var t=b[n++];b[k++]=t}k===d&&(this.pos=k,this.flush(),k=0,this.isFull=!0);n===d&&(n=0);w-=l}this.pos=k;this.totalPos+=e};a.prototype.checkDistance=function(a){return a<=this.pos||this.isFull};a.prototype.isEmpty=function(){return 0===this.pos&&!this.isFull};return a}(),n=function(){function a(e){this.inStream=
e;this.code=this.range=0;this.corrupted=!1}a.prototype.init=function(){0!==this.inStream.readByte()&&(this.corrupted=!0);this.range=-1;for(var a=0,e=0;4>e;e++)a=a<<8|this.inStream.readByte();a===this.range&&(this.corrupted=!0);this.code=a};a.prototype.isFinishedOK=function(){return 0===this.code};a.prototype.decodeDirectBits=function(a){var e=0,k=this.range,d=this.code;do{var k=k>>>1|0,d=d-k|0,b=d>>31,d=d+(k&b)|0;d===k&&(this.corrupted=!0);0<=k&&16777216>k&&(k<<=8,d=d<<8|this.inStream.readByte());
e=(e<<1)+b+1|0}while(--a);this.range=k;this.code=d;return e};a.prototype.decodeBit=function(a,e){var k=this.range,d=this.code,b=a[e],n=(k>>>11)*b;d>>>0<n?(b=b+(2048-b>>5)|0,k=n|0,n=0):(b=b-(b>>5)|0,d=d-n|0,k=k-n|0,n=1);a[e]=b&65535;0<=k&&16777216>k&&(k<<=8,d=d<<8|this.inStream.readByte());this.range=k;this.code=d;return n};return a}(),k=function(){function a(e){this.numBits=e;this.probs=b(1<<e)}a.prototype.decode=function(a){for(var e=1,k=0;k<this.numBits;k++)e=(e<<1)+a.decodeBit(this.probs,e);return e-
(1<<this.numBits)};a.prototype.reverseDecode=function(a){return m(this.probs,0,this.numBits,a)};return a}(),L=function(){function a(){this.choice=b(2);this.lowCoder=u(3,16);this.midCoder=u(3,16);this.highCoder=new k(8)}a.prototype.decode=function(a,e){return 0===a.decodeBit(this.choice,0)?this.lowCoder[e].decode(a):0===a.decodeBit(this.choice,1)?8+this.midCoder[e].decode(a):16+this.highCoder.decode(a)};return a}(),I=function(){function a(e,k){this.rangeDec=new n(e);this.outWindow=new q(k);this.markerIsMandatory=
!1;this.dictSizeInProperties=this.dictSize=this.lp=this.pb=this.lc=0;this.leftToUnpack=this.unpackSize=void 0;this.reps=new Int32Array(4);this.state=0}a.prototype.decodeProperties=function(a){var e=a[0];if(225<=e)throw Error("Incorrect LZMA properties");this.lc=e%9;e=e/9|0;this.pb=e/5|0;this.lp=e%5;for(e=this.dictSizeInProperties=0;4>e;e++)this.dictSizeInProperties|=a[e+1]<<8*e;this.dictSize=this.dictSizeInProperties;4096>this.dictSize&&(this.dictSize=4096)};a.prototype.create=function(){this.outWindow.create(this.dictSize);
this.init();this.rangeDec.init();this.reps[0]=0;this.reps[1]=0;this.reps[2]=0;this.state=this.reps[3]=0;this.leftToUnpack=this.unpackSize};a.prototype.decodeLiteral=function(a,e){var k=this.outWindow,d=this.rangeDec,b=0;k.isEmpty()||(b=k.getByte(1));var n=1,b=768*(((k.totalPos&(1<<this.lp)-1)<<this.lc)+(b>>8-this.lc));if(7<=a){k=k.getByte(e+1);do{var w=k>>7&1,k=k<<1,l=d.decodeBit(this.litProbs,b+((1+w<<8)+n)),n=n<<1|l;if(w!==l)break}while(256>n)}for(;256>n;)n=n<<1|d.decodeBit(this.litProbs,b+n);return n-
256&255};a.prototype.decodeDistance=function(a){var e=a;3<e&&(e=3);a=this.rangeDec;e=this.posSlotDecoder[e].decode(a);if(4>e)return e;var k=(e>>1)-1,d=(2|e&1)<<k;14>e?d=d+m(this.posDecoders,d-e,k,a)|0:(d=d+(a.decodeDirectBits(k-4)<<4)|0,d=d+this.alignDecoder.reverseDecode(a)|0);return d};a.prototype.init=function(){this.litProbs=b(768<<this.lc+this.lp);this.posSlotDecoder=u(6,4);this.alignDecoder=new k(4);this.posDecoders=b(115);this.isMatch=b(192);this.isRep=b(12);this.isRepG0=b(12);this.isRepG1=
b(12);this.isRepG2=b(12);this.isRep0Long=b(192);this.lenDecoder=new L;this.repLenDecoder=new L};a.prototype.decode=function(a){for(var e=this.rangeDec,k=this.outWindow,d=this.pb,b=this.dictSize,n=this.markerIsMandatory,w=this.leftToUnpack,l=this.isMatch,q=this.isRep,t=this.isRepG0,c=this.isRepG1,x=this.isRepG2,L=this.isRep0Long,I=this.lenDecoder,f=this.repLenDecoder,G=this.reps[0],h=this.reps[1],F=this.reps[2],y=this.reps[3],g=this.state;;){if(a&&48>e.inStream.available){this.outWindow.flush();break}if(0===
w&&!n&&(this.outWindow.flush(),e.isFinishedOK()))return P;var m=k.totalPos&(1<<d)-1;if(0===e.decodeBit(l,(g<<4)+m)){if(0===w)return K;k.putByte(this.decodeLiteral(g,G));g=4>g?0:10>g?g-3:g-6;w--}else{if(0!==e.decodeBit(q,g)){if(0===w||k.isEmpty())return K;if(0===e.decodeBit(t,g)){if(0===e.decodeBit(L,(g<<4)+m)){g=7>g?9:11;k.putByte(k.getByte(G+1));w--;continue}}else{var p;0===e.decodeBit(c,g)?p=h:(0===e.decodeBit(x,g)?p=F:(p=y,y=F),F=h);h=G;G=p}m=f.decode(e,m);g=7>g?8:11}else{y=F;F=h;h=G;m=I.decode(e,
m);g=7>g?7:10;G=this.decodeDistance(m);if(-1===G)return this.outWindow.flush(),e.isFinishedOK()?qa:K;if(0===w||G>=b||!k.checkDistance(G))return K}m+=2;p=!1;void 0!==w&&w<m&&(m=w,p=!0);k.copyMatch(G+1,m);w-=m;if(p)return K}}this.state=g;this.reps[0]=G;this.reps[1]=h;this.reps[2]=F;this.reps[3]=y;this.leftToUnpack=w;return ma};a.prototype.flushOutput=function(){this.outWindow.flush()};return a}(),K=0,qa=1,P=2,ma=3,M;(function(a){a[a.WAIT_FOR_LZMA_HEADER=0]="WAIT_FOR_LZMA_HEADER";a[a.WAIT_FOR_SWF_HEADER=
1]="WAIT_FOR_SWF_HEADER";a[a.PROCESS_DATA=2]="PROCESS_DATA";a[a.CLOSED=3]="CLOSED";a[a.ERROR=4]="ERROR"})(M||(M={}));h=function(){function a(e){void 0===e&&(e=!1);this._state=e?M.WAIT_FOR_SWF_HEADER:M.WAIT_FOR_LZMA_HEADER;this.buffer=null}a.prototype.push=function(a){if(this._state<M.PROCESS_DATA){var e=this.buffer?this.buffer.length:0,k=(this._state===M.WAIT_FOR_SWF_HEADER?17:13)+5;if(e+a.length<k){k=new Uint8Array(e+a.length);0<e&&k.set(this.buffer);k.set(a,e);this.buffer=k;return}var d=new Uint8Array(k);
0<e&&d.set(this.buffer);d.set(a.subarray(0,k-e),e);this._inStream=new x;this._inStream.append(d.subarray(k-5));this._outStream=new y(function(a){this.onData.call(null,a)}.bind(this));this._decoder=new I(this._inStream,this._outStream);if(this._state===M.WAIT_FOR_SWF_HEADER)this._decoder.decodeProperties(d.subarray(12,17)),this._decoder.markerIsMandatory=!1,this._decoder.unpackSize=((d[4]|d[5]<<8|d[6]<<16|d[7]<<24)>>>0)-8;else{this._decoder.decodeProperties(d.subarray(0,5));for(var e=0,b=!1,n=0;8>
n;n++){var w=d[5+n];255!==w&&(b=!0);e|=w<<8*n}this._decoder.markerIsMandatory=!b;this._decoder.unpackSize=b?e:void 0}this._decoder.create();a=a.subarray(k);this._state=M.PROCESS_DATA}else if(this._state!==M.PROCESS_DATA)return;try{this._inStream.append(a);var l=this._decoder.decode(!0);this._inStream.compact();l!==ma&&this._checkError(l)}catch(q){this._decoder.flushOutput(),this._decoder=null,this._error(q)}};a.prototype.close=function(){if(this._state===M.PROCESS_DATA){this._state=M.CLOSED;try{var a=
this._decoder.decode(!1);this._checkError(a)}catch(e){this._decoder.flushOutput(),this._error(e)}this._decoder=null}};a.prototype._error=function(a){this._state=M.ERROR;if(this.onError)this.onError(a)};a.prototype._checkError=function(a){var e;a===K?e="LZMA decoding error":a===ma?e="Decoding is not complete":a===qa?void 0!==this._decoder.unpackSize&&this._decoder.unpackSize!==this._outStream.processed&&(e="Finished with end marker before than specified size"):e="Internal LZMA Error";e&&this._error(e)};
return a}();g.LzmaDecoder=h;var Q=c.StringUtilities.utf8decode,na=c.StringUtilities.utf8encode,oa=c.NumberUtilities.clamp,T=function(){return function(a,e,k){this.buffer=a;this.length=e;this.littleEndian=k}}();g.PlainObjectDataBuffer=T;for(var R=new Uint32Array(33),h=1,ra=0;32>=h;h++)R[h]=ra=ra<<1|1;var O;(function(a){a[a.U8=1]="U8";a[a.I32=2]="I32";a[a.F32=4]="F32"})(O||(O={}));h=function(){function a(e){void 0===e&&(e=a.INITIAL_SIZE);this._buffer||(this._buffer=new ArrayBuffer(e),this._position=
this._length=0,this._resetViews(),this._littleEndian=a._nativeLittleEndian,this._bitLength=this._bitBuffer=0)}a.FromArrayBuffer=function(e,k){void 0===k&&(k=-1);var d=Object.create(a.prototype);d._buffer=e;d._length=-1===k?e.byteLength:k;d._position=0;d._resetViews();d._littleEndian=a._nativeLittleEndian;d._bitBuffer=0;d._bitLength=0;return d};a.FromPlainObject=function(e){var k=a.FromArrayBuffer(e.buffer,e.length);k._littleEndian=e.littleEndian;return k};a.prototype.toPlainObject=function(){return new T(this._buffer,
this._length,this._littleEndian)};a.prototype.clone=function(){var e=a.FromArrayBuffer((new Uint8Array(this._u8)).buffer,this._length);e._position=this._position;e._littleEndian=this._littleEndian;e._bitBuffer=this._bitBuffer;e._bitLength=this._bitLength;return e};a.prototype._resetViews=function(){this._u8=new Uint8Array(this._buffer);this._f32=this._i32=null};a.prototype._requestViews=function(a){0===(this._buffer.byteLength&3)&&(null===this._i32&&a&O.I32&&(this._i32=new Int32Array(this._buffer)),
null===this._f32&&a&O.F32&&(this._f32=new Float32Array(this._buffer)))};a.prototype.getBytes=function(){return new Uint8Array(this._buffer,0,this._length)};a.prototype._ensureCapacity=function(e){var k=this._buffer;if(!(k.byteLength>=e)){for(var d=Math.max(k.byteLength,1);d<e;)d*=2;4294967295<d&&this.sec.throwError("RangeError",Errors.ParamRangeError);d=a._arrayBufferPool.acquire(d);e=this._u8;this._buffer=d;this._resetViews();this._u8.set(e);d=this._u8;for(e=e.length;e<d.length;e++)d[e]=0;a._arrayBufferPool.release(k)}};
a.prototype.clear=function(){this._position=this._length=0};a.prototype.readBoolean=function(){return 0!==this.readUnsignedByte()};a.prototype.readByte=function(){return this.readUnsignedByte()<<24>>24};a.prototype.readUnsignedByte=function(){this._position+1>this._length&&this.sec.throwError("flash.errors.EOFError",Errors.EOFError);return this._u8[this._position++]};a.prototype.readBytes=function(a,e,k){var d=this._position;e>>>=0;k>>>=0;0===k&&(k=this._length-d);d+k>this._length&&this.sec.throwError("flash.errors.EOFError",
Errors.EOFError);a.length<e+k&&(a._ensureCapacity(e+k),a.length=e+k);a._u8.set(new Uint8Array(this._buffer,d,k),e);this._position+=k};a.prototype.readShort=function(){return this.readUnsignedShort()<<16>>16};a.prototype.readUnsignedShort=function(){var a=this._u8,e=this._position;e+2>this._length&&this.sec.throwError("flash.errors.EOFError",Errors.EOFError);var k=a[e+0],a=a[e+1];this._position=e+2;return this._littleEndian?a<<8|k:k<<8|a};a.prototype.readInt=function(){var a=this._u8,e=this._position;
e+4>this._length&&this.sec.throwError("flash.errors.EOFError",Errors.EOFError);var k=a[e+0],d=a[e+1],b=a[e+2],a=a[e+3];this._position=e+4;return this._littleEndian?a<<24|b<<16|d<<8|k:k<<24|d<<16|b<<8|a};a.prototype.readUnsignedInt=function(){return this.readInt()>>>0};a.prototype.readFloat=function(){var a=this._position;a+4>this._length&&this.sec.throwError("flash.errors.EOFError",Errors.EOFError);this._position=a+4;this._requestViews(O.F32);if(this._littleEndian&&0===(a&3)&&this._f32)return this._f32[a>>
2];var e=this._u8,k=c.IntegerUtilities.u8;this._littleEndian?(k[0]=e[a+0],k[1]=e[a+1],k[2]=e[a+2],k[3]=e[a+3]):(k[3]=e[a+0],k[2]=e[a+1],k[1]=e[a+2],k[0]=e[a+3]);return c.IntegerUtilities.f32[0]};a.prototype.readDouble=function(){var a=this._u8,e=this._position;e+8>this._length&&this.sec.throwError("flash.errors.EOFError",Errors.EOFError);var k=c.IntegerUtilities.u8;this._littleEndian?(k[0]=a[e+0],k[1]=a[e+1],k[2]=a[e+2],k[3]=a[e+3],k[4]=a[e+4],k[5]=a[e+5],k[6]=a[e+6],k[7]=a[e+7]):(k[0]=a[e+7],k[1]=
a[e+6],k[2]=a[e+5],k[3]=a[e+4],k[4]=a[e+3],k[5]=a[e+2],k[6]=a[e+1],k[7]=a[e+0]);this._position=e+8;return c.IntegerUtilities.f64[0]};a.prototype.writeBoolean=function(a){this.writeByte(a?1:0)};a.prototype.writeByte=function(a){var e=this._position+1;this._ensureCapacity(e);this._u8[this._position++]=a;e>this._length&&(this._length=e)};a.prototype.writeUnsignedByte=function(a){var e=this._position+1;this._ensureCapacity(e);this._u8[this._position++]=a;e>this._length&&(this._length=e)};a.prototype.writeRawBytes=
function(a){var e=this._position+a.length;this._ensureCapacity(e);this._u8.set(a,this._position);this._position=e;e>this._length&&(this._length=e)};a.prototype.writeBytes=function(a,e,k){c.isNullOrUndefined(a)&&this.sec.throwError("TypeError",Errors.NullPointerError,"bytes");e>>>=0;k>>>=0;2>arguments.length&&(e=0);3>arguments.length&&(k=0);e===oa(e,0,a.length)&&e+k===oa(e+k,0,a.length)||this.sec.throwError("RangeError",Errors.ParamRangeError);0===k&&(k=a.length-e);this.writeRawBytes(new Int8Array(a._buffer,
e,k))};a.prototype.writeShort=function(a){this.writeUnsignedShort(a)};a.prototype.writeUnsignedShort=function(a){var e=this._position;this._ensureCapacity(e+2);var k=this._u8;this._littleEndian?(k[e+0]=a,k[e+1]=a>>8):(k[e+0]=a>>8,k[e+1]=a);this._position=e+=2;e>this._length&&(this._length=e)};a.prototype.writeInt=function(a){this.writeUnsignedInt(a)};a.prototype.write2Ints=function(a,e){this.write2UnsignedInts(a,e)};a.prototype.write4Ints=function(a,e,k,d){this.write4UnsignedInts(a,e,k,d)};a.prototype.writeUnsignedInt=
function(e){var k=this._position;this._ensureCapacity(k+4);this._requestViews(O.I32);if(this._littleEndian===a._nativeLittleEndian&&0===(k&3)&&this._i32)this._i32[k>>2]=e;else{var d=this._u8;this._littleEndian?(d[k+0]=e,d[k+1]=e>>8,d[k+2]=e>>16,d[k+3]=e>>24):(d[k+0]=e>>24,d[k+1]=e>>16,d[k+2]=e>>8,d[k+3]=e)}this._position=k+=4;k>this._length&&(this._length=k)};a.prototype.write2UnsignedInts=function(e,k){var d=this._position;this._ensureCapacity(d+8);this._requestViews(O.I32);this._littleEndian===
a._nativeLittleEndian&&0===(d&3)&&this._i32?(this._i32[(d>>2)+0]=e,this._i32[(d>>2)+1]=k,this._position=d+=8,d>this._length&&(this._length=d)):(this.writeUnsignedInt(e),this.writeUnsignedInt(k))};a.prototype.write4UnsignedInts=function(e,k,d,b){var n=this._position;this._ensureCapacity(n+16);this._requestViews(O.I32);this._littleEndian===a._nativeLittleEndian&&0===(n&3)&&this._i32?(this._i32[(n>>2)+0]=e,this._i32[(n>>2)+1]=k,this._i32[(n>>2)+2]=d,this._i32[(n>>2)+3]=b,this._position=n+=16,n>this._length&&
(this._length=n)):(this.writeUnsignedInt(e),this.writeUnsignedInt(k),this.writeUnsignedInt(d),this.writeUnsignedInt(b))};a.prototype.writeFloat=function(e){var k=this._position;this._ensureCapacity(k+4);this._requestViews(O.F32);if(this._littleEndian===a._nativeLittleEndian&&0===(k&3)&&this._f32)this._f32[k>>2]=e;else{var d=this._u8;c.IntegerUtilities.f32[0]=e;e=c.IntegerUtilities.u8;this._littleEndian?(d[k+0]=e[0],d[k+1]=e[1],d[k+2]=e[2],d[k+3]=e[3]):(d[k+0]=e[3],d[k+1]=e[2],d[k+2]=e[1],d[k+3]=e[0])}this._position=
k+=4;k>this._length&&(this._length=k)};a.prototype.write2Floats=function(e,k){var d=this._position;this._ensureCapacity(d+8);this._requestViews(O.F32);this._littleEndian===a._nativeLittleEndian&&0===(d&3)&&this._f32?(this._f32[(d>>2)+0]=e,this._f32[(d>>2)+1]=k,this._position=d+=8,d>this._length&&(this._length=d)):(this.writeFloat(e),this.writeFloat(k))};a.prototype.write6Floats=function(e,k,d,b,n,w){var l=this._position;this._ensureCapacity(l+24);this._requestViews(O.F32);this._littleEndian===a._nativeLittleEndian&&
0===(l&3)&&this._f32?(this._f32[(l>>2)+0]=e,this._f32[(l>>2)+1]=k,this._f32[(l>>2)+2]=d,this._f32[(l>>2)+3]=b,this._f32[(l>>2)+4]=n,this._f32[(l>>2)+5]=w,this._position=l+=24,l>this._length&&(this._length=l)):(this.writeFloat(e),this.writeFloat(k),this.writeFloat(d),this.writeFloat(b),this.writeFloat(n),this.writeFloat(w))};a.prototype.writeDouble=function(a){var e=this._position;this._ensureCapacity(e+8);var k=this._u8;c.IntegerUtilities.f64[0]=a;a=c.IntegerUtilities.u8;this._littleEndian?(k[e+0]=
a[0],k[e+1]=a[1],k[e+2]=a[2],k[e+3]=a[3],k[e+4]=a[4],k[e+5]=a[5],k[e+6]=a[6],k[e+7]=a[7]):(k[e+0]=a[7],k[e+1]=a[6],k[e+2]=a[5],k[e+3]=a[4],k[e+4]=a[3],k[e+5]=a[2],k[e+6]=a[1],k[e+7]=a[0]);this._position=e+=8;e>this._length&&(this._length=e)};a.prototype.readRawBytes=function(){return new Int8Array(this._buffer,0,this._length)};a.prototype.writeUTF=function(a){a=f(a);a=Q(a);this.writeShort(a.length);this.writeRawBytes(a)};a.prototype.writeUTFBytes=function(a){a=f(a);a=Q(a);this.writeRawBytes(a)};a.prototype.readUTF=
function(){return this.readUTFBytes(this.readShort())};a.prototype.readUTFBytes=function(a){a>>>=0;var e=this._position;e+a>this._length&&this.sec.throwError("flash.errors.EOFError",Errors.EOFError);this._position+=a;return na(new Int8Array(this._buffer,e,a))};Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){a>>>=0;a>this._buffer.byteLength&&this._ensureCapacity(a);this._length=a;this._position=oa(this._position,0,this._length)},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"bytesAvailable",{get:function(){return this._length-this._position},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"position",{get:function(){return this._position},set:function(a){this._position=a>>>0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bytes",{get:function(){return this._u8},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"ints",{get:function(){this._requestViews(O.I32);return this._i32},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"objectEncoding",{get:function(){return this._objectEncoding},set:function(a){this._objectEncoding=a>>>0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"endian",{get:function(){return this._littleEndian?"littleEndian":"bigEndian"},set:function(e){e=f(e);this._littleEndian="auto"===e?a._nativeLittleEndian:"littleEndian"===
e},enumerable:!0,configurable:!0});a.prototype.toString=function(){return na(new Int8Array(this._buffer,0,this._length))};a.prototype.toBlob=function(a){return new Blob([new Int8Array(this._buffer,this._position,this._length)],{type:a})};a.prototype.writeMultiByte=function(a,e){f(a);f(e)};a.prototype.readMultiByte=function(a,e){f(e)};a.prototype.getValue=function(a){a|=0;return a>=this._length?void 0:this._u8[a]};a.prototype.setValue=function(a,e){a|=0;var k=a+1;this._ensureCapacity(k);this._u8[a]=
e;k>this._length&&(this._length=k)};a.prototype.readFixed=function(){return this.readInt()/65536};a.prototype.readFixed8=function(){return this.readShort()/256};a.prototype.readFloat16=function(){var a=this.readUnsignedShort(),e=a>>15?-1:1,k=(a&31744)>>10,a=a&1023;return k?31===k?a?NaN:Infinity*e:e*Math.pow(2,k-15)*(1+a/1024):e*Math.pow(2,-14)*(a/1024)};a.prototype.readEncodedU32=function(){var a=this.readUnsignedByte();if(!(a&128))return a;a=a&127|this.readUnsignedByte()<<7;if(!(a&16384))return a;
a=a&16383|this.readUnsignedByte()<<14;if(!(a&2097152))return a;a=a&2097151|this.readUnsignedByte()<<21;return a&268435456?a&268435455|this.readUnsignedByte()<<28:a};a.prototype.readBits=function(a){return this.readUnsignedBits(a)<<32-a>>32-a};a.prototype.readUnsignedBits=function(a){for(var e=this._bitBuffer,k=this._bitLength;a>k;)e=e<<8|this.readUnsignedByte(),k+=8;k-=a;a=e>>>k&R[a];this._bitBuffer=e;this._bitLength=k;return a};a.prototype.readFixedBits=function(a){return this.readBits(a)/65536};
a.prototype.readString=function(a){var e=this._position;if(a)e+a>this._length&&this.sec.throwError("flash.errors.EOFError",Errors.EOFError),this._position+=a;else{a=0;for(var k=e;k<this._length&&this._u8[k];k++)a++;this._position+=a+1}return na(new Int8Array(this._buffer,e,a))};a.prototype.align=function(){this._bitLength=this._bitBuffer=0};a.prototype.deflate=function(){this.compress("deflate")};a.prototype.inflate=function(){this.uncompress("deflate")};a.prototype.compress=function(e){e=0===arguments.length?
"zlib":f(e);var k;switch(e){case "zlib":k=new g.Deflate(!0);break;case "deflate":k=new g.Deflate(!1);break;default:return}var d=new a;k.onData=d.writeRawBytes.bind(d);k.push(this._u8.subarray(0,this._length));k.close();this._ensureCapacity(d._u8.length);this._u8.set(d._u8);this.length=d.length;this._position=0};a.prototype.uncompress=function(e){e=0===arguments.length?"zlib":f(e);var k;switch(e){case "zlib":k=g.Inflate.create(!0);break;case "deflate":k=g.Inflate.create(!1);break;case "lzma":k=new g.LzmaDecoder(!1);
break;default:return}var d=new a,b;k.onData=d.writeRawBytes.bind(d);k.onError=function(a){return b=a};k.push(this._u8.subarray(0,this._length));b&&this.sec.throwError("IOError",Errors.CompressedDataError);k.close();this._ensureCapacity(d._u8.length);this._u8.set(d._u8);this.length=d.length;this._position=0};a._nativeLittleEndian=1===(new Int8Array((new Int32Array([1])).buffer))[0];a.INITIAL_SIZE=128;a._arrayBufferPool=new c.ArrayBufferPool;return a}();g.DataBuffer=h})(c.ArrayUtilities||(c.ArrayUtilities=
{}));var g=c.ArrayUtilities.DataBuffer,E=c.ArrayUtilities.ensureTypedArrayCapacity,r=function(){return function(c,g,b,m,u,f,a,h,r,v,E){this.commands=c;this.commandsPosition=g;this.coordinates=b;this.morphCoordinates=m;this.coordinatesPosition=u;this.styles=f;this.stylesLength=a;this.morphStyles=h;this.morphStylesLength=r;this.hasFills=v;this.hasLines=E}}();c.PlainObjectShapeData=r;var B;(function(c){c[c.Commands=32]="Commands";c[c.Coordinates=128]="Coordinates";c[c.Styles=16]="Styles"})(B||(B={}));
var v=function(){function c(g){void 0===g&&(g=!0);g&&this.clear()}c.FromPlainObject=function(p){var b=new c(!1);b.commands=p.commands;b.coordinates=p.coordinates;b.morphCoordinates=p.morphCoordinates;b.commandsPosition=p.commandsPosition;b.coordinatesPosition=p.coordinatesPosition;b.styles=g.FromArrayBuffer(p.styles,p.stylesLength);b.styles.endian="auto";p.morphStyles&&(b.morphStyles=g.FromArrayBuffer(p.morphStyles,p.morphStylesLength),b.morphStyles.endian="auto");b.hasFills=p.hasFills;b.hasLines=
p.hasLines;return b};c.prototype.moveTo=function(c,b){this.ensurePathCapacities(1,2);this.commands[this.commandsPosition++]=9;this.coordinates[this.coordinatesPosition++]=c;this.coordinates[this.coordinatesPosition++]=b};c.prototype.lineTo=function(c,b){this.ensurePathCapacities(1,2);this.commands[this.commandsPosition++]=10;this.coordinates[this.coordinatesPosition++]=c;this.coordinates[this.coordinatesPosition++]=b};c.prototype.curveTo=function(c,b,g,u){this.ensurePathCapacities(1,4);this.commands[this.commandsPosition++]=
11;this.coordinates[this.coordinatesPosition++]=c;this.coordinates[this.coordinatesPosition++]=b;this.coordinates[this.coordinatesPosition++]=g;this.coordinates[this.coordinatesPosition++]=u};c.prototype.cubicCurveTo=function(c,b,g,u,f,a){this.ensurePathCapacities(1,6);this.commands[this.commandsPosition++]=12;this.coordinates[this.coordinatesPosition++]=c;this.coordinates[this.coordinatesPosition++]=b;this.coordinates[this.coordinatesPosition++]=g;this.coordinates[this.coordinatesPosition++]=u;this.coordinates[this.coordinatesPosition++]=
f;this.coordinates[this.coordinatesPosition++]=a};c.prototype.beginFill=function(c){this.ensurePathCapacities(1,0);this.commands[this.commandsPosition++]=1;this.styles.writeUnsignedInt(c);this.hasFills=!0};c.prototype.writeMorphFill=function(c){this.morphStyles.writeUnsignedInt(c)};c.prototype.endFill=function(){this.ensurePathCapacities(1,0);this.commands[this.commandsPosition++]=4};c.prototype.endLine=function(){this.ensurePathCapacities(1,0);this.commands[this.commandsPosition++]=8};c.prototype.lineStyle=
function(c,b,g,u,f,a,h){this.ensurePathCapacities(2,0);this.commands[this.commandsPosition++]=5;this.coordinates[this.coordinatesPosition++]=c;c=this.styles;c.writeUnsignedInt(b);c.writeBoolean(g);c.writeUnsignedByte(u);c.writeUnsignedByte(f);c.writeUnsignedByte(a);c.writeUnsignedByte(h);this.hasLines=!0};c.prototype.writeMorphLineStyle=function(c,b){this.morphCoordinates[this.coordinatesPosition-1]=c;this.morphStyles.writeUnsignedInt(b)};c.prototype.beginBitmap=function(c,b,g,u,f){this.ensurePathCapacities(1,
0);this.commands[this.commandsPosition++]=c;c=this.styles;c.writeUnsignedInt(b);this._writeStyleMatrix(g,!1);c.writeBoolean(u);c.writeBoolean(f);this.hasFills=!0};c.prototype.writeMorphBitmap=function(c){this._writeStyleMatrix(c,!0)};c.prototype.beginGradient=function(c,b,g,u,f,a,h,r){this.ensurePathCapacities(1,0);this.commands[this.commandsPosition++]=c;c=this.styles;c.writeUnsignedByte(u);c.writeShort(r);this._writeStyleMatrix(f,!1);u=b.length;c.writeByte(u);for(f=0;f<u;f++)c.writeUnsignedByte(g[f]),
c.writeUnsignedInt(b[f]);c.writeUnsignedByte(a);c.writeUnsignedByte(h);this.hasFills=!0};c.prototype.writeMorphGradient=function(c,b,g){this._writeStyleMatrix(g,!0);g=this.morphStyles;for(var u=0;u<c.length;u++)g.writeUnsignedByte(b[u]),g.writeUnsignedInt(c[u])};c.prototype.writeCommandAndCoordinates=function(c,b,g){this.ensurePathCapacities(1,2);this.commands[this.commandsPosition++]=c;this.coordinates[this.coordinatesPosition++]=b;this.coordinates[this.coordinatesPosition++]=g};c.prototype.writeCoordinates=
function(c,b){this.ensurePathCapacities(0,2);this.coordinates[this.coordinatesPosition++]=c;this.coordinates[this.coordinatesPosition++]=b};c.prototype.writeMorphCoordinates=function(c,b){this.morphCoordinates=E(this.morphCoordinates,this.coordinatesPosition);this.morphCoordinates[this.coordinatesPosition-2]=c;this.morphCoordinates[this.coordinatesPosition-1]=b};c.prototype.clear=function(){this.commandsPosition=this.coordinatesPosition=0;this.commands=new Uint8Array(B.Commands);this.coordinates=
new Int32Array(B.Coordinates);this.styles=new g(B.Styles);this.styles.endian="auto";this.hasFills=this.hasLines=!1};c.prototype.isEmpty=function(){return 0===this.commandsPosition};c.prototype.clone=function(){var p=new c(!1);p.commands=new Uint8Array(this.commands);p.commandsPosition=this.commandsPosition;p.coordinates=new Int32Array(this.coordinates);p.coordinatesPosition=this.coordinatesPosition;p.styles=new g(this.styles.length);p.styles.writeRawBytes(this.styles.bytes.subarray(0,this.styles.length));
this.morphStyles&&(p.morphStyles=new g(this.morphStyles.length),p.morphStyles.writeRawBytes(this.morphStyles.bytes.subarray(0,this.morphStyles.length)));p.hasFills=this.hasFills;p.hasLines=this.hasLines;return p};c.prototype.toPlainObject=function(){return new r(this.commands,this.commandsPosition,this.coordinates,this.morphCoordinates,this.coordinatesPosition,this.styles.buffer,this.styles.length,this.morphStyles&&this.morphStyles.buffer,this.morphStyles?this.morphStyles.length:0,this.hasFills,this.hasLines)};
Object.defineProperty(c.prototype,"buffers",{get:function(){var c=[this.commands.buffer,this.coordinates.buffer,this.styles.buffer];this.morphCoordinates&&c.push(this.morphCoordinates.buffer);this.morphStyles&&c.push(this.morphStyles.buffer);return c},enumerable:!0,configurable:!0});c.prototype._writeStyleMatrix=function(c,b){(b?this.morphStyles:this.styles).write6Floats(c.a,c.b,c.c,c.d,c.tx,c.ty)};c.prototype.ensurePathCapacities=function(c,b){this.commands=E(this.commands,this.commandsPosition+
c);this.coordinates=E(this.coordinates,this.coordinatesPosition+b)};return c}();c.ShapeData=v;(function(c){(function(c){c.getSwfTagCodeName=function(b){return"SwfTagCode: "+b};(function(b){b[b.CODE_DEFINE_SHAPE=2]="CODE_DEFINE_SHAPE";b[b.CODE_DEFINE_BITS=6]="CODE_DEFINE_BITS";b[b.CODE_DEFINE_BUTTON=7]="CODE_DEFINE_BUTTON";b[b.CODE_DEFINE_FONT=10]="CODE_DEFINE_FONT";b[b.CODE_DEFINE_TEXT=11]="CODE_DEFINE_TEXT";b[b.CODE_DEFINE_SOUND=14]="CODE_DEFINE_SOUND";b[b.CODE_DEFINE_BITS_LOSSLESS=20]="CODE_DEFINE_BITS_LOSSLESS";
b[b.CODE_DEFINE_BITS_JPEG2=21]="CODE_DEFINE_BITS_JPEG2";b[b.CODE_DEFINE_SHAPE2=22]="CODE_DEFINE_SHAPE2";b[b.CODE_DEFINE_SHAPE3=32]="CODE_DEFINE_SHAPE3";b[b.CODE_DEFINE_TEXT2=33]="CODE_DEFINE_TEXT2";b[b.CODE_DEFINE_BUTTON2=34]="CODE_DEFINE_BUTTON2";b[b.CODE_DEFINE_BITS_JPEG3=35]="CODE_DEFINE_BITS_JPEG3";b[b.CODE_DEFINE_BITS_LOSSLESS2=36]="CODE_DEFINE_BITS_LOSSLESS2";b[b.CODE_DEFINE_EDIT_TEXT=37]="CODE_DEFINE_EDIT_TEXT";b[b.CODE_DEFINE_SPRITE=39]="CODE_DEFINE_SPRITE";b[b.CODE_DEFINE_MORPH_SHAPE=46]=
"CODE_DEFINE_MORPH_SHAPE";b[b.CODE_DEFINE_FONT2=48]="CODE_DEFINE_FONT2";b[b.CODE_DEFINE_VIDEO_STREAM=60]="CODE_DEFINE_VIDEO_STREAM";b[b.CODE_DEFINE_FONT3=75]="CODE_DEFINE_FONT3";b[b.CODE_DEFINE_SHAPE4=83]="CODE_DEFINE_SHAPE4";b[b.CODE_DEFINE_MORPH_SHAPE2=84]="CODE_DEFINE_MORPH_SHAPE2";b[b.CODE_DEFINE_BINARY_DATA=87]="CODE_DEFINE_BINARY_DATA";b[b.CODE_DEFINE_BITS_JPEG4=90]="CODE_DEFINE_BITS_JPEG4";b[b.CODE_DEFINE_FONT4=91]="CODE_DEFINE_FONT4"})(c.DefinitionTags||(c.DefinitionTags={}));(function(b){b[b.CODE_DEFINE_BITS=
6]="CODE_DEFINE_BITS";b[b.CODE_DEFINE_BITS_JPEG2=21]="CODE_DEFINE_BITS_JPEG2";b[b.CODE_DEFINE_BITS_JPEG3=35]="CODE_DEFINE_BITS_JPEG3";b[b.CODE_DEFINE_BITS_JPEG4=90]="CODE_DEFINE_BITS_JPEG4"})(c.ImageDefinitionTags||(c.ImageDefinitionTags={}));(function(b){b[b.CODE_DEFINE_FONT=10]="CODE_DEFINE_FONT";b[b.CODE_DEFINE_FONT2=48]="CODE_DEFINE_FONT2";b[b.CODE_DEFINE_FONT3=75]="CODE_DEFINE_FONT3";b[b.CODE_DEFINE_FONT4=91]="CODE_DEFINE_FONT4"})(c.FontDefinitionTags||(c.FontDefinitionTags={}));(function(b){b[b.CODE_PLACE_OBJECT=
4]="CODE_PLACE_OBJECT";b[b.CODE_PLACE_OBJECT2=26]="CODE_PLACE_OBJECT2";b[b.CODE_PLACE_OBJECT3=70]="CODE_PLACE_OBJECT3";b[b.CODE_REMOVE_OBJECT=5]="CODE_REMOVE_OBJECT";b[b.CODE_REMOVE_OBJECT2=28]="CODE_REMOVE_OBJECT2";b[b.CODE_START_SOUND=15]="CODE_START_SOUND";b[b.CODE_START_SOUND2=89]="CODE_START_SOUND2";b[b.CODE_VIDEO_FRAME=61]="CODE_VIDEO_FRAME"})(c.ControlTags||(c.ControlTags={}))})(c.Parser||(c.Parser={}))})(c.SWF||(c.SWF={}));var H=c.Debug.unexpected,v=function(){function c(g,b,m,u){this.url=
g;this.method=b;this.mimeType=m;this.data=u}c.prototype.readAll=function(c,b){var g=this.url,u=this.xhr=new XMLHttpRequest({mozSystem:!0});u.open(this.method||"GET",this.url,!0);u.responseType="arraybuffer";c&&(u.onprogress=function(b){c(u.response,b.loaded,b.total)});u.onreadystatechange=function(c){4===u.readyState&&(200!==u.status&&0!==u.status||null===u.response?(H("Path: "+g+" not found."),b(null,u.statusText)):b(u.response))};this.mimeType&&u.setRequestHeader("Content-Type",this.mimeType);u.send(this.data||
null)};c.prototype.readChunked=function(c,b,g,u,f,a){if(0>=c)this.readAsync(b,g,u,f,a);else{var h=0,r=new Uint8Array(c),z=0,v;this.readAsync(function(a,f){v=f.total;for(var d=a.length,e=0;h+d>=c;){var w=c-h;r.set(a.subarray(e,e+w),h);e+=w;d-=w;z+=c;b(r,{loaded:z,total:v});h=0}r.set(a.subarray(e),h);h+=d},g,u,function(){0<h&&(z+=h,b(r.subarray(0,h),{loaded:z,total:v}),h=0);f&&f()},a)}};c.prototype.readAsync=function(c,b,g,u,f){var a=this.xhr=new XMLHttpRequest({mozSystem:!0}),h=this.url,r=0,z=0;a.open(this.method||
"GET",h,!0);a.responseType="moz-chunked-arraybuffer";var v="moz-chunked-arraybuffer"!==a.responseType;v&&(a.responseType="arraybuffer");a.onprogress=function(b){v||(r=b.loaded,z=b.total,b=new Uint8Array(a.response),r=Math.max(r,b.byteLength),z=Math.max(z,b.byteLength),c(b,{loaded:r,total:z}))};a.onreadystatechange=function(g){2===a.readyState&&f&&f(h,a.status,a.getAllResponseHeaders());4===a.readyState&&(200!==a.status&&0!==a.status||null===a.response&&(0===z||r!==z)?b(a.statusText):v&&(g=a.response,
c(new Uint8Array(g),{loaded:g.byteLength,total:g.byteLength})))};a.onload=function(){u&&u()};this.mimeType&&a.setRequestHeader("Content-Type",this.mimeType);a.send(this.data||null);g&&g()};c.prototype.abort=function(){this.xhr&&(this.xhr.abort(),this.xhr=null)};return c}();c.BinaryFileReader=v;v=function(){function c(){this.isAS3TraceOn=!0;this._startTime=Date.now()}Object.defineProperty(c.prototype,"currentTimestamp",{get:function(){return Date.now()-this._startTime},enumerable:!0,configurable:!0});
c.prototype._writeLine=function(c){};c.prototype.writeAS3Trace=function(c){};return c}();c.FlashLog=v;c.flashlog=null;(function(c){(function(b){b[b.Blur=0]="Blur";b[b.DropShadow=1]="DropShadow";b[b.ColorMatrix=2]="ColorMatrix"})(c.FilterType||(c.FilterType={}));c.MouseEventNames="click dblclick mousedown mousemove mouseup mouseover mouseout".split(" ");c.KeyboardEventNames=["keydown","keypress","keyup"];var g=function(){function b(b,c){this.window=b;this.target=c}Object.defineProperty(b.prototype,
"onAsyncMessage",{set:function(b){this.window.addEventListener("message",function(c){Promise.resolve(c.data).then(function(c){b(c)})})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onSyncMessage",{set:function(b){this.window.addEventListener("syncmessage",function(c){c=c.detail;c.result=b(c.msg)})},enumerable:!0,configurable:!0});b.prototype.postAsyncMessage=function(b,c){this.target.postMessage(b,"*",c)};b.prototype.sendSyncMessage=function(b,c){var f=this.target.document.createEvent("CustomEvent"),
a={msg:b,result:void 0};f.initCustomEvent("syncmessage",!1,!1,a);this.target.dispatchEvent(f);return a.result};return b}();c.WindowTransportPeer=g;g=function(){function b(){}Object.defineProperty(b.prototype,"onAsyncMessage",{set:function(b){ShumwayCom.setAsyncMessageCallback(b)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onSyncMessage",{set:function(b){ShumwayCom.setSyncMessageCallback(b)},enumerable:!0,configurable:!0});b.prototype.postAsyncMessage=function(b,c){ShumwayCom.postAsyncMessage(b)};
b.prototype.sendSyncMessage=function(b,c){return ShumwayCom.sendSyncMessage(b)};return b}();c.ShumwayComTransportPeer=g})(c.Remoting||(c.Remoting={}))})(Shumway||(Shumway={}));var throwError,Errors;console.timeEnd("Load Shared Dependencies");console.time("Load GFX Dependencies");
(function(c){(function(g){function r(a,e,d){return b&&d?"string"===typeof e?(a=c.ColorUtilities.cssStyleToRGBA(e),c.ColorUtilities.rgbaToCSSStyle(d.transformRGBA(a))):e instanceof CanvasGradient&&e._template?e._template.createCanvasGradient(a,d):e:e}var B=c.NumberUtilities.clamp,v=c.Metrics.Counter.instance;g.frameCounter=new c.Metrics.Counter(!0);g.traceLevel=2;g.writer=null;g.frameCount=function(a){v.count(a);g.frameCounter.count(a)};g.timelineBuffer=c.Tools?new c.Tools.Profiler.TimelineBuffer("GFX"):
null;g.enterTimeline=function(a,e){};g.leaveTimeline=function(a,e){};var H=null,z=null,p=null,b=!0;b&&"undefined"!==typeof CanvasRenderingContext2D&&(H=CanvasGradient.prototype.addColorStop,z=CanvasRenderingContext2D.prototype.createLinearGradient,p=CanvasRenderingContext2D.prototype.createRadialGradient,CanvasRenderingContext2D.prototype.createLinearGradient=function(a,e,d,b){return(new u(a,e,d,b)).createCanvasGradient(this,null)},CanvasRenderingContext2D.prototype.createRadialGradient=function(a,
e,d,b,c,n){return(new f(a,e,d,b,c,n)).createCanvasGradient(this,null)},CanvasGradient.prototype.addColorStop=function(a,e){H.call(this,a,e);this._template.addColorStop(a,e)});var m=function(){return function(a,e){this.offset=a;this.color=e}}(),u=function(){function a(e,d,b,c){this.x0=e;this.y0=d;this.x1=b;this.y1=c;this.colorStops=[]}a.prototype.addColorStop=function(a,e){this.colorStops.push(new m(a,e))};a.prototype.createCanvasGradient=function(a,e){for(var d=z.call(a,this.x0,this.y0,this.x1,this.y1),
b=this.colorStops,n=0;n<b.length;n++){var k=b[n],c=k.offset,k=k.color,k=e?r(a,k,e):k;H.call(d,c,k)}d._template=this;d._transform=this._transform;return d};return a}(),f=function(){function a(e,d,b,c,n,k){this.x0=e;this.y0=d;this.r0=b;this.x1=c;this.y1=n;this.r1=k;this.colorStops=[]}a.prototype.addColorStop=function(a,e){this.colorStops.push(new m(a,e))};a.prototype.createCanvasGradient=function(a,e){for(var d=p.call(a,this.x0,this.y0,this.r0,this.x1,this.y1,this.r1),b=this.colorStops,n=0;n<b.length;n++){var k=
b[n],c=k.offset,k=k.color,k=e?r(a,k,e):k;H.call(d,c,k)}d._template=this;d._transform=this._transform;return d};return a}(),a;(function(a){a[a.ClosePath=1]="ClosePath";a[a.MoveTo=2]="MoveTo";a[a.LineTo=3]="LineTo";a[a.QuadraticCurveTo=4]="QuadraticCurveTo";a[a.BezierCurveTo=5]="BezierCurveTo";a[a.ArcTo=6]="ArcTo";a[a.Rect=7]="Rect";a[a.Arc=8]="Arc";a[a.Save=9]="Save";a[a.Restore=10]="Restore";a[a.Transform=11]="Transform"})(a||(a={}));var h=function(){function e(a){this._commands=new Uint8Array(e._arrayBufferPool.acquire(8),
0,8);this._commandPosition=0;this._data=new Float64Array(e._arrayBufferPool.acquire(8*Float64Array.BYTES_PER_ELEMENT),0,8);this._dataPosition=0;a instanceof e&&this.addPath(a)}e._apply=function(e,d){var b=e._commands,c=e._data,n=0,k=0;d.beginPath();for(var w=e._commandPosition;n<w;)switch(b[n++]){case a.ClosePath:d.closePath();break;case a.MoveTo:d.moveTo(c[k++],c[k++]);break;case a.LineTo:d.lineTo(c[k++],c[k++]);break;case a.QuadraticCurveTo:d.quadraticCurveTo(c[k++],c[k++],c[k++],c[k++]);break;
case a.BezierCurveTo:d.bezierCurveTo(c[k++],c[k++],c[k++],c[k++],c[k++],c[k++]);break;case a.ArcTo:d.arcTo(c[k++],c[k++],c[k++],c[k++],c[k++]);break;case a.Rect:d.rect(c[k++],c[k++],c[k++],c[k++]);break;case a.Arc:d.arc(c[k++],c[k++],c[k++],c[k++],c[k++],!!c[k++]);break;case a.Save:d.save();break;case a.Restore:d.restore();break;case a.Transform:d.transform(c[k++],c[k++],c[k++],c[k++],c[k++],c[k++])}};e.prototype._ensureCommandCapacity=function(a){this._commands=e._arrayBufferPool.ensureUint8ArrayLength(this._commands,
a)};e.prototype._ensureDataCapacity=function(a){this._data=e._arrayBufferPool.ensureFloat64ArrayLength(this._data,a)};e.prototype._writeCommand=function(a){this._commandPosition>=this._commands.length&&this._ensureCommandCapacity(this._commandPosition+1);this._commands[this._commandPosition++]=a};e.prototype._writeData=function(a,e,d,b,c,k){var w=arguments.length;this._dataPosition+w>=this._data.length&&this._ensureDataCapacity(this._dataPosition+w);var I=this._data,t=this._dataPosition;I[t]=a;I[t+
1]=e;2<w&&(I[t+2]=d,I[t+3]=b,4<w&&(I[t+4]=c,6===w&&(I[t+5]=k)));this._dataPosition+=w};e.prototype.closePath=function(){this._writeCommand(a.ClosePath)};e.prototype.moveTo=function(e,d){this._writeCommand(a.MoveTo);this._writeData(e,d)};e.prototype.lineTo=function(e,d){this._writeCommand(a.LineTo);this._writeData(e,d)};e.prototype.quadraticCurveTo=function(e,d,b,c){this._writeCommand(a.QuadraticCurveTo);this._writeData(e,d,b,c)};e.prototype.bezierCurveTo=function(e,d,b,c,n,k){this._writeCommand(a.BezierCurveTo);
this._writeData(e,d,b,c,n,k)};e.prototype.arcTo=function(e,d,b,c,n){this._writeCommand(a.ArcTo);this._writeData(e,d,b,c,n)};e.prototype.rect=function(e,d,b,c){this._writeCommand(a.Rect);this._writeData(e,d,b,c)};e.prototype.arc=function(e,d,b,c,n,k){this._writeCommand(a.Arc);this._writeData(e,d,b,c,n,+k)};e.prototype.addPath=function(e,d){d&&(this._writeCommand(a.Save),this._writeCommand(a.Transform),this._writeData(d.a,d.b,d.c,d.d,d.e,d.f));var b=this._commandPosition+e._commandPosition;b>=this._commands.length&&
this._ensureCommandCapacity(b);for(var c=this._commands,n=e._commands,k=this._commandPosition,w=0;k<b;k++)c[k]=n[w++];this._commandPosition=b;b=this._dataPosition+e._dataPosition;b>=this._data.length&&this._ensureDataCapacity(b);c=this._data;n=e._data;k=this._dataPosition;for(w=0;k<b;k++)c[k]=n[w++];this._dataPosition=b;d&&this._writeCommand(a.Restore)};e._arrayBufferPool=new c.ArrayBufferPool;return e}();g.Path=h;if("undefined"!==typeof CanvasRenderingContext2D&&("undefined"===typeof Path2D||!Path2D.prototype.addPath)){var C=
CanvasRenderingContext2D.prototype.fill;CanvasRenderingContext2D.prototype.fill=function(a,e){arguments.length&&(a instanceof h?h._apply(a,this):e=a);e?C.call(this,e):C.call(this)};var N=CanvasRenderingContext2D.prototype.stroke;CanvasRenderingContext2D.prototype.stroke=function(a,e){arguments.length&&(a instanceof h?h._apply(a,this):e=a);e?N.call(this,e):N.call(this)};var J=CanvasRenderingContext2D.prototype.clip;CanvasRenderingContext2D.prototype.clip=function(a,e){arguments.length&&(a instanceof
h?h._apply(a,this):e=a);e?J.call(this,e):J.call(this)};window.Path2D=h}if("undefined"!==typeof CanvasPattern&&Path2D.prototype.addPath){var D=function(a){this._transform=a;this._template&&(this._template._transform=a)};CanvasPattern.prototype.setTransform||(CanvasPattern.prototype.setTransform=D);CanvasGradient.prototype.setTransform||(CanvasGradient.prototype.setTransform=D);var A=CanvasRenderingContext2D.prototype.fill,d=CanvasRenderingContext2D.prototype.stroke;CanvasRenderingContext2D.prototype.fill=
function(a,e){var d=!!this.fillStyle._transform;if((this.fillStyle instanceof CanvasPattern||this.fillStyle instanceof CanvasGradient)&&d&&a instanceof Path2D){var d=this.fillStyle._transform,b;try{b=d.inverse()}catch(c){b=d=g.Geometry.Matrix.createIdentitySVGMatrix()}this.transform(d.a,d.b,d.c,d.d,d.e,d.f);d=new Path2D;d.addPath(a,b);A.call(this,d,e);this.transform(b.a,b.b,b.c,b.d,b.e,b.f)}else 0===arguments.length?A.call(this):1===arguments.length?A.call(this,a):2===arguments.length&&A.call(this,
a,e)};CanvasRenderingContext2D.prototype.stroke=function(a){var e=!!this.strokeStyle._transform;if((this.strokeStyle instanceof CanvasPattern||this.strokeStyle instanceof CanvasGradient)&&e&&a instanceof Path2D){var e=this.strokeStyle._transform,b;try{b=e.inverse()}catch(c){b=e=g.Geometry.Matrix.createIdentitySVGMatrix()}this.transform(e.a,e.b,e.c,e.d,e.e,e.f);e=new Path2D;e.addPath(a,b);var w=this.lineWidth;this.lineWidth=this.lineWidth*Math.sqrt((b.a+b.c)*(b.a+b.c)+(b.d+b.b)*(b.d+b.b))*Math.SQRT1_2;
d.call(this,e);this.transform(b.a,b.b,b.c,b.d,b.e,b.f);this.lineWidth=w}else 0===arguments.length?d.call(this):1===arguments.length&&d.call(this,a)}}"undefined"!==typeof CanvasRenderingContext2D&&function(){function a(){return g.Geometry.Matrix.createSVGMatrixFromArray(this.mozCurrentTransform)}var e="currentTransform"in CanvasRenderingContext2D.prototype;CanvasRenderingContext2D.prototype.flashStroke=function(a,d){if(e){var b=this.currentTransform,k=new Path2D;k.addPath(a,b);var c=this.lineWidth;
this.setTransform(1,0,0,1,0,0);switch(d){case 1:var w=Math.sqrt((b.a+b.c)*(b.a+b.c)+(b.d+b.b)*(b.d+b.b))*Math.SQRT1_2;this.lineWidth=B(c*w,1,1024);break;case 2:this.lineWidth=B(c*(b.d+b.b),1,1024);break;case 3:this.lineWidth=B(c*(b.a+b.c),1,1024)}this.stroke(k);this.setTransform(b.a,b.b,b.c,b.d,b.e,b.f);this.lineWidth=c}else this.stroke(a)};if(!e)if("mozCurrentTransform"in CanvasRenderingContext2D.prototype)Object.defineProperty(CanvasRenderingContext2D.prototype,"currentTransform",{get:a}),e=!0;
else{var d=CanvasRenderingContext2D.prototype.setTransform;CanvasRenderingContext2D.prototype.setTransform=function(a,e,b,k,c,w){var l=this.currentTransform;l.a=a;l.b=e;l.c=b;l.d=k;l.e=c;l.f=w;d.call(this,a,e,b,k,c,w)};Object.defineProperty(CanvasRenderingContext2D.prototype,"currentTransform",{get:function(){return this._currentTransform||(this._currentTransform=g.Geometry.Matrix.createIdentitySVGMatrix())}})}}();if("undefined"!==typeof CanvasRenderingContext2D&&void 0===CanvasRenderingContext2D.prototype.globalColorMatrix){var e=
CanvasRenderingContext2D.prototype.fill,w=CanvasRenderingContext2D.prototype.stroke,G=CanvasRenderingContext2D.prototype.fillText,F=CanvasRenderingContext2D.prototype.strokeText;Object.defineProperty(CanvasRenderingContext2D.prototype,"globalColorMatrix",{get:function(){return this._globalColorMatrix?this._globalColorMatrix.clone():null},set:function(a){a?this._globalColorMatrix?this._globalColorMatrix.set(a):this._globalColorMatrix=a.clone():this._globalColorMatrix=null},enumerable:!0,configurable:!0});
CanvasRenderingContext2D.prototype.fill=function(a,d){var b=null;this._globalColorMatrix&&(b=this.fillStyle,this.fillStyle=r(this,this.fillStyle,this._globalColorMatrix));0===arguments.length?e.call(this):1===arguments.length?e.call(this,a):2===arguments.length&&e.call(this,a,d);b&&(this.fillStyle=b)};CanvasRenderingContext2D.prototype.stroke=function(a,e){var d=null;this._globalColorMatrix&&(d=this.strokeStyle,this.strokeStyle=r(this,this.strokeStyle,this._globalColorMatrix));0===arguments.length?
w.call(this):1===arguments.length&&w.call(this,a);d&&(this.strokeStyle=d)};CanvasRenderingContext2D.prototype.fillText=function(a,e,d,b){var w=null;this._globalColorMatrix&&(w=this.fillStyle,this.fillStyle=r(this,this.fillStyle,this._globalColorMatrix));3===arguments.length?G.call(this,a,e,d):4===arguments.length?G.call(this,a,e,d,b):c.Debug.unexpected();w&&(this.fillStyle=w)};CanvasRenderingContext2D.prototype.strokeText=function(a,e,d,b){var w=null;this._globalColorMatrix&&(w=this.strokeStyle,this.strokeStyle=
r(this,this.strokeStyle,this._globalColorMatrix));3===arguments.length?F.call(this,a,e,d):4===arguments.length?F.call(this,a,e,d,b):c.Debug.unexpected();w&&(this.strokeStyle=w)}}D=function(){return function(a,e,d,b){this.dataURL=a;this.w=e;this.h=d;this.pixelRatio=b}}();g.ScreenShot=D})(c.GFX||(c.GFX={}));var g=function(){function c(){this._count=0;this._head=this._tail=null}Object.defineProperty(c.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"head",{get:function(){return this._head},enumerable:!0,configurable:!0});c.prototype._unshift=function(c){0===this._count?this._head=this._tail=c:(c.next=this._head,this._head=c.next.previous=c);this._count++};c.prototype._remove=function(c){c===this._head&&c===this._tail?this._head=this._tail=null:c===this._head?(this._head=c.next,this._head.previous=null):c==this._tail?(this._tail=c.previous,this._tail.next=null):(c.previous.next=c.next,c.next.previous=c.previous);c.previous=c.next=null;this._count--};
c.prototype.use=function(c){this._head!==c&&((c.next||c.previous||this._tail===c)&&this._remove(c),this._unshift(c))};c.prototype.pop=function(){if(!this._tail)return null;var c=this._tail;this._remove(c);return c};c.prototype.visit=function(c,g){void 0===g&&(g=!0);for(var v=g?this._head:this._tail;v&&c(v);)v=g?v.next:v.previous};return c}();c.LRUList=g;c.registerFallbackFont=function(){var c=document.styleSheets[0];c.insertRule('@font-face{font-family:AdobeBlank;src:url("data:font/opentype;base64,T1RUTwAKAIAAAwAgQ0ZGIDTeCDQAACFkAAAZPERTSUcAAAABAABKqAAAAAhPUy8yAF+xmwAAARAAAABgY21hcCRDbtEAAAdcAAAZ6GhlYWQFl9tDAAAArAAAADZoaGVhB1oD7wAAAOQAAAAkaG10eAPoAHwAADqgAAAQBm1heHAIAVAAAAABCAAAAAZuYW1lIE0HkgAAAXAAAAXrcG9zdP+4ADIAACFEAAAAIAABAAAAAQuFfcPHtV8PPPUAAwPoAAAAANFMRfMAAAAA0UxF8wB8/4gDbANwAAAAAwACAAAAAAAAAAEAAANw/4gAAAPoAHwAfANsAAEAAAAAAAAAAAAAAAAAAAACAABQAAgBAAAAAwPoAZAABQAAAooCWAAAAEsCigJYAAABXgAyANwAAAAAAAAAAAAAAAD3/67/+9///w/gAD8AAAAAQURCTwBAAAD//wNw/4gAAANwAHhgLwH/AAAAAAAAAAAAAAAgAAAAAAARANIAAQAAAAAAAQALAAAAAQAAAAAAAgAHAAsAAQAAAAAAAwAbABIAAQAAAAAABAALAAAAAQAAAAAABQA6AC0AAQAAAAAABgAKAGcAAwABBAkAAACUAHEAAwABBAkAAQAWAQUAAwABBAkAAgAOARsAAwABBAkAAwA2ASkAAwABBAkABAAWAQUAAwABBAkABQB0AV8AAwABBAkABgAUAdMAAwABBAkACAA0AecAAwABBAkACwA0AhsAAwABBAkADQKWAk8AAwABBAkADgA0BOVBZG9iZSBCbGFua1JlZ3VsYXIxLjA0NTtBREJPO0Fkb2JlQmxhbms7QURPQkVWZXJzaW9uIDEuMDQ1O1BTIDEuMDQ1O2hvdGNvbnYgMS4wLjgyO21ha2VvdGYubGliMi41LjYzNDA2QWRvYmVCbGFuawBDAG8AcAB5AHIAaQBnAGgAdAAgAKkAIAAyADAAMQAzACwAIAAyADAAMQA1ACAAQQBkAG8AYgBlACAAUwB5AHMAdABlAG0AcwAgAEkAbgBjAG8AcgBwAG8AcgBhAHQAZQBkACAAKABoAHQAdABwADoALwAvAHcAdwB3AC4AYQBkAG8AYgBlAC4AYwBvAG0ALwApAC4AQQBkAG8AYgBlACAAQgBsAGEAbgBrAFIAZQBnAHUAbABhAHIAMQAuADAANAA1ADsAQQBEAEIATwA7AEEAZABvAGIAZQBCAGwAYQBuAGsAOwBBAEQATwBCAEUAVgBlAHIAcwBpAG8AbgAgADEALgAwADQANQA7AFAAUwAgADEALgAwADQANQA7AGgAbwB0AGMAbwBuAHYAIAAxAC4AMAAuADgAMgA7AG0AYQBrAGUAbwB0AGYALgBsAGkAYgAyAC4ANQAuADYAMwA0ADAANgBBAGQAbwBiAGUAQgBsAGEAbgBrAEEAZABvAGIAZQAgAFMAeQBzAHQAZQBtAHMAIABJAG4AYwBvAHIAcABvAHIAYQB0AGUAZABoAHQAdABwADoALwAvAHcAdwB3AC4AYQBkAG8AYgBlAC4AYwBvAG0ALwB0AHkAcABlAC8AVABoAGkAcwAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUAIABpAHMAIABsAGkAYwBlAG4AcwBlAGQAIAB1AG4AZABlAHIAIAB0AGgAZQAgAFMASQBMACAATwBwAGUAbgAgAEYAbwBuAHQAIABMAGkAYwBlAG4AcwBlACwAIABWAGUAcgBzAGkAbwBuACAAMQAuADEALgAgAFQAaABpAHMAIABGAG8AbgB0ACAAUwBvAGYAdAB3AGEAcgBlACAAaQBzACAAZABpAHMAdAByAGkAYgB1AHQAZQBkACAAbwBuACAAYQBuACAAIgBBAFMAIABJAFMAIgAgAEIAQQBTAEkAUwAsACAAVwBJAFQASABPAFUAVAAgAFcAQQBSAFIAQQBOAFQASQBFAFMAIABPAFIAIABDAE8ATgBEAEkAVABJAE8ATgBTACAATwBGACAAQQBOAFkAIABLAEkATgBEACwAIABlAGkAdABoAGUAcgAgAGUAeABwAHIAZQBzAHMAIABvAHIAIABpAG0AcABsAGkAZQBkAC4AIABTAGUAZQAgAHQAaABlACAAUwBJAEwAIABPAHAAZQBuACAARgBvAG4AdAAgAEwAaQBjAGUAbgBzAGUAIABmAG8AcgAgAHQAaABlACAAcwBwAGUAYwBpAGYAaQBjACAAbABhAG4AZwB1AGEAZwBlACwAIABwAGUAcgBtAGkAcwBzAGkAbwBuAHMAIABhAG4AZAAgAGwAaQBtAGkAdABhAHQAaQBvAG4AcwAgAGcAbwB2AGUAcgBuAGkAbgBnACAAeQBvAHUAcgAgAHUAcwBlACAAbwBmACAAdABoAGkAcwAgAEYAbwBuAHQAIABTAG8AZgB0AHcAYQByAGUALgBoAHQAdABwADoALwAvAHMAYwByAGkAcAB0AHMALgBzAGkAbAAuAG8AcgBnAC8ATwBGAEwAAAAABQAAAAMAAAA4AAAABAAAAFgAAQAAAAAALAADAAEAAAA4AAMACgAAAFgABgAMAAAAAAABAAAABAAgAAAABAAEAAEAAAf///8AAAAA//8AAQABAAAAAAAMAAAAABmQAAAAAAAAAiAAAAAAAAAH/wAAAAEAAAgAAAAP/wAAAAEAABAAAAAX/wAAAAEAABgAAAAf/wAAAAEAACAAAAAn/wAAAAEAACgAAAAv/wAAAAEAADAAAAA3/wAAAAEAADgAAAA//wAAAAEAAEAAAABH/wAAAAEAAEgAAABP/wAAAAEAAFAAAABX/wAAAAEAAFgAAABf/wAAAAEAAGAAAABn/wAAAAEAAGgAAABv/wAAAAEAAHAAAAB3/wAAAAEAAHgAAAB//wAAAAEAAIAAAACH/wAAAAEAAIgAAACP/wAAAAEAAJAAAACX/wAAAAEAAJgAAACf/wAAAAEAAKAAAACn/wAAAAEAAKgAAACv/wAAAAEAALAAAAC3/wAAAAEAALgAAAC//wAAAAEAAMAAAADH/wAAAAEAAMgAAADP/wAAAAEAANAAAADX/wAAAAEAAOAAAADn/wAAAAEAAOgAAADv/wAAAAEAAPAAAAD3/wAAAAEAAPgAAAD9zwAAAAEAAP3wAAD//QAABfEAAQAAAAEH/wAAAAEAAQgAAAEP/wAAAAEAARAAAAEX/wAAAAEAARgAAAEf/wAAAAEAASAAAAEn/wAAAAEAASgAAAEv/wAAAAEAATAAAAE3/wAAAAEAATgAAAE//wAAAAEAAUAAAAFH/wAAAAEAAUgAAAFP/wAAAAEAAVAAAAFX/wAAAAEAAVgAAAFf/wAAAAEAAWAAAAFn/wAAAAEAAWgAAAFv/wAAAAEAAXAAAAF3/wAAAAEAAXgAAAF//wAAAAEAAYAAAAGH/wAAAAEAAYgAAAGP/wAAAAEAAZAAAAGX/wAAAAEAAZgAAAGf/wAAAAEAAaAAAAGn/wAAAAEAAagAAAGv/wAAAAEAAbAAAAG3/wAAAAEAAbgAAAG//wAAAAEAAcAAAAHH/wAAAAEAAcgAAAHP/wAAAAEAAdAAAAHX/wAAAAEAAdgAAAHf/wAAAAEAAeAAAAHn/wAAAAEAAegAAAHv/wAAAAEAAfAAAAH3/wAAAAEAAfgAAAH//QAAAAEAAgAAAAIH/wAAAAEAAggAAAIP/wAAAAEAAhAAAAIX/wAAAAEAAhgAAAIf/wAAAAEAAiAAAAIn/wAAAAEAAigAAAIv/wAAAAEAAjAAAAI3/wAAAAEAAjgAAAI//wAAAAEAAkAAAAJH/wAAAAEAAkgAAAJP/wAAAAEAAlAAAAJX/wAAAAEAAlgAAAJf/wAAAAEAAmAAAAJn/wAAAAEAAmgAAAJv/wAAAAEAAnAAAAJ3/wAAAAEAAngAAAJ//wAAAAEAAoAAAAKH/wAAAAEAAogAAAKP/wAAAAEAApAAAAKX/wAAAAEAApgAAAKf/wAAAAEAAqAAAAKn/wAAAAEAAqgAAAKv/wAAAAEAArAAAAK3/wAAAAEAArgAAAK//wAAAAEAAsAAAALH/wAAAAEAAsgAAALP/wAAAAEAAtAAAALX/wAAAAEAAtgAAALf/wAAAAEAAuAAAALn/wAAAAEAAugAAALv/wAAAAEAAvAAAAL3/wAAAAEAAvgAAAL//QAAAAEAAwAAAAMH/wAAAAEAAwgAAAMP/wAAAAEAAxAAAAMX/wAAAAEAAxgAAAMf/wAAAAEAAyAAAAMn/wAAAAEAAygAAAMv/wAAAAEAAzAAAAM3/wAAAAEAAzgAAAM//wAAAAEAA0AAAANH/wAAAAEAA0gAAANP/wAAAAEAA1AAAANX/wAAAAEAA1gAAANf/wAAAAEAA2AAAANn/wAAAAEAA2gAAANv/wAAAAEAA3AAAAN3/wAAAAEAA3gAAAN//wAAAAEAA4AAAAOH/wAAAAEAA4gAAAOP/wAAAAEAA5AAAAOX/wAAAAEAA5gAAAOf/wAAAAEAA6AAAAOn/wAAAAEAA6gAAAOv/wAAAAEAA7AAAAO3/wAAAAEAA7gAAAO//wAAAAEAA8AAAAPH/wAAAAEAA8gAAAPP/wAAAAEAA9AAAAPX/wAAAAEAA9gAAAPf/wAAAAEAA+AAAAPn/wAAAAEAA+gAAAPv/wAAAAEAA/AAAAP3/wAAAAEAA/gAAAP//QAAAAEABAAAAAQH/wAAAAEABAgAAAQP/wAAAAEABBAAAAQX/wAAAAEABBgAAAQf/wAAAAEABCAAAAQn/wAAAAEABCgAAAQv/wAAAAEABDAAAAQ3/wAAAAEABDgAAAQ//wAAAAEABEAAAARH/wAAAAEABEgAAARP/wAAAAEABFAAAARX/wAAAAEABFgAAARf/wAAAAEABGAAAARn/wAAAAEABGgAAARv/wAAAAEABHAAAAR3/wAAAAEABHgAAAR//wAAAAEABIAAAASH/wAAAAEABIgAAASP/wAAAAEABJAAAASX/wAAAAEABJgAAASf/wAAAAEABKAAAASn/wAAAAEABKgAAASv/wAAAAEABLAAAAS3/wAAAAEABLgAAAS//wAAAAEABMAAAATH/wAAAAEABMgAAATP/wAAAAEABNAAAATX/wAAAAEABNgAAATf/wAAAAEABOAAAATn/wAAAAEABOgAAATv/wAAAAEABPAAAAT3/wAAAAEABPgAAAT//QAAAAEABQAAAAUH/wAAAAEABQgAAAUP/wAAAAEABRAAAAUX/wAAAAEABRgAAAUf/wAAAAEABSAAAAUn/wAAAAEABSgAAAUv/wAAAAEABTAAAAU3/wAAAAEABTgAAAU//wAAAAEABUAAAAVH/wAAAAEABUgAAAVP/wAAAAEABVAAAAVX/wAAAAEABVgAAAVf/wAAAAEABWAAAAVn/wAAAAEABWgAAAVv/wAAAAEABXAAAAV3/wAAAAEABXgAAAV//wAAAAEABYAAAAWH/wAAAAEABYgAAAWP/wAAAAEABZAAAAWX/wAAAAEABZgAAAWf/wAAAAEABaAAAAWn/wAAAAEABagAAAWv/wAAAAEABbAAAAW3/wAAAAEABbgAAAW//wAAAAEABcAAAAXH/wAAAAEABcgAAAXP/wAAAAEABdAAAAXX/wAAAAEABdgAAAXf/wAAAAEABeAAAAXn/wAAAAEABegAAAXv/wAAAAEABfAAAAX3/wAAAAEABfgAAAX//QAAAAEABgAAAAYH/wAAAAEABggAAAYP/wAAAAEABhAAAAYX/wAAAAEABhgAAAYf/wAAAAEABiAAAAYn/wAAAAEABigAAAYv/wAAAAEABjAAAAY3/wAAAAEABjgAAAY//wAAAAEABkAAAAZH/wAAAAEABkgAAAZP/wAAAAEABlAAAAZX/wAAAAEABlgAAAZf/wAAAAEABmAAAAZn/wAAAAEABmgAAAZv/wAAAAEABnAAAAZ3/wAAAAEABngAAAZ//wAAAAEABoAAAAaH/wAAAAEABogAAAaP/wAAAAEABpAAAAaX/wAAAAEABpgAAAaf/wAAAAEABqAAAAan/wAAAAEABqgAAAav/wAAAAEABrAAAAa3/wAAAAEABrgAAAa//wAAAAEABsAAAAbH/wAAAAEABsgAAAbP/wAAAAEABtAAAAbX/wAAAAEABtgAAAbf/wAAAAEABuAAAAbn/wAAAAEABugAAAbv/wAAAAEABvAAAAb3/wAAAAEABvgAAAb//QAAAAEABwAAAAcH/wAAAAEABwgAAAcP/wAAAAEABxAAAAcX/wAAAAEABxgAAAcf/wAAAAEAByAAAAcn/wAAAAEABygAAAcv/wAAAAEABzAAAAc3/wAAAAEABzgAAAc//wAAAAEAB0AAAAdH/wAAAAEAB0gAAAdP/wAAAAEAB1AAAAdX/wAAAAEAB1gAAAdf/wAAAAEAB2AAAAdn/wAAAAEAB2gAAAdv/wAAAAEAB3AAAAd3/wAAAAEAB3gAAAd//wAAAAEAB4AAAAeH/wAAAAEAB4gAAAeP/wAAAAEAB5AAAAeX/wAAAAEAB5gAAAef/wAAAAEAB6AAAAen/wAAAAEAB6gAAAev/wAAAAEAB7AAAAe3/wAAAAEAB7gAAAe//wAAAAEAB8AAAAfH/wAAAAEAB8gAAAfP/wAAAAEAB9AAAAfX/wAAAAEAB9gAAAff/wAAAAEAB+AAAAfn/wAAAAEAB+gAAAfv/wAAAAEAB/AAAAf3/wAAAAEAB/gAAAf//QAAAAEACAAAAAgH/wAAAAEACAgAAAgP/wAAAAEACBAAAAgX/wAAAAEACBgAAAgf/wAAAAEACCAAAAgn/wAAAAEACCgAAAgv/wAAAAEACDAAAAg3/wAAAAEACDgAAAg//wAAAAEACEAAAAhH/wAAAAEACEgAAAhP/wAAAAEACFAAAAhX/wAAAAEACFgAAAhf/wAAAAEACGAAAAhn/wAAAAEACGgAAAhv/wAAAAEACHAAAAh3/wAAAAEACHgAAAh//wAAAAEACIAAAAiH/wAAAAEACIgAAAiP/wAAAAEACJAAAAiX/wAAAAEACJgAAAif/wAAAAEACKAAAAin/wAAAAEACKgAAAiv/wAAAAEACLAAAAi3/wAAAAEACLgAAAi//wAAAAEACMAAAAjH/wAAAAEACMgAAAjP/wAAAAEACNAAAAjX/wAAAAEACNgAAAjf/wAAAAEACOAAAAjn/wAAAAEACOgAAAjv/wAAAAEACPAAAAj3/wAAAAEACPgAAAj//QAAAAEACQAAAAkH/wAAAAEACQgAAAkP/wAAAAEACRAAAAkX/wAAAAEACRgAAAkf/wAAAAEACSAAAAkn/wAAAAEACSgAAAkv/wAAAAEACTAAAAk3/wAAAAEACTgAAAk//wAAAAEACUAAAAlH/wAAAAEACUgAAAlP/wAAAAEACVAAAAlX/wAAAAEACVgAAAlf/wAAAAEACWAAAAln/wAAAAEACWgAAAlv/wAAAAEACXAAAAl3/wAAAAEACXgAAAl//wAAAAEACYAAAAmH/wAAAAEACYgAAAmP/wAAAAEACZAAAAmX/wAAAAEACZgAAAmf/wAAAAEACaAAAAmn/wAAAAEACagAAAmv/wAAAAEACbAAAAm3/wAAAAEACbgAAAm//wAAAAEACcAAAAnH/wAAAAEACcgAAAnP/wAAAAEACdAAAAnX/wAAAAEACdgAAAnf/wAAAAEACeAAAAnn/wAAAAEACegAAAnv/wAAAAEACfAAAAn3/wAAAAEACfgAAAn//QAAAAEACgAAAAoH/wAAAAEACggAAAoP/wAAAAEAChAAAAoX/wAAAAEAChgAAAof/wAAAAEACiAAAAon/wAAAAEACigAAAov/wAAAAEACjAAAAo3/wAAAAEACjgAAAo//wAAAAEACkAAAApH/wAAAAEACkgAAApP/wAAAAEAClAAAApX/wAAAAEAClgAAApf/wAAAAEACmAAAApn/wAAAAEACmgAAApv/wAAAAEACnAAAAp3/wAAAAEACngAAAp//wAAAAEACoAAAAqH/wAAAAEACogAAAqP/wAAAAEACpAAAAqX/wAAAAEACpgAAAqf/wAAAAEACqAAAAqn/wAAAAEACqgAAAqv/wAAAAEACrAAAAq3/wAAAAEACrgAAAq//wAAAAEACsAAAArH/wAAAAEACsgAAArP/wAAAAEACtAAAArX/wAAAAEACtgAAArf/wAAAAEACuAAAArn/wAAAAEACugAAArv/wAAAAEACvAAAAr3/wAAAAEACvgAAAr//QAAAAEACwAAAAsH/wAAAAEACwgAAAsP/wAAAAEACxAAAAsX/wAAAAEACxgAAAsf/wAAAAEACyAAAAsn/wAAAAEACygAAAsv/wAAAAEACzAAAAs3/wAAAAEACzgAAAs//wAAAAEAC0AAAAtH/wAAAAEAC0gAAAtP/wAAAAEAC1AAAAtX/wAAAAEAC1gAAAtf/wAAAAEAC2AAAAtn/wAAAAEAC2gAAAtv/wAAAAEAC3AAAAt3/wAAAAEAC3gAAAt//wAAAAEAC4AAAAuH/wAAAAEAC4gAAAuP/wAAAAEAC5AAAAuX/wAAAAEAC5gAAAuf/wAAAAEAC6AAAAun/wAAAAEAC6gAAAuv/wAAAAEAC7AAAAu3/wAAAAEAC7gAAAu//wAAAAEAC8AAAAvH/wAAAAEAC8gAAAvP/wAAAAEAC9AAAAvX/wAAAAEAC9gAAAvf/wAAAAEAC+AAAAvn/wAAAAEAC+gAAAvv/wAAAAEAC/AAAAv3/wAAAAEAC/gAAAv//QAAAAEADAAAAAwH/wAAAAEADAgAAAwP/wAAAAEADBAAAAwX/wAAAAEADBgAAAwf/wAAAAEADCAAAAwn/wAAAAEADCgAAAwv/wAAAAEADDAAAAw3/wAAAAEADDgAAAw//wAAAAEADEAAAAxH/wAAAAEADEgAAAxP/wAAAAEADFAAAAxX/wAAAAEADFgAAAxf/wAAAAEADGAAAAxn/wAAAAEADGgAAAxv/wAAAAEADHAAAAx3/wAAAAEADHgAAAx//wAAAAEADIAAAAyH/wAAAAEADIgAAAyP/wAAAAEADJAAAAyX/wAAAAEADJgAAAyf/wAAAAEADKAAAAyn/wAAAAEADKgAAAyv/wAAAAEADLAAAAy3/wAAAAEADLgAAAy//wAAAAEADMAAAAzH/wAAAAEADMgAAAzP/wAAAAEADNAAAAzX/wAAAAEADNgAAAzf/wAAAAEADOAAAAzn/wAAAAEADOgAAAzv/wAAAAEADPAAAAz3/wAAAAEADPgAAAz//QAAAAEADQAAAA0H/wAAAAEADQgAAA0P/wAAAAEADRAAAA0X/wAAAAEADRgAAA0f/wAAAAEADSAAAA0n/wAAAAEADSgAAA0v/wAAAAEADTAAAA03/wAAAAEADTgAAA0//wAAAAEADUAAAA1H/wAAAAEADUgAAA1P/wAAAAEADVAAAA1X/wAAAAEADVgAAA1f/wAAAAEADWAAAA1n/wAAAAEADWgAAA1v/wAAAAEADXAAAA13/wAAAAEADXgAAA1//wAAAAEADYAAAA2H/wAAAAEADYgAAA2P/wAAAAEADZAAAA2X/wAAAAEADZgAAA2f/wAAAAEADaAAAA2n/wAAAAEADagAAA2v/wAAAAEADbAAAA23/wAAAAEADbgAAA2//wAAAAEADcAAAA3H/wAAAAEADcgAAA3P/wAAAAEADdAAAA3X/wAAAAEADdgAAA3f/wAAAAEADeAAAA3n/wAAAAEADegAAA3v/wAAAAEADfAAAA33/wAAAAEADfgAAA3//QAAAAEADgAAAA4H/wAAAAEADggAAA4P/wAAAAEADhAAAA4X/wAAAAEADhgAAA4f/wAAAAEADiAAAA4n/wAAAAEADigAAA4v/wAAAAEADjAAAA43/wAAAAEADjgAAA4//wAAAAEADkAAAA5H/wAAAAEADkgAAA5P/wAAAAEADlAAAA5X/wAAAAEADlgAAA5f/wAAAAEADmAAAA5n/wAAAAEADmgAAA5v/wAAAAEADnAAAA53/wAAAAEADngAAA5//wAAAAEADoAAAA6H/wAAAAEADogAAA6P/wAAAAEADpAAAA6X/wAAAAEADpgAAA6f/wAAAAEADqAAAA6n/wAAAAEADqgAAA6v/wAAAAEADrAAAA63/wAAAAEADrgAAA6//wAAAAEADsAAAA7H/wAAAAEADsgAAA7P/wAAAAEADtAAAA7X/wAAAAEADtgAAA7f/wAAAAEADuAAAA7n/wAAAAEADugAAA7v/wAAAAEADvAAAA73/wAAAAEADvgAAA7//QAAAAEADwAAAA8H/wAAAAEADwgAAA8P/wAAAAEADxAAAA8X/wAAAAEADxgAAA8f/wAAAAEADyAAAA8n/wAAAAEADygAAA8v/wAAAAEADzAAAA83/wAAAAEADzgAAA8//wAAAAEAD0AAAA9H/wAAAAEAD0gAAA9P/wAAAAEAD1AAAA9X/wAAAAEAD1gAAA9f/wAAAAEAD2AAAA9n/wAAAAEAD2gAAA9v/wAAAAEAD3AAAA93/wAAAAEAD3gAAA9//wAAAAEAD4AAAA+H/wAAAAEAD4gAAA+P/wAAAAEAD5AAAA+X/wAAAAEAD5gAAA+f/wAAAAEAD6AAAA+n/wAAAAEAD6gAAA+v/wAAAAEAD7AAAA+3/wAAAAEAD7gAAA+//wAAAAEAD8AAAA/H/wAAAAEAD8gAAA/P/wAAAAEAD9AAAA/X/wAAAAEAD9gAAA/f/wAAAAEAD+AAAA/n/wAAAAEAD+gAAA/v/wAAAAEAD/AAAA/3/wAAAAEAD/gAAA///QAAAAEAEAAAABAH/wAAAAEAEAgAABAP/wAAAAEAEBAAABAX/wAAAAEAEBgAABAf/wAAAAEAECAAABAn/wAAAAEAECgAABAv/wAAAAEAEDAAABA3/wAAAAEAEDgAABA//wAAAAEAEEAAABBH/wAAAAEAEEgAABBP/wAAAAEAEFAAABBX/wAAAAEAEFgAABBf/wAAAAEAEGAAABBn/wAAAAEAEGgAABBv/wAAAAEAEHAAABB3/wAAAAEAEHgAABB//wAAAAEAEIAAABCH/wAAAAEAEIgAABCP/wAAAAEAEJAAABCX/wAAAAEAEJgAABCf/wAAAAEAEKAAABCn/wAAAAEAEKgAABCv/wAAAAEAELAAABC3/wAAAAEAELgAABC//wAAAAEAEMAAABDH/wAAAAEAEMgAABDP/wAAAAEAENAAABDX/wAAAAEAENgAABDf/wAAAAEAEOAAABDn/wAAAAEAEOgAABDv/wAAAAEAEPAAABD3/wAAAAEAEPgAABD//QAAAAEAAwAAAAAAAP+1ADIAAAAAAAAAAAAAAAAAAAAAAAAAAAEABAIAAQEBC0Fkb2JlQmxhbmsAAQEBMPgb+ByLDB74HQH4HgKL+wz6APoEBR4aBF8MHxwIAQwi91UP92IR91oMJRwZHwwkAAUBAQYOVmFwQWRvYmVJZGVudGl0eUNvcHlyaWdodCAyMDEzLCAyMDE1IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkIChodHRwOi8vd3d3LmFkb2JlLmNvbS8pLkFkb2JlIEJsYW5rQWRvYmVCbGFuay0yMDQ5AAACAAEH/wMAAQAAAAgBCAECAAEASwBMAE0ATgBPAFAAUQBSAFMAVABVAFYAVwBYAFkAWgBbAFwAXQBeAF8AYABhAGIAYwBkAGUAZgBnAGgAaQBqAGsAbABtAG4AbwBwAHEAcgBzAHQAdQB2AHcAeAB5AHoAewB8AH0AfgB/AIAAgQCCAIMAhACFAIYAhwCIAIkAigCLAIwAjQCOAI8AkACRAJIAkwCUAJUAlgCXAJgAmQCaAJsAnACdAJ4AnwCgAKEAogCjAKQApQCmAKcAqACpAKoAqwCsAK0ArgCvALAAsQCyALMAtAC1ALYAtwC4ALkAugC7ALwAvQC+AL8AwADBAMIAwwDEAMUAxgDHAMgAyQDKAMsAzADNAM4AzwDQANEA0gDTANQA1QDWANcA2ADZANoA2wDcAN0A3gDfAOAA4QDiAOMA5ADlAOYA5wDoAOkA6gDrAOwA7QDuAO8A8ADxAPIA8wD0APUA9gD3APgA+QD6APsA/AD9AP4A/wEAAQEBAgEDAQQBBQEGAQcBCAEJAQoBCwEMAQ0BDgEPARABEQESARMBFAEVARYBFwEYARkBGgEbARwBHQEeAR8BIAEhASIBIwEkASUBJgEnASgBKQEqASsBLAEtAS4BLwEwATEBMgEzATQBNQE2ATcBOAE5AToBOwE8AT0BPgE/AUABQQFCAUMBRAFFAUYBRwFIAUkBSgFLAUwBTQFOAU8BUAFRAVIBUwFUAVUBVgFXAVgBWQFaAVsBXAFdAV4BXwFgAWEBYgFjAWQBZQFmAWcBaAFpAWoBawFsAW0BbgFvAXABcQFyAXMBdAF1AXYBdwF4AXkBegF7AXwBfQF+AX8BgAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcoBywHMAc0BzgHPAdAB0QHSAdMB1AHVAdYB1wHYAdkB2gHbAdwB3QHeAd8B4AHhAeIB4wHkAeUB5gHnAegB6QHqAesB7AHtAe4B7wHwAfEB8gHzAfQB9QH2AfcB+AH5AfoB+wH8Af0B/gH/AgACAQICAgMCBAIFAgYCBwIIAgkCCgILAgwCDQIOAg8CEAIRAhICEwIUAhUCFgIXAhgCGQIaAhsCHAIdAh4CHwIgAiECIgIjAiQCJQImAicCKAIpAioCKwIsAi0CLgIvAjACMQIyAjMCNAI1AjYCNwI4AjkCOgI7AjwCPQI+Aj8CQAJBAkICQwJEAkUCRgJHAkgCSQJKAksCTAJNAk4CTwJQAlECUgJTAlQCVQJWAlcCWAJZAloCWwJcAl0CXgJfAmACYQJiAmMCZAJlAmYCZwJoAmkCagJrAmwCbQJuAm8CcAJxAnICcwJ0AnUCdgJ3AngCeQJ6AnsCfAJ9An4CfwKAAoECggKDAoQChQKGAocCiAKJAooCiwKMAo0CjgKPApACkQKSApMClAKVApYClwKYApkCmgKbApwCnQKeAp8CoAKhAqICowKkAqUCpgKnAqgCqQKqAqsCrAKtAq4CrwKwArECsgKzArQCtQK2ArcCuAK5AroCuwK8Ar0CvgK/AsACwQLCAsMCxALFAsYCxwLIAskCygLLAswCzQLOAs8C0ALRAtIC0wLUAtUC1gLXAtgC2QLaAtsC3ALdAt4C3wLgAuEC4gLjAuQC5QLmAucC6ALpAuoC6wLsAu0C7gLvAvAC8QLyAvMC9AL1AvYC9wL4AvkC+gL7AvwC/QL+Av8DAAMBAwIDAwMEAwUDBgMHAwgDCQMKAwsDDAMNAw4DDwMQAxEDEgMTAxQDFQMWAxcDGAMZAxoDGwMcAx0DHgMfAyADIQMiAyMDJAMlAyYDJwMoAykDKgMrAywDLQMuAy8DMAMxAzIDMwM0AzUDNgM3AzgDOQM6AzsDPAM9Az4DPwNAA0EDQgNDA0QDRQNGA0cDSANJA0oDSwNMA00DTgNPA1ADUQNSA1MDVANVA1YDVwNYA1kDWgNbA1wDXQNeA18DYANhA2IDYwNkA2UDZgNnA2gDaQNqA2sDbANtA24DbwNwA3EDcgNzA3QDdQN2A3cDeAN5A3oDewN8A30DfgN/A4ADgQOCA4MDhAOFA4YDhwOIA4kDigOLA4wDjQOOA48DkAORA5IDkwOUA5UDlgOXA5gDmQOaA5sDnAOdA54DnwOgA6EDogOjA6QDpQOmA6cDqAOpA6oDqwOsA60DrgOvA7ADsQOyA7MDtAO1A7YDtwO4A7kDugO7A7wDvQO+A78DwAPBA8IDwwPEA8UDxgPHA8gDyQPKA8sDzAPNA84DzwPQA9ED0gPTA9QD1QPWA9cD2APZA9oD2wPcA90D3gPfA+AD4QPiA+MD5APlA+YD5wPoA+kD6gPrA+wD7QPuA+8D8APxA/ID8wP0A/UD9gP3A/gD+QP6A/sD/AP9A/4D/wQABAEEAgQDBAQEBQQGBAcECAQJBAoECwQMBA0EDgQPBBAEEQQSBBMEFAQVBBYEFwQYBBkEGgQbBBwEHQQeBB8EIAQhBCIEIwQkBCUEJgQnBCgEKQQqBCsELAQtBC4ELwQwBDEEMgQzBDQENQQ2BDcEOAQ5BDoEOwQ8BD0EPgQ/BEAEQQRCBEMERARFBEYERwRIBEkESgRLBEwETQROBE8EUARRBFIEUwRUBFUEVgRXBFgEWQRaBFsEXARdBF4EXwRgBGEEYgRjBGQEZQRmBGcEaARpBGoEawRsBG0EbgRvBHAEcQRyBHMEdAR1BHYEdwR4BHkEegR7BHwEfQR+BH8EgASBBIIEgwSEBIUEhgSHBIgEiQSKBIsEjASNBI4EjwSQBJEEkgSTBJQElQSWBJcEmASZBJoEmwScBJ0EngSfBKAEoQSiBKMEpASlBKYEpwSoBKkEqgSrBKwErQSuBK8EsASxBLIEswS0BLUEtgS3BLgEuQS6BLsEvAS9BL4EvwTABMEEwgTDBMQExQTGBMcEyATJBMoEywTMBM0EzgTPBNAE0QTSBNME1ATVBNYE1wTYBNkE2gTbBNwE3QTeBN8E4AThBOIE4wTkBOUE5gTnBOgE6QTqBOsE7ATtBO4E7wTwBPEE8gTzBPQE9QT2BPcE+AT5BPoE+wT8BP0E/gT/BQAFAQUCBQMFBAUFBQYFBwUIBQkFCgULBQwFDQUOBQ8FEAURBRIFEwUUBRUFFgUXBRgFGQUaBRsFHAUdBR4FHwUgBSEFIgUjBSQFJQUmBScFKAUpBSoFKwUsBS0FLgUvBTAFMQUyBTMFNAU1BTYFNwU4BTkFOgU7BTwFPQU+BT8FQAVBBUIFQwVEBUUFRgVHBUgFSQVKBUsFTAVNBU4FTwVQBVEFUgVTBVQFVQVWBVcFWAVZBVoFWwVcBV0FXgVfBWAFYQViBWMFZAVlBWYFZwVoBWkFagVrBWwFbQVuBW8FcAVxBXIFcwV0BXUFdgV3BXgFeQV6BXsFfAV9BX4FfwWABYEFggWDBYQFhQWGBYcFiAWJBYoFiwWMBY0FjgWPBZAFkQWSBZMFlAWVBZYFlwWYBZkFmgWbBZwFnQWeBZ8FoAWhBaIFowWkBaUFpgWnBagFqQWqBasFrAWtBa4FrwWwBbEFsgWzBbQFtQW2BbcFuAW5BboFuwW8Bb0FvgW/BcAFwQXCBcMFxAXFBcYFxwXIBckFygXLBcwFzQXOBc8F0AXRBdIF0wXUBdUF1gXXBdgF2QXaBdsF3AXdBd4F3wXgBeEF4gXjBeQF5QXmBecF6AXpBeoF6wXsBe0F7gXvBfAF8QXyBfMF9AX1BfYF9wX4BfkF+gX7BfwF/QX+Bf8GAAYBBgIGAwYEBgUGBgYHBggGCQYKBgsGDAYNBg4GDwYQBhEGEgYTBhQGFQYWBhcGGAYZBhoGGwYcBh0GHgYfBiAGIQYiBiMGJAYlBiYGJwYoBikGKgYrBiwGLQYuBi8GMAYxBjIGMwY0BjUGNgY3BjgGOQY6BjsGPAY9Bj4GPwZABkEGQgZDBkQGRQZGBkcGSAZJBkoGSwZMBk0GTgZPBlAGUQZSBlMGVAZVBlYGVwZYBlkGWgZbBlwGXQZeBl8GYAZhBmIGYwZkBmUGZgZnBmgGaQZqBmsGbAZtBm4GbwZwBnEGcgZzBnQGdQZ2BncGeAZ5BnoGewZ8Bn0GfgZ/BoAGgQaCBoMGhAaFBoYGhwaIBokGigaLBowGjQaOBo8GkAaRBpIGkwaUBpUGlgaXBpgGmQaaBpsGnAadBp4GnwagBqEGogajBqQGpQamBqcGqAapBqoGqwasBq0GrgavBrAGsQayBrMGtAa1BrYGtwa4BrkGuga7BrwGvQa+Br8GwAbBBsIGwwbEBsUGxgbHBsgGyQbKBssGzAbNBs4GzwbQBtEG0gbTBtQG1QbWBtcG2AbZBtoG2wbcBt0G3gbfBuAG4QbiBuMG5AblBuYG5wboBukG6gbrBuwG7QbuBu8G8AbxBvIG8wb0BvUG9gb3BvgG+Qb6BvsG/Ab9Bv4G/wcABwEHAgcDBwQHBQcGBwcHCAcJBwoHCwcMBw0HDgcPBxAHEQcSBxMHFAcVBxYHFwcYBxkHGgcbBxwHHQceBx8HIAchByIHIwckByUHJgcnBygHKQcqBysHLActBy4HLwcwBzEHMgczBzQHNQc2BzcHOAc5BzoHOwc8Bz0HPgc/B0AHQQdCB0MHRAdFB0YHRwdIB0kHSgdLB0wHTQdOB08HUAdRB1IHUwdUB1UHVgdXB1gHWQdaB1sHXAddB14HXwdgB2EHYgdjB2QHZQdmB2cHaAdpB2oHawdsB20HbgdvB3AHcQdyB3MHdAd1B3YHdwd4B3kHegd7B3wHfQd+B38HgAeBB4IHgweEB4UHhgeHB4gHiQeKB4sHjAeNB44HjweQB5EHkgeTB5QHlQeWB5cHmAeZB5oHmwecB50HngefB6AHoQeiB6MHpAelB6YHpweoB6kHqgerB6wHrQeuB68HsAexB7IHswe0B7UHtge3B7gHuQe6B7sHvAe9B74HvwfAB8EHwgfDB8QHxQfGB8cHyAfJB8oHywfMB80HzgfPB9AH0QfSB9MH1AfVB9YH1wfYB9kH2gfbB9wH3QfeB98H4AfhB+IH4wfkB+UH5gfnB+gH6QfqB+sH7AftB+4H7wfwB/EH8gfzB/QH9Qf2B/cH+Af5B/oH+wf8B/0H/gf/CAAIAQgCCAMIBAgFCAYIBwgICAkICggLCAwIDQgOCA8IEAgRCBIIEwgUCBUIFggXCBgIGQgaCBsIHAgdCB4IHwggCCEIIggjCCQIJQgmCCcIKAgpCCoIKwgsCC0ILggvCDAIMQgyCDMINAg1CDYINwg4CDkIOgg7CDwIPQg+CD8IQAhBCEIIQwhECEUIRghHCEgISQhKCEsg+wy3+iS3AfcQt/kstwP3EPoEFf58+YT6fAf9WP4nFfnSB/fF/DMFprAV+8X4NwX49gamYhX90gf7xfgzBXBmFffF/DcF/PYGDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OAAEBAQr4HwwmmhwZLRL7joscBUaLBr0KvQv65xUD6AB8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAA==");}',
c.cssRules.length)};(function(g){var r=c.Options.Option,B=c.Options.OptionSet,v=c.Settings.shumwayOptions,H=v.register(new B("Renderer Options"));g.imageUpdateOption=H.register(new r("","imageUpdate","boolean",!0,"Enable image updating."));g.imageConvertOption=H.register(new r("","imageConvert","boolean",!0,"Enable image conversion."));g.stageOptions=v.register(new B("Stage Renderer Options"));g.forcePaint=g.stageOptions.register(new r("","forcePaint","boolean",!1,"Force repainting."));g.ignoreViewport=
g.stageOptions.register(new r("","ignoreViewport","boolean",!1,"Cull elements outside of the viewport."));g.viewportLoupeDiameter=g.stageOptions.register(new r("","viewportLoupeDiameter","number",256,"Size of the viewport loupe.",{range:{min:1,max:1024,step:1}}));g.disableClipping=g.stageOptions.register(new r("","disableClipping","boolean",!1,"Disable clipping."));g.debugClipping=g.stageOptions.register(new r("","debugClipping","boolean",!1,"Disable clipping."));g.hud=g.stageOptions.register(new r("",
"hud","boolean",!1,"Enable HUD."));B=g.stageOptions.register(new B("Canvas2D Options"));g.clipDirtyRegions=B.register(new r("","clipDirtyRegions","boolean",!1,"Clip dirty regions."));g.clipCanvas=B.register(new r("","clipCanvas","boolean",!1,"Clip Regions."));g.cull=B.register(new r("","cull","boolean",!1,"Enable culling."));g.snapToDevicePixels=B.register(new r("","snapToDevicePixels","boolean",!1,""));g.imageSmoothing=B.register(new r("","imageSmoothing","boolean",!1,""));g.masking=B.register(new r("",
"masking","boolean",!0,"Composite Mask."));g.blending=B.register(new r("","blending","boolean",!0,""));g.debugLayers=B.register(new r("","debugLayers","boolean",!1,""));g.filters=B.register(new r("","filters","boolean",!0,""));g.cacheShapes=B.register(new r("","cacheShapes","boolean",!0,""));g.cacheShapesMaxSize=B.register(new r("","cacheShapesMaxSize","number",256,"",{range:{min:1,max:1024,step:1}}));g.cacheShapesThreshold=B.register(new r("","cacheShapesThreshold","number",256,"",{range:{min:1,
max:1024,step:1}}));(function(r){function p(a,e,b,c){var f=1-c;return a*f*f+2*e*f*c+b*c*c}function b(a,e,b,c,f){var t=f*f,l=1-f,g=l*l;return a*l*g+3*e*f*g+3*b*l*t+c*f*t}var m=c.NumberUtilities.clamp,u=c.NumberUtilities.pow2,f=c.NumberUtilities.epsilonEquals;r.radianToDegrees=function(a){return 180*a/Math.PI};r.degreesToRadian=function(a){return a*Math.PI/180};r.quadraticBezier=p;r.quadraticBezierExtreme=function(a,e,b){var c=(a-e)/(a-2*e+b);return 0>c?a:1<c?b:p(a,e,b,c)};r.cubicBezier=b;r.cubicBezierExtremes=
function(a,e,c,f){var g=e-a,t;t=2*(c-e);var l=f-c;g+l===t&&(l*=1.0001);var h=2*g-t,y=t-2*g,y=Math.sqrt(y*y-4*g*(g-t+l));t=2*(g-t+l);g=(h+y)/t;h=(h-y)/t;y=[];0<=g&&1>=g&&y.push(b(a,e,c,f,g));0<=h&&1>=h&&y.push(b(a,e,c,f,h));return y};var a=function(){function a(e,d){this.x=e;this.y=d}a.prototype.setElements=function(a,d){this.x=a;this.y=d;return this};a.prototype.set=function(a){this.x=a.x;this.y=a.y;return this};a.prototype.dot=function(a){return this.x*a.x+this.y*a.y};a.prototype.squaredLength=function(){return this.dot(this)};
a.prototype.distanceTo=function(a){return Math.sqrt(this.dot(a))};a.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};a.prototype.mul=function(a){this.x*=a;this.y*=a;return this};a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.toString=function(a){void 0===a&&(a=2);return"{x: "+this.x.toFixed(a)+", y: "+this.y.toFixed(a)+"}"};a.prototype.inTriangle=function(a,d,b){var c=a.y*b.x-a.x*b.y+(b.y-a.y)*this.x+(a.x-b.x)*this.y,f=a.x*d.y-a.y*d.x+(a.y-d.y)*this.x+(d.x-a.x)*
this.y;if(0>c!=0>f)return!1;a=-d.y*b.x+a.y*(b.x-d.x)+a.x*(d.y-b.y)+d.x*b.y;0>a&&(c=-c,f=-f,a=-a);return 0<c&&0<f&&c+f<a};a.createEmpty=function(){return new a(0,0)};a.createEmptyPoints=function(e){for(var b=[],c=0;c<e;c++)b.push(new a(0,0));return b};return a}();r.Point=a;var h=function(){function a(e,d,b){this.x=e;this.y=d;this.z=b}a.prototype.setElements=function(a,d,b){this.x=a;this.y=d;this.z=b;return this};a.prototype.set=function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this};a.prototype.dot=
function(a){return this.x*a.x+this.y*a.y+this.z*a.z};a.prototype.cross=function(a){var d=this.z*a.x-this.x*a.z,b=this.x*a.y-this.y*a.x;this.x=this.y*a.z-this.z*a.y;this.y=d;this.z=b;return this};a.prototype.squaredLength=function(){return this.dot(this)};a.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};a.prototype.mul=function(a){this.x*=a;this.y*=a;this.z*=a;return this};a.prototype.normalize=function(){var a=Math.sqrt(this.squaredLength());1E-5<a?this.mul(1/a):this.setElements(0,
0,0);return this};a.prototype.clone=function(){return new a(this.x,this.y,this.z)};a.prototype.toString=function(a){void 0===a&&(a=2);return"{x: "+this.x.toFixed(a)+", y: "+this.y.toFixed(a)+", z: "+this.z.toFixed(a)+"}"};a.createEmpty=function(){return new a(0,0,0)};a.createEmptyPoints=function(e){for(var b=[],c=0;c<e;c++)b.push(new a(0,0,0));return b};return a}();r.Point3D=h;var v=function(){function d(a,b,c,f){this.setElements(a,b,c,f);d.allocationCount++}d.prototype.setElements=function(a,d,b,
c){this.x=a;this.y=d;this.w=b;this.h=c};d.prototype.set=function(a){this.x=a.x;this.y=a.y;this.w=a.w;this.h=a.h};d.prototype.contains=function(a){var d=a.x+a.w,b=a.y+a.h,c=this.x+this.w,f=this.y+this.h;return a.x>=this.x&&a.x<c&&a.y>=this.y&&a.y<f&&d>this.x&&d<=c&&b>this.y&&b<=f};d.prototype.containsPoint=function(a){return a.x>=this.x&&a.x<this.x+this.w&&a.y>=this.y&&a.y<this.y+this.h};d.prototype.isContained=function(a){for(var d=0;d<a.length;d++)if(a[d].contains(this))return!0;return!1};d.prototype.isSmallerThan=
function(a){return this.w<a.w&&this.h<a.h};d.prototype.isLargerThan=function(a){return this.w>a.w&&this.h>a.h};d.prototype.union=function(a){if(this.isEmpty())this.set(a);else if(!a.isEmpty()){var d=this.x,b=this.y;this.x>a.x&&(d=a.x);this.y>a.y&&(b=a.y);var c=this.x+this.w;c<a.x+a.w&&(c=a.x+a.w);var f=this.y+this.h;f<a.y+a.h&&(f=a.y+a.h);this.x=d;this.y=b;this.w=c-d;this.h=f-b}};d.prototype.isEmpty=function(){return 0>=this.w||0>=this.h};d.prototype.setEmpty=function(){this.h=this.w=this.y=this.x=
0};d.prototype.intersect=function(a){var b=d.createEmpty();this.isEmpty()||a.isEmpty()?b.setEmpty():(b.x=Math.max(this.x,a.x),b.y=Math.max(this.y,a.y),b.w=Math.min(this.x+this.w,a.x+a.w)-b.x,b.h=Math.min(this.y+this.h,a.y+a.h)-b.y,b.isEmpty()&&b.setEmpty(),this.set(b))};d.prototype.intersects=function(a){if(this.isEmpty()||a.isEmpty())return!1;var d=Math.max(this.x,a.x),b=Math.max(this.y,a.y),d=Math.min(this.x+this.w,a.x+a.w)-d;a=Math.min(this.y+this.h,a.y+a.h)-b;return!(0>=d||0>=a)};d.prototype.intersectsTransformedAABB=
function(a,b){var c=d._temporary;c.set(a);b.transformRectangleAABB(c);return this.intersects(c)};d.prototype.intersectsTranslated=function(a,d,b){if(this.isEmpty()||a.isEmpty())return!1;var c=Math.max(this.x,a.x+d),f=Math.max(this.y,a.y+b);d=Math.min(this.x+this.w,a.x+d+a.w)-c;a=Math.min(this.y+this.h,a.y+b+a.h)-f;return!(0>=d||0>=a)};d.prototype.area=function(){return this.w*this.h};d.prototype.clone=function(){var a=d.allocate();a.set(this);return a};d.allocate=function(){var a=d._dirtyStack;return a.length?
a.pop():new d(12345,67890,12345,67890)};d.prototype.free=function(){d._dirtyStack.push(this)};d.prototype.snap=function(){var a=Math.ceil(this.x+this.w),d=Math.ceil(this.y+this.h);this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.w=a-this.x;this.h=d-this.y;return this};d.prototype.scale=function(a,d){this.x*=a;this.y*=d;this.w*=a;this.h*=d;return this};d.prototype.offset=function(a,d){this.x+=a;this.y+=d;return this};d.prototype.resize=function(a,d){this.w+=a;this.h+=d;return this};d.prototype.expand=
function(a,d){this.offset(-a,-d).resize(2*a,2*d);return this};d.prototype.getCenter=function(){return new a(this.x+this.w/2,this.y+this.h/2)};d.prototype.getAbsoluteBounds=function(){return new d(0,0,this.w,this.h)};d.prototype.toString=function(a){void 0===a&&(a=2);return"{"+this.x.toFixed(a)+", "+this.y.toFixed(a)+", "+this.w.toFixed(a)+", "+this.h.toFixed(a)+"}"};d.createEmpty=function(){var a=d.allocate();a.setEmpty();return a};d.createSquare=function(a){return new d(-a/2,-a/2,a,a)};d.createMaxI16=
function(){return new d(-32768,-32768,65535,65535)};d.prototype.setMaxI16=function(){this.setElements(-32768,-32768,65535,65535)};d.prototype.getCorners=function(a){a[0].x=this.x;a[0].y=this.y;a[1].x=this.x+this.w;a[1].y=this.y;a[2].x=this.x+this.w;a[2].y=this.y+this.h;a[3].x=this.x;a[3].y=this.y+this.h};d.allocationCount=0;d._temporary=new d(0,0,0,0);d._dirtyStack=[];return d}();r.Rectangle=v;var H=function(){function d(a){this.corners=a.map(function(a){return a.clone()});this.axes=[a[1].clone().sub(a[0]),
a[3].clone().sub(a[0])];this.origins=[];for(var d=0;2>d;d++)this.axes[d].mul(1/this.axes[d].squaredLength()),this.origins.push(a[0].dot(this.axes[d]))}d.prototype.getBounds=function(){return d.getBounds(this.corners)};d.getBounds=function(e){for(var d=new a(Number.MAX_VALUE,Number.MAX_VALUE),b=new a(Number.MIN_VALUE,Number.MIN_VALUE),c=0;4>c;c++){var f=e[c].x,l=e[c].y;d.x=Math.min(d.x,f);d.y=Math.min(d.y,l);b.x=Math.max(b.x,f);b.y=Math.max(b.y,l)}return new v(d.x,d.y,b.x-d.x,b.y-d.y)};d.prototype.intersects=
function(a){return this.intersectsOneWay(a)&&a.intersectsOneWay(this)};d.prototype.intersectsOneWay=function(a){for(var d=0;2>d;d++){for(var b=0;4>b;b++){var c=a.corners[b].dot(this.axes[d]),f,l;0===b?l=f=c:c<f?f=c:c>l&&(l=c)}if(f>1+this.origins[d]||l<this.origins[d])return!1}return!0};return d}();r.OBB=H;var J=function(){function a(e,b,c,f,g,l){this._data=new Float64Array(6);this._type=0;this.setElements(e,b,c,f,g,l);a.allocationCount++}Object.defineProperty(a.prototype,"a",{get:function(){return this._data[0]},
set:function(a){this._data[0]=a;this._type=0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"b",{get:function(){return this._data[1]},set:function(a){this._data[1]=a;this._type=0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"c",{get:function(){return this._data[2]},set:function(a){this._data[2]=a;this._type=0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"d",{get:function(){return this._data[3]},set:function(a){this._data[3]=a;this._type=
0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"tx",{get:function(){return this._data[4]},set:function(a){this._data[4]=a;1===this._type&&(this._type=2)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"ty",{get:function(){return this._data[5]},set:function(a){this._data[5]=a;1===this._type&&(this._type=2)},enumerable:!0,configurable:!0});a._createSVGMatrix=function(){a._svg||(a._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"));return a._svg.createSVGMatrix()};
a.prototype.setElements=function(a,b,d,c,f,l){var g=this._data;g[0]=a;g[1]=b;g[2]=d;g[3]=c;g[4]=f;g[5]=l;this._type=0};a.prototype.set=function(a){var b=this._data,d=a._data;b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];this._type=a._type};a.prototype.emptyArea=function(a){a=this._data;return 0===a[0]||0===a[3]?!0:!1};a.prototype.infiniteArea=function(a){a=this._data;return Infinity===Math.abs(a[0])||Infinity===Math.abs(a[3])?!0:!1};a.prototype.isEqual=function(a){if(1===this._type&&
1===a._type)return!0;var b=this._data;a=a._data;return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]};a.prototype.clone=function(){var e=a.allocate();e.set(this);return e};a.allocate=function(){var e=a._dirtyStack;return e.length?e.pop():new a(12345,12345,12345,12345,12345,12345)};a.prototype.free=function(){a._dirtyStack.push(this)};a.prototype.transform=function(a,b,d,c,f,l){var g=this._data,h=g[0],q=g[1],n=g[2],k=g[3],L=g[4],I=g[5];g[0]=h*a+n*b;g[1]=q*a+k*b;g[2]=
h*d+n*c;g[3]=q*d+k*c;g[4]=h*f+n*l+L;g[5]=q*f+k*l+I;this._type=0;return this};a.prototype.transformRectangle=function(a,b){var d=this._data,c=d[0],f=d[1],l=d[2],g=d[3],h=d[4],d=d[5],q=a.x,n=a.y,k=a.w,L=a.h;b[0].x=c*q+l*n+h;b[0].y=f*q+g*n+d;b[1].x=c*(q+k)+l*n+h;b[1].y=f*(q+k)+g*n+d;b[2].x=c*(q+k)+l*(n+L)+h;b[2].y=f*(q+k)+g*(n+L)+d;b[3].x=c*q+l*(n+L)+h;b[3].y=f*q+g*(n+L)+d};a.prototype.isTranslationOnly=function(){if(2===this._type)return!0;var a=this._data;return 1===a[0]&&0===a[1]&&0===a[2]&&1===a[3]||
f(a[0],1)&&f(a[1],0)&&f(a[2],0)&&f(a[3],1)?(this._type=2,!0):!1};a.prototype.transformRectangleAABB=function(a){var b=this._data;if(1!==this._type)if(2===this._type)a.x+=b[4],a.y+=b[5];else{var d=b[0],c=b[1],f=b[2],l=b[3],g=b[4],h=b[5],q=a.x,n=a.y,k=a.w,L=a.h,b=d*q+f*n+g,I=c*q+l*n+h,K=d*(q+k)+f*n+g,m=c*(q+k)+l*n+h,u=d*(q+k)+f*(n+L)+g,k=c*(q+k)+l*(n+L)+h,d=d*q+f*(n+L)+g,c=c*q+l*(n+L)+h,l=0;b>K&&(l=b,b=K,K=l);u>d&&(l=u,u=d,d=l);a.x=b<u?b:u;a.w=(K>d?K:d)-a.x;I>m&&(l=I,I=m,m=l);k>c&&(l=k,k=c,c=l);a.y=
I<k?I:k;a.h=(m>c?m:c)-a.y}};a.prototype.scale=function(a,b){var d=this._data;d[0]*=a;d[1]*=b;d[2]*=a;d[3]*=b;d[4]*=a;d[5]*=b;this._type=0;return this};a.prototype.scaleClone=function(a,b){return 1===a&&1===b?this:this.clone().scale(a,b)};a.prototype.rotate=function(a){var b=this._data,d=b[0],c=b[1],f=b[2],l=b[3],g=b[4],h=b[5],q=Math.cos(a);a=Math.sin(a);b[0]=q*d-a*c;b[1]=a*d+q*c;b[2]=q*f-a*l;b[3]=a*f+q*l;b[4]=q*g-a*h;b[5]=a*g+q*h;this._type=0;return this};a.prototype.concat=function(a){if(1===a._type)return this;
var b=this._data;a=a._data;var d=b[0]*a[0],c=0,f=0,l=b[3]*a[3],g=b[4]*a[0]+a[4],h=b[5]*a[3]+a[5];if(0!==b[1]||0!==b[2]||0!==a[1]||0!==a[2])d+=b[1]*a[2],l+=b[2]*a[1],c+=b[0]*a[1]+b[1]*a[3],f+=b[2]*a[0]+b[3]*a[2],g+=b[5]*a[2],h+=b[4]*a[1];b[0]=d;b[1]=c;b[2]=f;b[3]=l;b[4]=g;b[5]=h;this._type=0;return this};a.prototype.concatClone=function(a){return this.clone().concat(a)};a.prototype.preMultiply=function(a){var b=this._data,d=a._data;if(2===a._type&&this._type&3)b[4]+=d[4],b[5]+=d[5],this._type=2;else if(1!==
a._type){a=d[0]*b[0];var c=0,f=0,l=d[3]*b[3],g=d[4]*b[0]+b[4],h=d[5]*b[3]+b[5];if(0!==d[1]||0!==d[2]||0!==b[1]||0!==b[2])a+=d[1]*b[2],l+=d[2]*b[1],c+=d[0]*b[1]+d[1]*b[3],f+=d[2]*b[0]+d[3]*b[2],g+=d[5]*b[2],h+=d[4]*b[1];b[0]=a;b[1]=c;b[2]=f;b[3]=l;b[4]=g;b[5]=h;this._type=0}};a.prototype.translate=function(a,b){var d=this._data;d[4]+=a;d[5]+=b;1===this._type&&(this._type=2);return this};a.prototype.setIdentity=function(){var a=this._data;a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;this._type=1};a.prototype.isIdentity=
function(){if(1===this._type)return!0;var a=this._data;return 1===a[0]&&0===a[1]&&0===a[2]&&1===a[3]&&0===a[4]&&0===a[5]};a.prototype.transformPoint=function(a){if(1!==this._type){var b=this._data,d=a.x,c=a.y;a.x=b[0]*d+b[2]*c+b[4];a.y=b[1]*d+b[3]*c+b[5]}};a.prototype.transformPoints=function(a){if(1!==this._type)for(var b=0;b<a.length;b++)this.transformPoint(a[b])};a.prototype.deltaTransformPoint=function(a){if(1!==this._type){var b=this._data,d=a.x,c=a.y;a.x=b[0]*d+b[2]*c;a.y=b[1]*d+b[3]*c}};a.prototype.inverse=
function(a){var b=this._data,d=a._data;if(1===this._type)a.setIdentity();else if(2===this._type)d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=-b[4],d[5]=-b[5],a._type=2;else{var c=b[1],f=b[2],l=b[4],g=b[5];if(0===c&&0===f){var h=d[0]=1/b[0],b=d[3]=1/b[3];d[1]=0;d[2]=0;d[4]=-h*l;d[5]=-b*g}else{var h=b[0],b=b[3],q=h*b-c*f;if(0===q){a.setIdentity();return}q=1/q;d[0]=b*q;c=d[1]=-c*q;f=d[2]=-f*q;b=d[3]=h*q;d[4]=-(d[0]*l+f*g);d[5]=-(c*l+b*g)}a._type=0}};a.prototype.getTranslateX=function(){return this._data[4]};a.prototype.getTranslateY=
function(){return this._data[4]};a.prototype.getScaleX=function(){var a=this._data;if(1===a[0]&&0===a[1])return 1;var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return 0<a[0]?b:-b};a.prototype.getScaleY=function(){var a=this._data;if(0===a[2]&&1===a[3])return 1;var b=Math.sqrt(a[2]*a[2]+a[3]*a[3]);return 0<a[3]?b:-b};a.prototype.getScale=function(){return(this.getScaleX()+this.getScaleY())/2};a.prototype.getAbsoluteScaleX=function(){return Math.abs(this.getScaleX())};a.prototype.getAbsoluteScaleY=function(){return Math.abs(this.getScaleY())};
a.prototype.getRotation=function(){var a=this._data;return 180*Math.atan(a[1]/a[0])/Math.PI};a.prototype.isScaleOrRotation=function(){var a=this._data;return.01>Math.abs(a[0]*a[2]+a[1]*a[3])};a.prototype.toString=function(a){void 0===a&&(a=2);var b=this._data;return"{"+b[0].toFixed(a)+", "+b[1].toFixed(a)+", "+b[2].toFixed(a)+", "+b[3].toFixed(a)+", "+b[4].toFixed(a)+", "+b[5].toFixed(a)+"}"};a.prototype.toWebGLMatrix=function(){var a=this._data;return new Float32Array([a[0],a[1],0,a[2],a[3],0,a[4],
a[5],1])};a.prototype.toCSSTransform=function(){var a=this._data;return"matrix("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.createIdentity=function(){var e=a.allocate();e.setIdentity();return e};a.prototype.toSVGMatrix=function(){var e=this._data,b=a._createSVGMatrix();try{b.a=e[0],b.b=e[1],b.c=e[2],b.d=e[3],b.e=e[4],b.f=e[5]}catch(c){return a._createSVGMatrix()}return b};a.prototype.snap=function(){var a=this._data;return this.isTranslationOnly()?(a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=
Math.round(a[4]),a[5]=Math.round(a[5]),this._type=2,!0):!1};a.createIdentitySVGMatrix=function(){return a._createSVGMatrix()};a.createSVGMatrixFromArray=function(e){var b=a._createSVGMatrix();b.a=e[0];b.b=e[1];b.c=e[2];b.d=e[3];b.e=e[4];b.f=e[5];return b};a.allocationCount=0;a._dirtyStack=[];a.multiply=function(a,b){var d=b._data;a.transform(d[0],d[1],d[2],d[3],d[4],d[5])};return a}();r.Matrix=J;J=function(){function a(e){this._m=new Float32Array(e)}a.prototype.asWebGLMatrix=function(){return this._m};
a.createCameraLookAt=function(e,b,c){b=e.clone().sub(b).normalize();c=c.clone().cross(b).normalize();var f=b.clone().cross(c);return new a([c.x,c.y,c.z,0,f.x,f.y,f.z,0,b.x,b.y,b.z,0,e.x,e.y,e.z,1])};a.createLookAt=function(e,b,c){b=e.clone().sub(b).normalize();c=c.clone().cross(b).normalize();var f=b.clone().cross(c);return new a([c.x,f.x,b.x,0,f.x,f.y,b.y,0,b.x,f.z,b.z,0,-c.dot(e),-f.dot(e),-b.dot(e),1])};a.prototype.mul=function(a){a=[a.x,a.y,a.z,0];for(var b=this._m,d=[],c=0;4>c;c++){d[c]=0;for(var f=
4*c,l=0;4>l;l++)d[c]+=b[f+l]*a[l]}return new h(d[0],d[1],d[2])};a.create2DProjection=function(b,c,f){return new a([2/b,0,0,0,0,-2/c,0,0,0,0,2/f,0,-1,1,0,1])};a.createPerspective=function(b,c,f,g){b=Math.tan(.5*Math.PI-.5*b);var h=1/(f-g);return new a([b/c,0,0,0,0,b,0,0,0,0,(f+g)*h,-1,0,0,f*g*h*2,0])};a.createIdentity=function(){return a.createTranslation(0,0,0)};a.createTranslation=function(b,c,f){return new a([1,0,0,0,0,1,0,0,0,0,1,0,b,c,f,1])};a.createXRotation=function(b){var c=Math.cos(b);b=Math.sin(b);
return new a([1,0,0,0,0,c,b,0,0,-b,c,0,0,0,0,1])};a.createYRotation=function(b){var c=Math.cos(b);b=Math.sin(b);return new a([c,0,-b,0,0,1,0,0,b,0,c,0,0,0,0,1])};a.createZRotation=function(b){var c=Math.cos(b);b=Math.sin(b);return new a([c,b,0,0,-b,c,0,0,0,0,1,0,0,0,0,1])};a.createScale=function(b,c,f){return new a([b,0,0,0,0,c,0,0,0,0,f,0,0,0,0,1])};a.createMultiply=function(b,c){var f=b._m,g=c._m,h=f[0],l=f[1],x=f[2],m=f[3],q=f[4],n=f[5],k=f[6],L=f[7],I=f[8],K=f[9],u=f[10],P=f[11],p=f[12],M=f[13],
Q=f[14],f=f[15],r=g[0],D=g[1],T=g[2],R=g[3],A=g[4],O=g[5],v=g[6],z=g[7],C=g[8],H=g[9],J=g[10],B=g[11],E=g[12],V=g[13],N=g[14],g=g[15];return new a([h*r+l*A+x*C+m*E,h*D+l*O+x*H+m*V,h*T+l*v+x*J+m*N,h*R+l*z+x*B+m*g,q*r+n*A+k*C+L*E,q*D+n*O+k*H+L*V,q*T+n*v+k*J+L*N,q*R+n*z+k*B+L*g,I*r+K*A+u*C+P*E,I*D+K*O+u*H+P*V,I*T+K*v+u*J+P*N,I*R+K*z+u*B+P*g,p*r+M*A+Q*C+f*E,p*D+M*O+Q*H+f*V,p*T+M*v+Q*J+f*N,p*R+M*z+Q*B+f*g])};a.createInverse=function(b){var c=b._m;b=c[0];var f=c[1],g=c[2],h=c[3],l=c[4],x=c[5],m=c[6],q=
c[7],n=c[8],k=c[9],L=c[10],I=c[11],K=c[12],u=c[13],P=c[14],c=c[15],p=L*c,M=P*I,Q=m*c,r=P*q,D=m*I,A=L*q,R=g*c,v=P*h,O=g*I,U=L*h,z=g*q,C=m*h,H=n*u,J=K*k,B=l*u,E=K*x,N=l*k,W=n*x,X=b*u,Y=K*f,Z=b*k,aa=n*f,ba=b*x,ca=l*f,pa=p*x+r*k+D*u-(M*x+Q*k+A*u),S=M*f+R*k+U*u-(p*f+v*k+O*u),u=Q*f+v*x+z*u-(r*f+R*x+C*u),f=A*f+O*x+C*k-(D*f+U*x+z*k),x=1/(b*pa+l*S+n*u+K*f);return new a([x*pa,x*S,x*u,x*f,x*(M*l+Q*n+A*K-(p*l+r*n+D*K)),x*(p*b+v*n+O*K-(M*b+R*n+U*K)),x*(r*b+R*l+C*K-(Q*b+v*l+z*K)),x*(D*b+U*l+z*n-(A*b+O*l+C*n)),
x*(H*q+E*I+N*c-(J*q+B*I+W*c)),x*(J*h+X*I+aa*c-(H*h+Y*I+Z*c)),x*(B*h+Y*q+ba*c-(E*h+X*q+ca*c)),x*(W*h+Z*q+ca*I-(N*h+aa*q+ba*I)),x*(B*L+W*P+J*m-(N*P+H*m+E*L)),x*(Z*P+H*g+Y*L-(X*L+aa*P+J*g)),x*(X*m+ca*P+E*g-(ba*P+B*g+Y*m)),x*(ba*L+N*g+aa*m-(Z*m+ca*L+W*g))])};return a}();r.Matrix3D=J;J=function(){function a(b,c,f){void 0===f&&(f=7);var g=this.size=1<<f;this.sizeInBits=f;this.w=b;this.h=c;this.c=Math.ceil(b/g);this.r=Math.ceil(c/g);this.grid=[];for(b=0;b<this.r;b++)for(this.grid.push([]),c=0;c<this.c;c++)this.grid[b][c]=
new a.Cell(new v(c*g,b*g,g,g))}a.prototype.clear=function(){for(var a=0;a<this.r;a++)for(var b=0;b<this.c;b++)this.grid[a][b].clear()};a.prototype.getBounds=function(){return new v(0,0,this.w,this.h)};a.prototype.addDirtyRectangle=function(a){var b=a.x>>this.sizeInBits,d=a.y>>this.sizeInBits;if(!(b>=this.c||d>=this.r)){0>b&&(b=0);0>d&&(d=0);var c=this.grid[d][b];a=a.clone();a.snap();if(c.region.contains(a))c.bounds.isEmpty()?c.bounds.set(a):c.bounds.contains(a)||c.bounds.union(a);else for(var f=Math.min(this.c,
Math.ceil((a.x+a.w)/this.size))-b,l=Math.min(this.r,Math.ceil((a.y+a.h)/this.size))-d,g=0;g<f;g++)for(var h=0;h<l;h++)c=this.grid[d+h][b+g],c=c.region.clone(),c.intersect(a),c.isEmpty()||this.addDirtyRectangle(c)}};a.prototype.gatherRegions=function(a){for(var b=0;b<this.r;b++)for(var d=0;d<this.c;d++)this.grid[b][d].bounds.isEmpty()||a.push(this.grid[b][d].bounds)};a.prototype.gatherOptimizedRegions=function(a){this.gatherRegions(a)};a.prototype.getDirtyRatio=function(){var a=this.w*this.h;if(0===
a)return 0;for(var b=0,d=0;d<this.r;d++)for(var c=0;c<this.c;c++)b+=this.grid[d][c].region.area();return b/a};a.prototype.render=function(a,b){function d(b){a.rect(b.x,b.y,b.w,b.h)}if(b&&b.drawGrid){a.strokeStyle="white";for(var c=0;c<this.r;c++)for(var f=0;f<this.c;f++){var l=this.grid[c][f];a.beginPath();d(l.region);a.closePath();a.stroke()}}a.strokeStyle="#E0F8D8";for(c=0;c<this.r;c++)for(f=0;f<this.c;f++)l=this.grid[c][f],a.beginPath(),d(l.bounds),a.closePath(),a.stroke()};a.tmpRectangle=v.createEmpty();
return a}();r.DirtyRegion=J;(function(a){var b=function(){function a(b){this.region=b;this.bounds=v.createEmpty()}a.prototype.clear=function(){this.bounds.setEmpty()};return a}();a.Cell=b})(J=r.DirtyRegion||(r.DirtyRegion={}));var D=function(){function b(a,d,c,f,g,l){this.index=a;this.x=d;this.y=c;this.scale=l;this.bounds=new v(d*f,c*g,f,g)}b.prototype.getOBB=function(){if(this._obb)return this._obb;this.bounds.getCorners(b.corners);return this._obb=new H(b.corners)};b.corners=a.createEmptyPoints(4);
return b}();r.Tile=D;var A=function(){function b(a,c,d,f,g){this.tileW=d;this.tileH=f;this.scale=g;this.w=a;this.h=c;this.rows=Math.ceil(c/f);this.columns=Math.ceil(a/d);this.tiles=[];for(c=a=0;c<this.rows;c++)for(var l=0;l<this.columns;l++)this.tiles.push(new D(a++,l,c,d,f,g))}b.prototype.getTiles=function(a,b){if(b.emptyArea(a))return[];if(b.infiniteArea(a))return this.tiles;var c=this.columns*this.rows;return 40>c&&b.isScaleOrRotation()?this.getFewTiles(a,b,10<c):this.getManyTiles(a,b)};b.prototype.getFewTiles=
function(a,c,f){void 0===f&&(f=!0);if(c.isTranslationOnly()&&1===this.tiles.length)return this.tiles[0].bounds.intersectsTranslated(a,c.tx,c.ty)?[this.tiles[0]]:[];c.transformRectangle(a,b._points);var g;a=new v(0,0,this.w,this.h);f&&(g=new H(b._points));a.intersect(H.getBounds(b._points));if(a.isEmpty())return[];var h=a.x/this.tileW|0;c=a.y/this.tileH|0;var l=Math.ceil((a.x+a.w)/this.tileW)|0,x=Math.ceil((a.y+a.h)/this.tileH)|0,h=m(h,0,this.columns),l=m(l,0,this.columns);c=m(c,0,this.rows);for(var x=
m(x,0,this.rows),u=[];h<l;h++)for(var q=c;q<x;q++){var n=this.tiles[q*this.columns+h];n.bounds.intersects(a)&&(f?n.getOBB().intersects(g):1)&&u.push(n)}return u};b.prototype.getManyTiles=function(a,c){function f(a,b,k){return(a-b.x)*(k.y-b.y)/(k.x-b.x)+b.y}function g(a,b,k,e,c){if(!(0>k||k>=b.columns))for(e=m(e,0,b.rows),c=m(c+1,0,b.rows);e<c;e++)a.push(b.tiles[e*b.columns+k])}var h=b._points;c.transformRectangle(a,h);for(var l=h[0].x<h[1].x?0:1,x=h[2].x<h[3].x?2:3,x=h[l].x<h[x].x?l:x,l=[],u=0;5>
u;u++,x++)l.push(h[x%4]);(l[1].x-l[0].x)*(l[3].y-l[0].y)<(l[1].y-l[0].y)*(l[3].x-l[0].x)&&(h=l[1],l[1]=l[3],l[3]=h);var h=[],q,n,x=Math.floor(l[0].x/this.tileW),u=(x+1)*this.tileW;if(l[2].x<u){q=Math.min(l[0].y,l[1].y,l[2].y,l[3].y);n=Math.max(l[0].y,l[1].y,l[2].y,l[3].y);var k=Math.floor(q/this.tileH),L=Math.floor(n/this.tileH);g(h,this,x,k,L);return h}var I=0,K=4,p=!1;if(l[0].x===l[1].x||l[0].x===l[3].x)l[0].x===l[1].x?(p=!0,I++):K--,q=f(u,l[I],l[I+1]),n=f(u,l[K],l[K-1]),k=Math.floor(l[I].y/this.tileH),
L=Math.floor(l[K].y/this.tileH),g(h,this,x,k,L),x++;do{var P,r,M,Q;l[I+1].x<u?(P=l[I+1].y,M=!0):(P=f(u,l[I],l[I+1]),M=!1);l[K-1].x<u?(r=l[K-1].y,Q=!0):(r=f(u,l[K],l[K-1]),Q=!1);k=Math.floor((l[I].y<l[I+1].y?q:P)/this.tileH);L=Math.floor((l[K].y>l[K-1].y?n:r)/this.tileH);g(h,this,x,k,L);if(M&&p)break;M?(p=!0,I++,q=f(u,l[I],l[I+1])):q=P;Q?(K--,n=f(u,l[K],l[K-1])):n=r;x++;u=(x+1)*this.tileW}while(I<K);return h};b._points=a.createEmptyPoints(4);return b}();r.TileCache=A;J=function(){function a(b,c,d){this._cacheLevels=
[];this._source=b;this._tileSize=c;this._minUntiledSize=d}a.prototype._getTilesAtScale=function(a,b,c){var d=Math.max(b.getAbsoluteScaleX(),b.getAbsoluteScaleY()),f=0;1!==d&&(f=m(Math.round(Math.log(1/d)/Math.LN2),-5,3));d=u(f);if(this._source.hasFlags(256))for(;;){d=u(f);if(c.contains(this._source.getBounds().getAbsoluteBounds().clone().scale(d,d)))break;f--}this._source.hasFlags(512)||(f=m(f,-5,0));d=u(f);c=5+f;f=this._cacheLevels[c];if(!f){var f=this._source.getBounds().getAbsoluteBounds().clone().scale(d,
d),l,g;this._source.hasFlags(256)||!this._source.hasFlags(1024)||Math.max(f.w,f.h)<=this._minUntiledSize?(l=f.w,g=f.h):l=g=this._tileSize;f=this._cacheLevels[c]=new A(f.w,f.h,l,g,d)}return f.getTiles(a,b.scaleClone(d,d))};a.prototype.fetchTiles=function(a,b,c,d){var f=new v(0,0,c.canvas.width,c.canvas.height);a=this._getTilesAtScale(a,b,f);var l;b=this._source;for(var g=0;g<a.length;g++){var h=a[g];h.cachedSurfaceRegion&&h.cachedSurfaceRegion.surface&&!b.hasFlags(4352)||(l||(l=[]),l.push(h))}l&&this._cacheTiles(c,
l,d,f);b.removeFlags(4096);return a};a.prototype._getTileBounds=function(a){for(var b=v.createEmpty(),c=0;c<a.length;c++)b.union(a[c].bounds);return b};a.prototype._cacheTiles=function(a,b,c,d,f){void 0===f&&(f=4);var l=this._getTileBounds(b);a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,d.w,d.h);a.translate(-l.x,-l.y);a.scale(b[0].scale,b[0].scale);var h=this._source.getBounds();a.translate(-h.x,-h.y);2<=g.traceLevel&&g.writer&&g.writer.writeLn("Rendering Tiles: "+l);this._source.render(a,
0);a.restore();for(var h=null,m=0;m<b.length;m++){var q=b[m],n=q.bounds.clone();n.x-=l.x;n.y-=l.y;d.contains(n)||(h||(h=[]),h.push(q));q.cachedSurfaceRegion=c(q.cachedSurfaceRegion,a,n)}h&&(2<=h.length?(b=h.slice(0,h.length/2|0),l=h.slice(b.length),this._cacheTiles(a,b,c,d,f-1),this._cacheTiles(a,l,c,d,f-1)):this._cacheTiles(a,h,c,d,f-1))};return a}();r.RenderableTileCache=J})(g.Geometry||(g.Geometry={}))})(c.GFX||(c.GFX={}))})(Shumway||(Shumway={}));
__extends=this&&this.__extends||function(c,g){function E(){this.constructor=c}for(var r in g)g.hasOwnProperty(r)&&(c[r]=g[r]);E.prototype=g.prototype;c.prototype=new E};
(function(c){(function(g){function E(a){if(1===a)return"Node";if(3===a)return"Shape";if(5===a)return"Group";if(13===a)return"Stage";if(33===a)return"Renderable"}function r(a,b,k){return a+(b-a)*k}function B(a,b,k){return r(a>>24&255,b>>24&255,k)<<24|r(a>>16&255,b>>16&255,k)<<16|r(a>>8&255,b>>8&255,k)<<8|r(a&255,b&255,k)}function v(a,b,k){a=a.measureText(b).width|0;0<k&&(a+=b.length*k);return a}function H(a,b,k,c,d){b=y[b-1];d&&(d=b/4,k-=d,c-=d);d=Math.ceil((1>k?1:k)/(b-1E-9));b=Math.ceil((1>c?1:c)/
(b-1E-9));a.x-=d;a.w+=2*d;a.y-=b;a.h+=2*b}var z=c.IntegerUtilities.roundToMultipleOfPowerOfTwo,p=g.Geometry.Rectangle;(function(a){var b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);return b}(g.Geometry.Rectangle);a.Region=b;var k=function(){function a(b,k){this._root=new c(0,0,b|0,k|0,!1)}a.prototype.allocate=function(a,b){a=Math.ceil(a);b=Math.ceil(b);var k=this._root.insert(a,b);k&&(k.allocator=this,k.allocated=!0);return k};a.prototype.free=function(a){a.clear();a.allocated=
!1};a.RANDOM_ORIENTATION=!0;a.MAX_DEPTH=256;return a}();a.CompactAllocator=k;var c=function(a){function b(k,c,d,e,n){a.call(this,k,c,d,e);this._children=null;this._horizontal=n;this.allocated=!1}__extends(b,a);b.prototype.clear=function(){this._children=null;this.allocated=!1};b.prototype.insert=function(a,b){return this._insert(a,b,0)};b.prototype._insert=function(a,c,d){if(!(d>k.MAX_DEPTH||this.allocated||this.w<a||this.h<c))if(this._children){var e;if((e=this._children[0]._insert(a,c,d+1))||(e=
this._children[1]._insert(a,c,d+1)))return e}else return e=!this._horizontal,k.RANDOM_ORIENTATION&&(e=.5<=Math.random()),this._children=this._horizontal?[new b(this.x,this.y,this.w,c,!1),new b(this.x,this.y+c,this.w,this.h-c,e)]:[new b(this.x,this.y,a,this.h,!0),new b(this.x+a,this.y,this.w-a,this.h,e)],e=this._children[0],e.w===a&&e.h===c?(e.allocated=!0,e):this._insert(a,c,d+1)};return b}(a.Region),d=function(){function a(b,k,c,d){this._columns=b/c|0;this._rows=k/d|0;this._sizeW=c;this._sizeH=d;
this._freeList=[];this._index=0;this._total=this._columns*this._rows}a.prototype.allocate=function(a,b){a=Math.ceil(a);b=Math.ceil(b);var k=this._sizeW,c=this._sizeH;if(a>k||b>c)return null;var d=this._freeList,n=this._index;return 0<d.length?(k=d.pop(),k.w=a,k.h=b,k.allocated=!0,k):n<this._total?(d=n/this._columns|0,k=new e((n-d*this._columns)*k,d*c,a,b),k.index=n,k.allocator=this,k.allocated=!0,this._index++,k):null};a.prototype.free=function(a){a.allocated=!1;this._freeList.push(a)};return a}();
a.GridAllocator=d;var e=function(a){function b(k,c,d,e){a.call(this,k,c,d,e);this.index=-1}__extends(b,a);return b}(a.Region);a.GridCell=e;var f=function(){return function(a,b,k){this.size=a;this.region=b;this.allocator=k}}(),l=function(a){function b(k,c,d,e,n){a.call(this,k,c,d,e);this.region=n}__extends(b,a);return b}(a.Region);a.BucketCell=l;b=function(){function a(b,k){this._buckets=[];this._w=b|0;this._h=k|0;this._filled=0}a.prototype.allocate=function(a,b){a=Math.ceil(a);b=Math.ceil(b);var k=
Math.max(a,b);if(a>this._w||b>this._h)return null;var c=null,e,n=this._buckets;do{for(var g=0;g<n.length&&!(n[g].size>=k&&(e=n[g],c=e.allocator.allocate(a,b)));g++);if(!c){var h=this._h-this._filled;if(h<b)return null;var g=z(k,8),q=2*g;q>h&&(q=h);if(q<g)return null;h=new p(0,this._filled,this._w,q);this._buckets.push(new f(g,h,new d(h.w,h.h,g,g)));this._filled+=q}}while(!c);return new l(e.region.x+c.x,e.region.y+c.y,c.w,c.h,c)};a.prototype.free=function(a){a.region.allocator.free(a.region)};return a}();
a.BucketAllocator=b})(g.RegionAllocator||(g.RegionAllocator={}));(function(a){var b=function(){function a(b){this._createSurface=b;this._surfaces=[]}Object.defineProperty(a.prototype,"surfaces",{get:function(){return this._surfaces},enumerable:!0,configurable:!0});a.prototype._createNewSurface=function(a,b){var k=this._createSurface(a,b);this._surfaces.push(k);return k};a.prototype.addSurface=function(a){this._surfaces.push(a)};a.prototype.allocate=function(a,b,k){for(var c=0;c<this._surfaces.length;c++){var d=
this._surfaces[c];if(d!==k&&(d=d.allocate(a,b)))return d}return this._createNewSurface(a,b).allocate(a,b)};a.prototype.free=function(a){};return a}();a.SimpleAllocator=b})(g.SurfaceRegionAllocator||(g.SurfaceRegionAllocator={}));var p=g.Geometry.Rectangle,b=g.Geometry.Matrix,m=g.Geometry.DirtyRegion;(function(a){a[a.Normal=1]="Normal";a[a.Layer=2]="Layer";a[a.Multiply=3]="Multiply";a[a.Screen=4]="Screen";a[a.Lighten=5]="Lighten";a[a.Darken=6]="Darken";a[a.Difference=7]="Difference";a[a.Add=8]="Add";
a[a.Subtract=9]="Subtract";a[a.Invert=10]="Invert";a[a.Alpha=11]="Alpha";a[a.Erase=12]="Erase";a[a.Overlay=13]="Overlay";a[a.HardLight=14]="HardLight"})(g.BlendMode||(g.BlendMode={}));var u=g.BlendMode,f=function(){function a(){}a.prototype.visitNode=function(a,b){};a.prototype.visitShape=function(a,b){this.visitNode(a,b)};a.prototype.visitGroup=function(a,b){this.visitNode(a,b);for(var c=a.getChildren(),d=0;d<c.length;d++)c[d].visit(this,b)};a.prototype.visitStage=function(a,b){this.visitGroup(a,
b)};a.prototype.visitRenderable=function(a,b){this.visitNode(a,b)};return a}();g.NodeVisitor=f;var a=function(){return function(){}}();g.State=a;var h=function(a){function c(k){a.call(this);this.matrix=b.createIdentity();this.depth=0}__extends(c,a);c.prototype.transform=function(a){var b=this.clone();b.matrix.preMultiply(a.getMatrix());return b};c.allocate=function(){var a=c._dirtyStack,b=null;return b=a.length?a.pop():new c(this._doNotCallCtorDirectly)};c.prototype.clone=function(){var a=c.allocate();
a.set(this);return a};c.prototype.set=function(a){this.matrix.set(a.matrix)};c.prototype.free=function(){c._dirtyStack.push(this)};c._dirtyStack=[];c._doNotCallCtorDirectly=Object.create(null);return c}(a);g.PreRenderState=h;var C=function(a){function b(){a.apply(this,arguments);this.isDirty=!0}__extends(b,a);b.prototype.start=function(a,b){this._dirtyRegion=b;var c=h.allocate();c.matrix.setIdentity();a.visit(this,c);c.free()};b.prototype.visitGroup=function(a,b){var c=a.getChildren();this.visitNode(a,
b);for(var d=0;d<c.length;d++){var e=c[d],n=b.transform(e.getTransform());e.visit(this,n);n.free()}};b.prototype.visitNode=function(a,b){a.hasFlags(4096)&&(this.isDirty=!0);a.toggleFlags(4096,!1);a.depth=b.depth++};return b}(f);g.PreRenderVisitor=C;a=function(a){function b(c){a.call(this);this.writer=c}__extends(b,a);b.prototype.visitNode=function(a,b){};b.prototype.visitShape=function(a,b){this.writer.writeLn(a.toString());this.visitNode(a,b)};b.prototype.visitGroup=function(a,b){this.visitNode(a,
b);var c=a.getChildren();this.writer.enter(a.toString()+" "+c.length);for(var d=0;d<c.length;d++)c[d].visit(this,b);this.writer.outdent()};b.prototype.visitStage=function(a,b){this.visitGroup(a,b)};return b}(f);g.TracingNodeVisitor=a;var N=function(){function a(){this._clip=-1;this._eventListeners=null;this._id=a._nextId++;this._type=1;this._index=-1;this._parent=null;this.reset()}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});a.prototype._dispatchEvent=
function(a){if(this._eventListeners)for(var b=this._eventListeners,c=0;c<b.length;c++){var d=b[c];d.type===a&&d.listener(this,a)}};a.prototype.addEventListener=function(a,b){this._eventListeners||(this._eventListeners=[]);this._eventListeners.push({type:a,listener:b})};a.prototype.removeEventListener=function(a,b){for(var c=this._eventListeners,d=0;d<c.length;d++){var e=c[d];if(e.type===a&&e.listener===b){c.splice(d,1);break}}};Object.defineProperty(a.prototype,"properties",{get:function(){return this._properties||
(this._properties={})},enumerable:!0,configurable:!0});a.prototype.reset=function(){this._flags=59393;this._properties=this._transform=this._layer=this._bounds=null;this.depth=-1};Object.defineProperty(a.prototype,"clip",{get:function(){return this._clip},set:function(a){this._clip=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});a.prototype.getTransformedBounds=function(a){var b=this.getBounds(!0);if(a!==
this&&!b.isEmpty()){var c=this.getTransform().getConcatenatedMatrix();a?(a=a.getTransform().getInvertedConcatenatedMatrix(!0),a.preMultiply(c),a.transformRectangleAABB(b),a.free()):c.transformRectangleAABB(b)}return b};a.prototype._markCurrentBoundsAsDirtyRegion=function(){};a.prototype.getStage=function(a){void 0===a&&(a=!0);for(var b=this._parent;b;){if(b.isType(13)){var c=b;if(a){if(c.dirtyRegion)return c}else return c}b=b._parent}return null};a.prototype.getChildren=function(a){throw void 0;};
a.prototype.getBounds=function(a){throw void 0;};a.prototype.setBounds=function(a){(this._bounds||(this._bounds=p.createEmpty())).set(a);this.removeFlags(8192)};a.prototype.clone=function(){throw void 0;};a.prototype.setFlags=function(a){this._flags|=a};a.prototype.hasFlags=function(a){return(this._flags&a)===a};a.prototype.hasAnyFlags=function(a){return!!(this._flags&a)};a.prototype.removeFlags=function(a){this._flags&=~a};a.prototype.toggleFlags=function(a,b){this._flags=b?this._flags|a:this._flags&
~a};a.prototype._propagateFlagsUp=function(a){if(0!==a&&!this.hasFlags(a)){this.hasFlags(2048)||(a&=-8193);this.setFlags(a);var b=this._parent;b&&b._propagateFlagsUp(a)}};a.prototype._propagateFlagsDown=function(a){throw void 0;};a.prototype.isAncestor=function(a){for(;a;){if(a===this)return!0;a=a._parent}return!1};a._getAncestors=function(b,c){var d=a._path;for(d.length=0;b&&b!==c;)d.push(b),b=b._parent;return d};a.prototype._findClosestAncestor=function(a,b){for(var c=this;c;){if(c.hasFlags(a)===
b)return c;c=c._parent}return null};a.prototype.isType=function(a){return this._type===a};a.prototype.isTypeOf=function(a){return(this._type&a)===a};a.prototype.isLeaf=function(){return this.isType(33)||this.isType(3)};a.prototype.isLinear=function(){if(this.isLeaf())return!0;if(this.isType(5)){var a=this._children;if(1===a.length&&a[0].isLinear())return!0}return!1};a.prototype.getTransformMatrix=function(a){void 0===a&&(a=!1);return this.getTransform().getMatrix(a)};a.prototype.getTransform=function(){null===
this._transform&&(this._transform=new D(this));return this._transform};a.prototype.getLayer=function(){null===this._layer&&(this._layer=new A(this));return this._layer};a.prototype.getLayerBounds=function(a){var b=this.getBounds();a&&this._layer&&this._layer.expandBounds(b);return b};a.prototype.visit=function(a,b){switch(this._type){case 1:a.visitNode(this,b);break;case 5:a.visitGroup(this,b);break;case 13:a.visitStage(this,b);break;case 3:a.visitShape(this,b);break;case 33:a.visitRenderable(this,
b);break;default:c.Debug.unexpectedCase()}};a.prototype.invalidate=function(){this._propagateFlagsUp(12288)};a.prototype.toString=function(a){void 0===a&&(a=!1);var b=E(this._type)+" "+this._id;a&&(b+=" "+this._bounds.toString());return b};a._path=[];a._nextId=0;return a}();g.Node=N;var J=function(a){function b(){a.call(this);this._type=5;this._children=[]}__extends(b,a);b.prototype.getChildren=function(a){void 0===a&&(a=!1);return a?this._children.slice(0):this._children};b.prototype.childAt=function(a){return this._children[a]};
Object.defineProperty(b.prototype,"child",{get:function(){return this._children[0]},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"groupChild",{get:function(){return this._children[0]},enumerable:!0,configurable:!0});b.prototype.addChild=function(a){a._parent&&a._parent.removeChildAt(a._index);a._parent=this;a._index=this._children.length;this._children.push(a);this._propagateFlagsUp(12288);a._propagateFlagsDown(114688)};b.prototype.removeChildAt=function(a){var b=this._children[a];
this._children.splice(a,1);b._index=-1;b._parent=null;this._propagateFlagsUp(12288);b._propagateFlagsDown(114688)};b.prototype.clearChildren=function(){for(var a=0;a<this._children.length;a++){var b=this._children[a];b&&(b._index=-1,b._parent=null,b._propagateFlagsDown(114688))}this._children.length=0;this._propagateFlagsUp(12288)};b.prototype._propagateFlagsDown=function(a){if(!this.hasFlags(a)){this.setFlags(a);for(var b=this._children,c=0;c<b.length;c++)b[c]._propagateFlagsDown(a)}};b.prototype.getBounds=
function(a){void 0===a&&(a=!1);var b=this._bounds||(this._bounds=p.createEmpty());if(this.hasFlags(8192)){b.setEmpty();for(var c=this._children,d=p.allocate(),e=0;e<c.length;e++){var f=c[e];d.set(f.getBounds());f.getTransformMatrix().transformRectangleAABB(d);b.union(d)}d.free();this.removeFlags(8192)}return a?b.clone():b};b.prototype.getLayerBounds=function(a){if(!a)return this.getBounds();for(var b=p.createEmpty(),c=this._children,d=p.allocate(),e=0;e<c.length;e++){var f=c[e];d.set(f.getLayerBounds(a));
f.getTransformMatrix().transformRectangleAABB(d);b.union(d)}d.free();a&&this._layer&&this._layer.expandBounds(b);return b};return b}(N);g.Group=J;var D=function(){function a(c){this._node=c;this._matrix=b.createIdentity();this._colorMatrix=g.ColorMatrix.createIdentity();this._concatenatedMatrix=b.createIdentity();this._invertedConcatenatedMatrix=b.createIdentity();this._concatenatedColorMatrix=g.ColorMatrix.createIdentity()}a.prototype.setMatrix=function(a){this._matrix.isEqual(a)||(this._matrix.set(a),
this._node._propagateFlagsUp(12288),this._node._propagateFlagsDown(49152))};a.prototype.setColorMatrix=function(a){this._colorMatrix.set(a);this._node._propagateFlagsUp(4096);this._node._propagateFlagsDown(65536)};a.prototype.getMatrix=function(a){void 0===a&&(a=!1);return a?this._matrix.clone():this._matrix};a.prototype.hasColorMatrix=function(){return null!==this._colorMatrix};a.prototype.getColorMatrix=function(a){void 0===a&&(a=!1);null===this._colorMatrix&&(this._colorMatrix=g.ColorMatrix.createIdentity());
return a?this._colorMatrix.clone():this._colorMatrix};a.prototype.getConcatenatedMatrix=function(a){void 0===a&&(a=!1);if(this._node.hasFlags(16384))for(var c=this._node._findClosestAncestor(16384,!1),d=N._getAncestors(this._node,c),e=c?c.getTransform()._concatenatedMatrix.clone():b.createIdentity(),f=d.length-1;0<=f;f--){var c=d[f],l=c.getTransform();e.preMultiply(l._matrix);l._concatenatedMatrix.set(e);c.removeFlags(16384)}return a?this._concatenatedMatrix.clone():this._concatenatedMatrix};a.prototype.getInvertedConcatenatedMatrix=
function(a){void 0===a&&(a=!1);this._node.hasFlags(32768)&&(this.getConcatenatedMatrix().inverse(this._invertedConcatenatedMatrix),this._node.removeFlags(32768));return a?this._invertedConcatenatedMatrix.clone():this._invertedConcatenatedMatrix};a.prototype.toString=function(){return this._matrix.toString()};return a}();g.Transform=D;var A=function(){function a(b){this._node=b;this._mask=null;this._blendMode=u.Normal}Object.defineProperty(a.prototype,"filters",{get:function(){return this._filters},
set:function(a){this._filters=a;a.length&&this._node.invalidate()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"blendMode",{get:function(){return this._blendMode},set:function(a){this._blendMode=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"mask",{get:function(){return this._mask},set:function(a){this._mask!==a&&(this._node.invalidate(),this._mask&&this._mask.removeFlags(4));(this._mask=a)&&this._mask.setFlags(4)},enumerable:!0,configurable:!0});a.prototype.toString=
function(){return u[this._blendMode]};a.prototype.expandBounds=function(a){var b=this._filters;if(b)for(var c=0;c<b.length;c++)b[c].expandBounds(a)};return a}();g.Layer=A;a=function(a){function b(c){a.call(this);this._source=c;this._type=3;this._ratio=0}__extends(b,a);b.prototype.getBounds=function(a){void 0===a&&(a=!1);var b=this._bounds||(this._bounds=p.createEmpty());this.hasFlags(8192)&&(b.set(this._source.getBounds()),this.removeFlags(8192));return a?b.clone():b};Object.defineProperty(b.prototype,
"source",{get:function(){return this._source},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"ratio",{get:function(){return this._ratio},set:function(a){a!==this._ratio&&(this.invalidate(),this._ratio=a)},enumerable:!0,configurable:!0});b.prototype._propagateFlagsDown=function(a){this.setFlags(a)};b.prototype.getChildren=function(a){return[this._source]};return b}(N);g.Shape=a;a=function(){return function(){this.debug=!1;this.paintRenderable=!0;this.paintViewport=this.paintFlashing=
this.paintDirtyRegion=this.paintBounds=!1;this.clear=!0}}();g.RendererOptions=a;f=function(a){function b(c,d,e){a.call(this);this._container=c;this._stage=d;this._options=e;this._viewport=p.createSquare(1024);this._devicePixelRatio=1}__extends(b,a);Object.defineProperty(b.prototype,"viewport",{set:function(a){this._viewport.set(a)},enumerable:!0,configurable:!0});b.prototype.render=function(){throw void 0;};b.prototype.resize=function(){throw void 0;};b.prototype.screenShot=function(a,b,c){throw void 0;
};return b}(f);g.Renderer=f;f=function(a){function c(b,d,e){void 0===e&&(e=!1);a.call(this);this._preVisitor=new C;this._flags&=-2049;this._type=13;this._scaleMode=c.DEFAULT_SCALE;this._align=c.DEFAULT_ALIGN;this._content=new J;this._content._flags&=-2049;this.addChild(this._content);this.setFlags(4096);this.setBounds(new p(0,0,b,d));e?(this._dirtyRegion=new m(b,d),this._dirtyRegion.addDirtyRectangle(new p(0,0,b,d))):this._dirtyRegion=null;this._updateContentMatrix()}__extends(c,a);Object.defineProperty(c.prototype,
"dirtyRegion",{get:function(){return this._dirtyRegion},enumerable:!0,configurable:!0});c.prototype.setBounds=function(b){a.prototype.setBounds.call(this,b);this._updateContentMatrix();this._dispatchEvent(1);this._dirtyRegion&&(this._dirtyRegion=new m(b.w,b.h),this._dirtyRegion.addDirtyRectangle(b))};Object.defineProperty(c.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0});c.prototype.readyToRender=function(){this._preVisitor.isDirty=!1;this._preVisitor.start(this,
this._dirtyRegion);return this._preVisitor.isDirty?!0:!1};Object.defineProperty(c.prototype,"align",{get:function(){return this._align},set:function(a){this._align=a;this._updateContentMatrix()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(a){this._scaleMode=a;this._updateContentMatrix()},enumerable:!0,configurable:!0});c.prototype._updateContentMatrix=function(){if(this._scaleMode===c.DEFAULT_SCALE&&this._align===
c.DEFAULT_ALIGN)this._content.getTransform().setMatrix(new b(1,0,0,1,0,0));else{var a=this.getBounds(),d=this._content.getBounds(),e=a.w/d.w,f=a.h/d.h;switch(this._scaleMode){case 2:e=f=Math.max(e,f);break;case 4:e=f=1;break;case 1:break;default:e=f=Math.min(e,f)}var l;l=this._align&4?0:this._align&8?a.w-d.w*e:(a.w-d.w*e)/2;a=this._align&1?0:this._align&2?a.h-d.h*f:(a.h-d.h*f)/2;this._content.getTransform().setMatrix(new b(e,0,0,f,l,a))}};c.DEFAULT_SCALE=4;c.DEFAULT_ALIGN=5;return c}(J);g.Stage=f;
var d=g.Geometry.Point,p=g.Geometry.Rectangle,b=g.Geometry.Matrix,e=c.ArrayUtilities.indexOf,f=function(a){function b(){a.call(this);this._parents=[];this._renderableParents=[];this._invalidateEventListeners=null;this._flags&=-2049;this._type=33}__extends(b,a);Object.defineProperty(b.prototype,"parents",{get:function(){return this._parents},enumerable:!0,configurable:!0});b.prototype.addParent=function(a){e(this._parents,a);this._parents.push(a)};b.prototype.willRender=function(){for(var a=this._parents,
b=0;b<a.length;b++)for(var c=a[b];c;){if(c.isType(13))return!0;if(!c.hasFlags(1))break;c=c._parent}return!1};b.prototype.addRenderableParent=function(a){this._renderableParents.push(a)};b.prototype.wrap=function(){for(var a,b=this._parents,c=0;c<b.length;c++)if(a=b[c],!a._parent)return a;a=new g.Shape(this);this.addParent(a);return a};b.prototype.invalidate=function(){this.setFlags(4096);for(var a=this._parents,b=0;b<a.length;b++)a[b].invalidate();a=this._renderableParents;for(b=0;b<a.length;b++)a[b].invalidate();
if(a=this._invalidateEventListeners)for(b=0;b<a.length;b++)a[b](this)};b.prototype.addInvalidateEventListener=function(a){this._invalidateEventListeners||(this._invalidateEventListeners=[]);e(this._invalidateEventListeners,a);this._invalidateEventListeners.push(a)};b.prototype.getBounds=function(a){void 0===a&&(a=!1);return a?this._bounds.clone():this._bounds};b.prototype.getChildren=function(a){return null};b.prototype._propagateFlagsUp=function(a){if(0!==a&&!this.hasFlags(a))for(var b=0;b<this._parents.length;b++)this._parents[b]._propagateFlagsUp(a)};
b.prototype.render=function(a,b,c,d,e){};return b}(g.Node);g.Renderable=f;a=function(a){function b(c,d){a.call(this);this.setBounds(c);this.render=d}__extends(b,a);return b}(f);g.CustomRenderable=a;a=function(a){function b(c,d){a.call(this);this._flags=4352;this._lastPausedTime=this._lastTimeInvalidated=0;this._pauseHappening=this._seekHappening=!1;this._isDOMElement=!0;this.setBounds(new p(0,0,1,1));this._assetId=c;this._eventSerializer=d;var e=document.createElement("video"),f=this._handleVideoEvent.bind(this);
e.preload="metadata";e.addEventListener("play",f);e.addEventListener("pause",f);e.addEventListener("ended",f);e.addEventListener("loadeddata",f);e.addEventListener("progress",f);e.addEventListener("suspend",f);e.addEventListener("loadedmetadata",f);e.addEventListener("error",f);e.addEventListener("seeking",f);e.addEventListener("seeked",f);e.addEventListener("canplay",f);e.style.position="absolute";this._video=e;this._videoEventHandler=f;b._renderableVideos.push(this);"undefined"!==typeof registerInspectorAsset&&
registerInspectorAsset(-1,-1,this);this._state=1}__extends(b,a);Object.defineProperty(b.prototype,"video",{get:function(){return this._video},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0});b.prototype.play=function(){this._state=2;this._video.play()};b.prototype.pause=function(){this._state=3;this._video.pause()};b.prototype._handleVideoEvent=function(a){var b=null,c=this._video;switch(a.type){case "play":if(!this._pauseHappening)return;
a=7;break;case "pause":if(2===this._state){c.play();return}a=6;this._pauseHappening=!0;break;case "ended":this._state=4;this._notifyNetStream(3,b);a=4;break;case "loadeddata":this._pauseHappening=!1;this._notifyNetStream(2,b);this.play();return;case "canplay":if(this._pauseHappening)return;a=5;break;case "progress":a=10;break;case "suspend":return;case "loadedmetadata":a=1;b={videoWidth:c.videoWidth,videoHeight:c.videoHeight,duration:c.duration};break;case "error":a=11;b={code:c.error.code};break;
case "seeking":if(!this._seekHappening)return;a=8;break;case "seeked":if(!this._seekHappening)return;a=9;this._seekHappening=!1;break;default:return}this._notifyNetStream(a,b)};b.prototype._notifyNetStream=function(a,b){this._eventSerializer.sendVideoPlaybackEvent(this._assetId,a,b)};b.prototype.processControlRequest=function(a,b){var c=this._video;switch(a){case 1:c.src=b.url;this.play();this._notifyNetStream(0,null);break;case 9:c.paused&&c.play();break;case 2:c&&(b.paused&&!c.paused?(isNaN(b.time)?
this._lastPausedTime=c.currentTime:(0!==c.seekable.length&&(c.currentTime=b.time),this._lastPausedTime=b.time),this.pause()):!b.paused&&c.paused&&(this.play(),isNaN(b.time)||this._lastPausedTime===b.time||0===c.seekable.length||(c.currentTime=b.time)));break;case 3:c&&0!==c.seekable.length&&(this._seekHappening=!0,c.currentTime=b.time);break;case 4:return c?c.currentTime:0;case 5:return c?c.duration:0;case 6:c&&(c.volume=b.volume);break;case 7:if(!c)return 0;var d=-1;if(c.buffered)for(var e=0;e<c.buffered.length;e++)d=
Math.max(d,c.buffered.end(e));else d=c.duration;return Math.round(500*d);case 8:return c?Math.round(500*c.duration):0}};b.prototype.checkForUpdate=function(){this._lastTimeInvalidated!==this._video.currentTime&&(this._isDOMElement||this.invalidate());this._lastTimeInvalidated=this._video.currentTime};b.checkForVideoUpdates=function(){for(var a=b._renderableVideos,c=0;c<a.length;c++){var d=a[c];d.willRender()?(d._video.parentElement||d.invalidate(),d._video.style.zIndex=d.parents[0].depth+""):d._video.parentElement&&
d._dispatchEvent(2);a[c].checkForUpdate()}};b.prototype.render=function(a,b,c){(b=this._video)&&0<b.videoWidth&&a.drawImage(b,0,0,b.videoWidth,b.videoHeight,0,0,this._bounds.w,this._bounds.h)};b._renderableVideos=[];return b}(f);g.RenderableVideo=a;a=function(a){function b(c,d){a.call(this);this._flags=4352;this.properties={};this.setBounds(d);c instanceof HTMLCanvasElement?this._initializeSourceCanvas(c):this._sourceImage=c}__extends(b,a);b.FromDataBuffer=function(a,c,d){var e=document.createElement("canvas");
e.width=d.w;e.height=d.h;d=new b(e,d);d.updateFromDataBuffer(a,c);return d};b.FromNode=function(a,c,d,e,f){var l=document.createElement("canvas"),g=a.getBounds();l.width=g.w;l.height=g.h;l=new b(l,g);l.drawNode(a,c,d,e,f);return l};b.FromImage=function(a,c,d){return new b(a,new p(0,0,c,d))};b.prototype.updateFromDataBuffer=function(a,b){if(g.imageUpdateOption.value){var d=b.buffer;if(a!==c.ImageType.JPEG&&a!==c.ImageType.PNG&&a!==c.ImageType.GIF){var e=this._bounds,f=this._imageData;f&&f.width===
e.w&&f.height===e.h||(f=this._imageData=this._context.createImageData(e.w,e.h));g.imageConvertOption.value&&(d=new Int32Array(d),e=new Int32Array(f.data.buffer),c.ColorUtilities.convertImage(a,c.ImageType.StraightAlphaRGBA,d,e));this._ensureSourceCanvas();this._context.putImageData(f,0,0)}this.invalidate()}};b.prototype.readImageData=function(a){a.writeRawBytes(this.imageData.data)};b.prototype.render=function(a,b,c){this.renderSource?a.drawImage(this.renderSource,0,0):this._renderFallback(a)};b.prototype.drawNode=
function(a,b,c,d,e){c=g.Canvas2D;d=this.getBounds();(new c.Canvas2DRenderer(this._canvas,null)).renderNode(a,e||d,b)};b.prototype.mask=function(a){for(var b=this.imageData,d=new Int32Array(b.data.buffer),e=c.ColorUtilities.getUnpremultiplyTable(),f=0;f<a.length;f++){var l=a[f];if(0===l)d[f]=0;else if(255!==l){var g=d[f],h=g>>0&255,n=g>>8&255,g=g>>16&255,q=l<<8,h=e[q+Math.min(h,l)],n=e[q+Math.min(n,l)],g=e[q+Math.min(g,l)];d[f]=l<<24|g<<16|n<<8|h}}this._context.putImageData(b,0,0)};b.prototype._initializeSourceCanvas=
function(a){this._canvas=a;this._context=this._canvas.getContext("2d")};b.prototype._ensureSourceCanvas=function(){if(!this._canvas){var a=document.createElement("canvas"),b=this._bounds;a.width=b.w;a.height=b.h;this._initializeSourceCanvas(a)}};Object.defineProperty(b.prototype,"imageData",{get:function(){this._canvas||(this._ensureSourceCanvas(),this._context.drawImage(this._sourceImage,0,0),this._sourceImage=null);return this._context.getImageData(0,0,this._bounds.w,this._bounds.h)},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"renderSource",{get:function(){return this._canvas||this._sourceImage},enumerable:!0,configurable:!0});b.prototype._renderFallback=function(a){};return b}(f);g.RenderableBitmap=a;var w=function(){return function(a,b,c,d){this.type=a;this.style=b;this.smoothImage=c;this.strokeProperties=d;this.path=new Path2D}}();g.StyledPath=w;var G=function(){return function(a,b,c,d,e){this.thickness=a;this.scaleMode=b;this.capsStyle=c;this.jointsStyle=d;this.miterLimit=
e}}();g.StrokeProperties=G;var F=function(a){function d(b,c,e,f){a.call(this);this._flags=5632;this.properties={};this.setBounds(f);this._id=b;this._pathData=c;this._textures=e;e.length&&this.setFlags(256)}__extends(d,a);d.prototype.update=function(a,b,c){this.setBounds(c);this._pathData=a;this._paths=null;this._textures=b;this.setFlags(256);this.invalidate()};d.prototype.render=function(a,b,c,d,e){void 0===d&&(d=null);void 0===e&&(e=!1);a.fillStyle=a.strokeStyle="transparent";b=this._deserializePaths(this._pathData,
a,b);for(c=0;c<b.length;c++){var f=b[c];a.mozImageSmoothingEnabled=a.msImageSmoothingEnabled=a.imageSmoothingEnabled=f.smoothImage;if(0===f.type)d?d.addPath(f.path,a.currentTransform):(a.fillStyle=e?"#000000":f.style,a.fill(f.path,"evenodd"),a.fillStyle="transparent");else if(!d&&!e){a.strokeStyle=f.style;var l=1;f.strokeProperties&&(l=f.strokeProperties.scaleMode,a.lineWidth=f.strokeProperties.thickness,a.lineCap=f.strokeProperties.capsStyle,a.lineJoin=f.strokeProperties.jointsStyle,a.miterLimit=
f.strokeProperties.miterLimit);var g=a.lineWidth;(g=1===g||3===g)&&a.translate(.5,.5);a.flashStroke(f.path,l);g&&a.translate(-.5,-.5);a.strokeStyle="transparent"}}};d.prototype._deserializePaths=function(a,b,e){if(this._paths)return this._paths;e=this._paths=[];var f=null,l=null,g=0,h=0,q,x,t=!1,m=0,w=0,u=a.commands,y=a.coordinates,p=a.styles,r=p.position=0;a=a.commandsPosition;for(var D=0;D<a;D++)switch(u[D]){case 9:t&&f&&(f.lineTo(m,w),l&&l.lineTo(m,w));t=!0;g=m=y[r++]/20;h=w=y[r++]/20;f&&f.moveTo(g,
h);l&&l.moveTo(g,h);break;case 10:g=y[r++]/20;h=y[r++]/20;f&&f.lineTo(g,h);l&&l.lineTo(g,h);break;case 11:q=y[r++]/20;x=y[r++]/20;g=y[r++]/20;h=y[r++]/20;f&&f.quadraticCurveTo(q,x,g,h);l&&l.quadraticCurveTo(q,x,g,h);break;case 12:q=y[r++]/20;x=y[r++]/20;var A=y[r++]/20,F=y[r++]/20,g=y[r++]/20,h=y[r++]/20;f&&f.bezierCurveTo(q,x,A,F,g,h);l&&l.bezierCurveTo(q,x,A,F,g,h);break;case 1:f=this._createPath(0,c.ColorUtilities.rgbaToCSSStyle(p.readUnsignedInt()),!1,null,g,h);break;case 3:q=this._readBitmap(p,
b);f=this._createPath(0,q.style,q.smoothImage,null,g,h);break;case 2:f=this._createPath(0,this._readGradient(p,b),!1,null,g,h);break;case 4:f=null;break;case 5:l=c.ColorUtilities.rgbaToCSSStyle(p.readUnsignedInt());p.position+=1;q=p.readByte();x=d.LINE_CAPS_STYLES[p.readByte()];A=d.LINE_JOINTS_STYLES[p.readByte()];x=new G(y[r++]/20,q,x,A,p.readByte());6===u[D+1]?(D++,l=this._createPath(2,this._readGradient(p,b),!1,x,g,h)):6===u[D+1]?(D++,q=this._readBitmap(p,b),l=this._createPath(2,q.style,q.smoothImage,
x,g,h)):l=this._createPath(1,l,!1,x,g,h);break;case 8:l=null}t&&f&&(f.lineTo(m,w),l&&l.lineTo(m,w));this._pathData=null;return e};d.prototype._createPath=function(a,b,c,d,e,f){a=new w(a,b,c,d);this._paths.push(a);a.path.moveTo(e,f);return a.path};d.prototype._readMatrix=function(a){return new b(a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat())};d.prototype._readGradient=function(a,b){var d=a.readUnsignedByte(),e=2*a.readShort()/255,f=this._readMatrix(a),d=16===d?
b.createLinearGradient(-1,0,1,0):b.createRadialGradient(e,0,0,0,0,1);d.setTransform&&d.setTransform(f.toSVGMatrix());f=a.readUnsignedByte();for(e=0;e<f;e++){var l=a.readUnsignedByte()/255,g=c.ColorUtilities.rgbaToCSSStyle(a.readUnsignedInt());d.addColorStop(l,g)}a.position+=2;return d};d.prototype._readBitmap=function(a,b){var c=a.readUnsignedInt(),d=this._readMatrix(a),e=a.readBoolean()?"repeat":"no-repeat",f=a.readBoolean();(c=this._textures[c])?(e=b.createPattern(c.renderSource,e),e.setTransform(d.toSVGMatrix())):
e=null;return{style:e,smoothImage:f}};d.prototype._renderFallback=function(a){this.fillStyle||(this.fillStyle=c.ColorStyle.randomStyle());var b=this._bounds;a.save();a.beginPath();a.lineWidth=2;a.fillStyle=this.fillStyle;a.fillRect(b.x,b.y,b.w,b.h);a.restore()};d.LINE_CAPS_STYLES=["round","butt","square"];d.LINE_JOINTS_STYLES=["round","bevel","miter"];return d}(f);g.RenderableShape=F;a=function(a){function d(){a.apply(this,arguments);this._flags=5888;this._morphPaths=Object.create(null)}__extends(d,
a);d.prototype._deserializePaths=function(a,b,d){if(this._morphPaths[d])return this._morphPaths[d];var e=this._morphPaths[d]=[],f=null,l=null,g=0,h=0,n,q,x=!1,t=0,m=0,w=a.commands,u=a.coordinates,y=a.morphCoordinates,p=a.styles,D=a.morphStyles;p.position=0;var A=D.position=0;a=a.commandsPosition;for(var v=0;v<a;v++)switch(w[v]){case 9:x&&f&&(f.lineTo(t,m),l&&l.lineTo(t,m));x=!0;g=t=r(u[A],y[A++],d)/20;h=m=r(u[A],y[A++],d)/20;f&&f.moveTo(g,h);l&&l.moveTo(g,h);break;case 10:g=r(u[A],y[A++],d)/20;h=
r(u[A],y[A++],d)/20;f&&f.lineTo(g,h);l&&l.lineTo(g,h);break;case 11:n=r(u[A],y[A++],d)/20;q=r(u[A],y[A++],d)/20;g=r(u[A],y[A++],d)/20;h=r(u[A],y[A++],d)/20;f&&f.quadraticCurveTo(n,q,g,h);l&&l.quadraticCurveTo(n,q,g,h);break;case 12:n=r(u[A],y[A++],d)/20;q=r(u[A],y[A++],d)/20;var z=r(u[A],y[A++],d)/20,C=r(u[A],y[A++],d)/20,g=r(u[A],y[A++],d)/20,h=r(u[A],y[A++],d)/20;f&&f.bezierCurveTo(n,q,z,C,g,h);l&&l.bezierCurveTo(n,q,z,C,g,h);break;case 1:f=this._createMorphPath(0,d,c.ColorUtilities.rgbaToCSSStyle(B(p.readUnsignedInt(),
D.readUnsignedInt(),d)),!1,null,g,h);break;case 3:n=this._readMorphBitmap(p,D,d,b);f=this._createMorphPath(0,d,n.style,n.smoothImage,null,g,h);break;case 2:n=this._readMorphGradient(p,D,d,b);f=this._createMorphPath(0,d,n,!1,null,g,h);break;case 4:f=null;break;case 5:q=r(u[A],y[A++],d)/20;n=c.ColorUtilities.rgbaToCSSStyle(B(p.readUnsignedInt(),D.readUnsignedInt(),d));p.position+=1;var z=p.readByte(),C=F.LINE_CAPS_STYLES[p.readByte()],H=F.LINE_JOINTS_STYLES[p.readByte()];q=new G(q,z,C,H,p.readByte());
0<q.thickness&&(l=this._createMorphPath(1,d,n,!1,q,g,h));break;case 6:n=this._readMorphGradient(p,D,d,b);l=this._createMorphPath(2,d,n,!1,null,g,h);break;case 7:n=this._readMorphBitmap(p,D,d,b);l=this._createMorphPath(2,d,n.style,n.smoothImage,null,g,h);break;case 8:l=null}x&&f&&(f.lineTo(t,m),l&&l.lineTo(t,m));return e};d.prototype._createMorphPath=function(a,b,c,d,e,f,l){a=new w(a,c,d,e);this._morphPaths[b].push(a);a.path.moveTo(f,l);return a.path};d.prototype._readMorphMatrix=function(a,c,d){return new b(r(a.readFloat(),
c.readFloat(),d),r(a.readFloat(),c.readFloat(),d),r(a.readFloat(),c.readFloat(),d),r(a.readFloat(),c.readFloat(),d),r(a.readFloat(),c.readFloat(),d),r(a.readFloat(),c.readFloat(),d))};d.prototype._readMorphGradient=function(a,b,d,e){var f=a.readUnsignedByte(),l=2*a.readShort()/255,g=this._readMorphMatrix(a,b,d);e=16===f?e.createLinearGradient(-1,0,1,0):e.createRadialGradient(l,0,0,0,0,1);e.setTransform&&e.setTransform(g.toSVGMatrix());g=a.readUnsignedByte();for(f=0;f<g;f++){var l=r(a.readUnsignedByte()/
255,b.readUnsignedByte()/255,d),h=B(a.readUnsignedInt(),b.readUnsignedInt(),d),h=c.ColorUtilities.rgbaToCSSStyle(h);e.addColorStop(l,h)}a.position+=2;return e};d.prototype._readMorphBitmap=function(a,b,c,d){var e=a.readUnsignedInt();b=this._readMorphMatrix(a,b,c);c=a.readBoolean()?"repeat":"no-repeat";a=a.readBoolean();d=d.createPattern(this._textures[e]._canvas,c);d.setTransform(b.toSVGMatrix());return{style:d,smoothImage:a}};return d}(F);g.RenderableMorphShape=a;var t=function(){function a(){this.align=
this.leading=this.descent=this.ascent=this.width=this.y=this.x=0;this.runs=[]}a._getMeasureContext=function(){a._measureContext||(a._measureContext=document.createElement("canvas").getContext("2d"));return a._measureContext};a.prototype.addRun=function(b,c,d,e,f){if(d){var g=a._getMeasureContext();g.font=b;g=v(g,d,e);this.runs.push(new l(b,c,d,g,e,f));this.width+=g}};a.prototype.wrap=function(b){var c=[this],d=this.runs,e=this;e.width=0;e.runs=[];for(var f=a._getMeasureContext(),g=0;g<d.length;g++){var h=
d[g],x=h.text;h.text="";h.width=0;f.font=h.font;for(var t=b,m=x.split(/[\s.-]/),u=0,w=0;w<m.length;w++){var y=m[w],p=x.substr(u,y.length+1),r=h.letterSpacing,A=v(f,p,r);if(A>t){do if(h.text&&(e.runs.push(h),e.width+=h.width,h=new l(h.font,h.fillStyle,"",0,h.letterSpacing,h.underline),t=new a,t.y=e.y+e.descent+e.leading+e.ascent|0,t.ascent=e.ascent,t.descent=e.descent,t.leading=e.leading,t.align=e.align,c.push(t),e=t),t=b-A,0>t){for(var D=p.length,F=p;1<D&&!(D--,F=p.substr(0,D),A=v(f,F,r),A<=b););
h.text=F;h.width=A;p=p.substr(D);A=v(f,p,r)}while(p&&0>t)}else t-=A;h.text+=p;h.width+=A;u+=y.length+1}e.runs.push(h);e.width+=h.width}return c};a.prototype.toString=function(){return"TextLine {x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+(this.ascent+this.descent+this.leading)+"}"};return a}();g.TextLine=t;var l=function(){return function(a,b,c,d,e,f){void 0===a&&(a="");void 0===b&&(b="");void 0===c&&(c="");void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=!1);this.font=a;this.fillStyle=
b;this.text=c;this.width=d;this.letterSpacing=e;this.underline=f}}();g.TextRun=l;a=function(a){function e(c){a.call(this);this._flags=4352;this.properties={};this._textBounds=c.clone();this._textRunData=null;this._plainText="";this._borderColor=this._backgroundColor=0;this._matrix=b.createIdentity();this._coords=null;this._scrollV=1;this._scrollH=0;this.textRect=c.clone();this.lines=[];this.setBounds(c)}__extends(e,a);e.prototype.setBounds=function(b){a.prototype.setBounds.call(this,b);this._textBounds.set(b);
this.textRect.setElements(b.x+2,b.y+2,b.w-2,b.h-2)};e.prototype.setContent=function(a,b,c,d){this._textRunData=b;this._plainText=a;this._matrix.set(c);this._coords=d;this.lines=[]};e.prototype.setStyle=function(a,b,c,d){this._backgroundColor=a;this._borderColor=b;this._scrollV=c;this._scrollH=d};e.prototype.reflow=function(a,b){var d=this._textRunData;if(d){for(var e=this._bounds,f=e.w-4,l=this._plainText,g=this.lines,h=new t,n=0,q=0,x=0,m=0,u=-4294967295,w=-1;d.position<d.length;){var y=d.readInt(),
p=d.readInt(),A=d.readInt(),r=d.readUTF(),D=d.readInt(),F=d.readInt(),v=d.readInt();D>x&&(x=D);F>m&&(m=F);v>u&&(u=v);D=d.readBoolean();F="";d.readBoolean()&&(F+="italic ");D&&(F+="bold ");A=F+A+"px "+r+", AdobeBlank";r=d.readInt();r=c.ColorUtilities.rgbToHex(r);D=d.readInt();-1===w&&(w=D);d.readBoolean();d.readInt();d.readInt();d.readInt();D=d.readInt();d.readInt();for(var F=d.readBoolean(),G="",v=!1;!v;y++){var v=y>=p-1,z=l[y];if("\r"!==z&&"\n"!==z&&(G+=z,y<l.length-1))continue;h.addRun(A,r,G,D,
F);if(h.runs.length){g.length&&(n+=u);n+=x;h.y=n|0;n+=m;h.ascent=x;h.descent=m;h.leading=u;h.align=w;if(b&&h.width>f)for(h=h.wrap(f),G=0;G<h.length;G++){var C=h[G],n=C.y+C.descent+C.leading;g.push(C);C.width>q&&(q=C.width)}else g.push(h),h.width>q&&(q=h.width);h=new t}else n+=x+m+u;G="";if(v){m=x=0;u=-4294967295;w=-1;break}"\r"===z&&"\n"===l[y+1]&&y++}h.addRun(A,r,G,D,F)}d=l[l.length-1];"\r"!==d&&"\n"!==d||g.push(h);d=this.textRect;d.w=q;d.h=n;if(a){if(!b){f=q;q=e.w;switch(a){case 1:d.x=q-(f+4)>>
1;break;case 3:d.x=q-(f+4)}this._textBounds.setElements(d.x-2,d.y-2,d.w+4,d.h+4);e.w=f+4}e.x=d.x-2;e.h=n+4}else this._textBounds=e;for(y=0;y<g.length;y++)if(e=g[y],e.width<f)switch(e.align){case 1:e.x=f-e.width|0;break;case 2:e.x=(f-e.width)/2|0}this.invalidate()}};e.roundBoundPoints=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.x=Math.floor(c.x+.1)+.5;c.y=Math.floor(c.y+.1)+.5}};e.prototype.render=function(a){a.save();var d=this._textBounds;this._backgroundColor&&(a.fillStyle=c.ColorUtilities.rgbaToCSSStyle(this._backgroundColor),
a.fillRect(d.x,d.y,d.w,d.h));if(this._borderColor){a.strokeStyle=c.ColorUtilities.rgbaToCSSStyle(this._borderColor);a.lineCap="square";a.lineWidth=1;var f=e.absoluteBoundPoints,l=a.currentTransform;l?(d=d.clone(),(new b(l.a,l.b,l.c,l.d,l.e,l.f)).transformRectangle(d,f),a.setTransform(1,0,0,1,0,0)):(f[0].x=d.x,f[0].y=d.y,f[1].x=d.x+d.w,f[1].y=d.y,f[2].x=d.x+d.w,f[2].y=d.y+d.h,f[3].x=d.x,f[3].y=d.y+d.h);e.roundBoundPoints(f);d=new Path2D;d.moveTo(f[0].x,f[0].y);d.lineTo(f[1].x,f[1].y);d.lineTo(f[2].x,
f[2].y);d.lineTo(f[3].x,f[3].y);d.lineTo(f[0].x,f[0].y);a.stroke(d);l&&a.setTransform(l.a,l.b,l.c,l.d,l.e,l.f)}this._coords?this._renderChars(a):this._renderLines(a);a.restore()};e.prototype._renderChars=function(a){if(this._matrix){var b=this._matrix;a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty)}var b=this.lines,d=this._coords;d.position=0;for(var c="",e="",f=0;f<b.length;f++)for(var l=b[f].runs,g=0;g<l.length;g++){var h=l[g];h.font!==c&&(a.font=c=h.font);h.fillStyle!==e&&(a.fillStyle=e=h.fillStyle);for(var h=
h.text,n=0;n<h.length;n++){var q=d.readInt()/20,x=d.readInt()/20;a.fillText(h[n],q,x)}}};e.prototype._renderLines=function(a){var b=this._textBounds;a.beginPath();a.rect(b.x+2,b.y+2,b.w-4,b.h-4);a.clip();a.translate(b.x-this._scrollH+2,b.y+2);var d=this.lines,c=this._scrollV,e=0,f="",l="";a.textAlign="left";a.textBaseline="alphabetic";for(var g=0;g<d.length;g++){var h=d[g],n=h.x,q=h.y;if(g+1<c)e=q+h.descent+h.leading;else{q-=e;if(g+1-c&&q>b.h)break;for(var x=h.runs,t=0;t<x.length;t++){var m=x[t];
m.font!==f&&(a.font=f=m.font);m.fillStyle!==l&&(a.fillStyle=l=m.fillStyle);m.underline&&a.fillRect(n,q+h.descent/2|0,m.width,1);a.textAlign="left";a.textBaseline="alphabetic";if(0<m.letterSpacing)for(var u=m.text,w=0;w<u.length;w++)a.fillText(u[w],n,q),n+=v(a,u[w],m.letterSpacing);else a.fillText(m.text,n,q),n+=m.width}}}};e.absoluteBoundPoints=[new d(0,0),new d(0,0),new d(0,0),new d(0,0)];return e}(f);g.RenderableText=a;f=function(a){function b(d,c){a.call(this);this._flags=768;this.properties={};
this.setBounds(new p(0,0,d,c))}__extends(b,a);Object.defineProperty(b.prototype,"text",{get:function(){return this._text},set:function(a){this._text=a},enumerable:!0,configurable:!0});b.prototype.render=function(a,b,d){a.save();a.textBaseline="top";a.fillStyle="white";a.fillText(this.text,0,0);a.restore()};return b}(f);g.Label=f;var x=c.ColorUtilities.clampByte,f=function(){function a(){}a.prototype.expandBounds=function(a){};return a}();g.Filter=f;var y=[2,1/1.05,1/1.35,1/1.55,1/1.75,1/1.9,.5,1/
2.1,1/2.2,1/2.3,.4,1/3,1/3,1/3.5,1/3.5],a=function(a){function b(d,c,e){a.call(this);this.blurX=d;this.blurY=c;this.quality=e}__extends(b,a);b.prototype.expandBounds=function(a){H(a,this.quality,this.blurX,this.blurY,!0)};return b}(f);g.BlurFilter=a;a=function(a){function b(d,c,e,f,l,g,h,n,x,t,m){a.call(this);this.alpha=d;this.angle=c;this.blurX=e;this.blurY=f;this.color=l;this.distance=g;this.hideObject=h;this.inner=n;this.knockout=x;this.quality=t;this.strength=m}__extends(b,a);b.prototype.expandBounds=
function(a){H(a,this.quality,this.blurX,this.blurY,!1);if(this.distance){var b=this.angle*Math.PI/180,d=Math.cos(b)*this.distance,c=Math.sin(b)*this.distance,b=a.x+(0<=d?0:Math.floor(d)),d=a.x+a.w+Math.ceil(Math.abs(d)),e=a.y+(0<=c?0:Math.floor(c)),c=a.y+a.h+Math.ceil(Math.abs(c));a.x=b;a.w=d-b;a.y=e;a.h=c-e}};return b}(f);g.DropshadowFilter=a;a=function(a){function b(d,c,e,f,l,g,h,n){a.call(this);this.alpha=d;this.blurX=c;this.blurY=e;this.color=f;this.inner=l;this.knockout=g;this.quality=h;this.strength=
n}__extends(b,a);b.prototype.expandBounds=function(a){this.inner||H(a,this.quality,this.blurX,this.blurY,!1)};return b}(f);g.GlowFilter=a;f=function(a){function b(d){a.call(this);this._data=new Float32Array(d);this._type=0}__extends(b,a);b.prototype.clone=function(){var a=new b(this._data);a._type=this._type;return a};b.prototype.set=function(a){this._data.set(a._data);this._type=a._type};b.prototype.toWebGLMatrix=function(){return new Float32Array(this._data)};b.prototype.asWebGLMatrix=function(){return this._data.subarray(0,
16)};b.prototype.asWebGLVector=function(){return this._data.subarray(16,20)};b.prototype.isIdentity=function(){if(this._type&1)return!0;var a=this._data;return 1==a[0]&&0==a[1]&&0==a[2]&&0==a[3]&&0==a[4]&&1==a[5]&&0==a[6]&&0==a[7]&&0==a[8]&&0==a[9]&&1==a[10]&&0==a[11]&&0==a[12]&&0==a[13]&&0==a[14]&&1==a[15]&&0==a[16]&&0==a[17]&&0==a[18]&&0==a[19]};b.createIdentity=function(){var a=new b([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0]);a._type=1;return a};b.prototype.setMultipliersAndOffsets=function(a,
b,d,c,e,f,l,g){for(var h=this._data,n=0;n<h.length;n++)h[n]=0;h[0]=a;h[5]=b;h[10]=d;h[15]=c;h[16]=e/255;h[17]=f/255;h[18]=l/255;h[19]=g/255;this._type=0};b.prototype.transformRGBA=function(a){var b=a>>24&255,d=a>>16&255,c=a>>8&255,e=a&255,f=this._data;a=x(b*f[0]+d*f[1]+c*f[2]+e*f[3]+255*f[16]);var l=x(b*f[4]+d*f[5]+c*f[6]+e*f[7]+255*f[17]),g=x(b*f[8]+d*f[9]+c*f[10]+e*f[11]+255*f[18]),b=x(b*f[12]+d*f[13]+c*f[14]+e*f[15]+255*f[19]);return a<<24|l<<16|g<<8|b};b.prototype.multiply=function(a){if(!(a._type&
1)){var b=this._data,d=a._data;a=b[0];var c=b[1],e=b[2],f=b[3],l=b[4],g=b[5],h=b[6],n=b[7],q=b[8],x=b[9],t=b[10],m=b[11],u=b[12],w=b[13],y=b[14],p=b[15],A=b[16],r=b[17],D=b[18],F=b[19],v=d[0],G=d[1],C=d[2],z=d[3],H=d[4],J=d[5],B=d[6],E=d[7],N=d[8],S=d[9],da=d[10],ea=d[11],fa=d[12],ga=d[13],ha=d[14],ia=d[15],ja=d[16],ka=d[17],la=d[18],d=d[19];b[0]=a*v+l*G+q*C+u*z;b[1]=c*v+g*G+x*C+w*z;b[2]=e*v+h*G+t*C+y*z;b[3]=f*v+n*G+m*C+p*z;b[4]=a*H+l*J+q*B+u*E;b[5]=c*H+g*J+x*B+w*E;b[6]=e*H+h*J+t*B+y*E;b[7]=f*H+n*
J+m*B+p*E;b[8]=a*N+l*S+q*da+u*ea;b[9]=c*N+g*S+x*da+w*ea;b[10]=e*N+h*S+t*da+y*ea;b[11]=f*N+n*S+m*da+p*ea;b[12]=a*fa+l*ga+q*ha+u*ia;b[13]=c*fa+g*ga+x*ha+w*ia;b[14]=e*fa+h*ga+t*ha+y*ia;b[15]=f*fa+n*ga+m*ha+p*ia;b[16]=a*ja+l*ka+q*la+u*d+A;b[17]=c*ja+g*ka+x*la+w*d+r;b[18]=e*ja+h*ka+t*la+y*d+D;b[19]=f*ja+n*ka+m*la+p*d+F;this._type=0}};Object.defineProperty(b.prototype,"alphaMultiplier",{get:function(){return this._data[15]},enumerable:!0,configurable:!0});b.prototype.hasOnlyAlphaMultiplier=function(){var a=
this._data;return 1==a[0]&&0==a[1]&&0==a[2]&&0==a[3]&&0==a[4]&&1==a[5]&&0==a[6]&&0==a[7]&&0==a[8]&&0==a[9]&&1==a[10]&&0==a[11]&&0==a[12]&&0==a[13]&&0==a[14]&&0==a[16]&&0==a[17]&&0==a[18]&&0==a[19]};b.prototype.equals=function(a){if(!a)return!1;if(this._type===a._type&&1===this._type)return!0;var b=this._data;a=a._data;for(var d=0;20>d;d++)if(.001<Math.abs(b[d]-a[d]))return!1;return!0};b.prototype.toSVGFilterMatrix=function(){var a=this._data;return[a[0],a[4],a[8],a[12],a[16],a[1],a[5],a[9],a[13],
a[17],a[2],a[6],a[10],a[14],a[18],a[3],a[7],a[11],a[15],a[19]].join(" ")};return b}(f);g.ColorMatrix=f;(function(a){function b(a,d){var c=a/2;switch(d){case 0:return 0;case 1:return c/2.7;case 2:return c/1.28;default:return c}}function d(a){var b="source-over";switch(a){case g.BlendMode.Multiply:b="multiply";break;case g.BlendMode.Add:case g.BlendMode.Screen:b="screen";break;case g.BlendMode.Lighten:b="lighten";break;case g.BlendMode.Darken:b="darken";break;case g.BlendMode.Difference:b="difference";
break;case g.BlendMode.Overlay:b="overlay";break;case g.BlendMode.HardLight:b="hard-light";break;case g.BlendMode.Alpha:b="destination-in";break;case g.BlendMode.Erase:b="destination-out"}return b}var e=CanvasRenderingContext2D.prototype.save,f=CanvasRenderingContext2D.prototype.clip,l=CanvasRenderingContext2D.prototype.fill,h=CanvasRenderingContext2D.prototype.stroke,x=CanvasRenderingContext2D.prototype.restore,t=CanvasRenderingContext2D.prototype.beginPath;a.notifyReleaseChanged=function(){CanvasRenderingContext2D.prototype.save=
e;CanvasRenderingContext2D.prototype.clip=f;CanvasRenderingContext2D.prototype.fill=l;CanvasRenderingContext2D.prototype.stroke=h;CanvasRenderingContext2D.prototype.restore=x;CanvasRenderingContext2D.prototype.beginPath=t};CanvasRenderingContext2D.prototype.enterBuildingClippingRegion=function(){this.buildingClippingRegionDepth||(this.buildingClippingRegionDepth=0);this.buildingClippingRegionDepth++};CanvasRenderingContext2D.prototype.leaveBuildingClippingRegion=function(){this.buildingClippingRegionDepth--};
var m=c.NumberUtilities.clamp;navigator.userAgent.indexOf("Firefox");var u=function(){function a(){}a._prepareSVGFilters=function(){if(!a._svgBlurFilter){var b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.setAttribute("style","display:block;width:0px;height:0px");var d=document.createElementNS("http://www.w3.org/2000/svg","defs"),c=document.createElementNS("http://www.w3.org/2000/svg","filter");c.setAttribute("id","svgBlurFilter");var e=document.createElementNS("http://www.w3.org/2000/svg",
"feGaussianBlur");e.setAttribute("stdDeviation","0 0");c.appendChild(e);d.appendChild(c);a._svgBlurFilter=e;c=document.createElementNS("http://www.w3.org/2000/svg","filter");c.setAttribute("id","svgDropShadowFilter");e=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");e.setAttribute("in","SourceAlpha");e.setAttribute("stdDeviation","3");c.appendChild(e);a._svgDropshadowFilterBlur=e;e=document.createElementNS("http://www.w3.org/2000/svg","feOffset");e.setAttribute("dx","0");e.setAttribute("dy",
"0");e.setAttribute("result","offsetblur");c.appendChild(e);a._svgDropshadowFilterOffset=e;e=document.createElementNS("http://www.w3.org/2000/svg","feFlood");e.setAttribute("flood-color","rgba(0,0,0,1)");c.appendChild(e);a._svgDropshadowFilterFlood=e;e=document.createElementNS("http://www.w3.org/2000/svg","feComposite");e.setAttribute("in2","offsetblur");e.setAttribute("operator","in");c.appendChild(e);e=document.createElementNS("http://www.w3.org/2000/svg","feComposite");e.setAttribute("in2","SourceAlpha");
e.setAttribute("operator","out");e.setAttribute("result","outer");c.appendChild(e);var e=document.createElementNS("http://www.w3.org/2000/svg","feMerge"),f=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");e.appendChild(f);f=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");e.appendChild(f);a._svgDropshadowMergeNode=f;c.appendChild(e);d.appendChild(c);c=document.createElementNS("http://www.w3.org/2000/svg","filter");c.setAttribute("id","svgColorMatrixFilter");
f=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");f.setAttribute("color-interpolation-filters","sRGB");f.setAttribute("in","SourceGraphic");f.setAttribute("type","matrix");c.appendChild(f);e=document.createElementNS("http://www.w3.org/2000/svg","feComposite");e.setAttribute("in2","SourceAlpha");e.setAttribute("operator","in");c.appendChild(e);d.appendChild(c);a._svgColorMatrixFilter=f;b.appendChild(d);document.documentElement.appendChild(b)}};a._applyFilter=function(d,e,f){if(a._svgFiltersAreSupported)if(a._prepareSVGFilters(),
a._removeFilter(e),f instanceof g.BlurFilter){var l=b(d,f.quality);a._svgBlurFilter.setAttribute("stdDeviation",f.blurX*l+" "+f.blurY*l);e.filter="url(#svgBlurFilter)"}else f instanceof g.DropshadowFilter?(l=b(d,f.quality),a._svgDropshadowFilterBlur.setAttribute("stdDeviation",f.blurX*l+" "+f.blurY*l),a._svgDropshadowFilterOffset.setAttribute("dx",String(Math.cos(f.angle*Math.PI/180)*f.distance*d)),a._svgDropshadowFilterOffset.setAttribute("dy",String(Math.sin(f.angle*Math.PI/180)*f.distance*d)),
a._svgDropshadowFilterFlood.setAttribute("flood-color",c.ColorUtilities.rgbaToCSSStyle(f.color<<8|Math.round(255*f.alpha))),a._svgDropshadowMergeNode.setAttribute("in",f.knockout?"outer":"SourceGraphic"),e.filter="url(#svgDropShadowFilter)"):f instanceof g.ColorMatrix&&(a._svgColorMatrixFilter.setAttribute("values",f.toSVGFilterMatrix()),e.filter="url(#svgColorMatrixFilter)")};a._removeFilter=function(a){a.filter="none"};a._applyColorMatrix=function(b,d){d.isIdentity()?(b.globalAlpha=1,b.globalColorMatrix=
null):d.hasOnlyAlphaMultiplier()?(b.globalAlpha=m(d.alphaMultiplier,0,1),b.globalColorMatrix=null):(b.globalAlpha=1,a._svgFiltersAreSupported?(a._applyFilter(1,b,d),b.globalColorMatrix=null):b.globalColorMatrix=d)};a._svgFiltersAreSupported=!!Object.getOwnPropertyDescriptor(CanvasRenderingContext2D.prototype,"filter");return a}();a.Filters=u;g.filters&&u._svgFiltersAreSupported&&("registerScratchCanvas"in window||(window.registerScratchCanvas=function(a){a.style.display="none";document.body.appendChild(a)}));
var w=function(){function a(b,d,c,e){this.surface=b;this.region=d;this.w=c;this.h=e}a.prototype.free=function(){this.surface.free(this)};a._ensureCopyCanvasSize=function(b,d){var e;if(a._copyCanvasContext){if(e=a._copyCanvasContext.canvas,e.width<b||e.height<d)e.width=c.IntegerUtilities.nearestPowerOfTwo(b),e.height=c.IntegerUtilities.nearestPowerOfTwo(d)}else e=document.createElement("canvas"),"undefined"!==typeof registerScratchCanvas&&registerScratchCanvas(e),e.width=c.IntegerUtilities.nearestPowerOfTwo(b),
e.height=c.IntegerUtilities.nearestPowerOfTwo(d),a._copyCanvasContext=e.getContext("2d")};a.prototype.draw=function(b,c,e,f,l,h,n,q,x){this.context.setTransform(1,0,0,1,0,0);var t,m,w=0,y=0;b.context.canvas===this.context.canvas?(a._ensureCopyCanvasSize(f,l),m=a._copyCanvasContext,m.clearRect(0,0,f,l),m.drawImage(b.surface.canvas,b.region.x,b.region.y,f,l,0,0,f,l),t=m,y=w=0):(t=b.surface.context,w=b.region.x,y=b.region.y);a:switch(n){case g.BlendMode.Alpha:b=!0;break a;default:b=!1}b&&(this.context.save(),
this.context.beginPath(),this.context.rect(c,e,f,l),this.context.clip());this.context.globalAlpha=1;this.context.globalCompositeOperation=d(n);if(q){h&&!h.isIdentity()&&(q=q.concat(h));h=0;if(1<q.length){var p,A,r;m?(n=m,m=t,t=n):(a._ensureCopyCanvasSize(f,l),m=a._copyCanvasContext,A=p=0);for(;h<q.length-1;h++)m.clearRect(0,0,f,l),u._applyFilter(x,m,q[h]),m.drawImage(t.canvas,w,y,f,l,p,A,f,l),u._removeFilter(m),n=m,A=w,r=y,m=t,t=n,y=w=p,p=A,A=r;u._removeFilter(t);u._removeFilter(m)}u._applyFilter(x,
this.context,q[h])}this.context.drawImage(t.canvas,w,y,f,l,c,e,f,l);this.context.globalCompositeOperation=d(g.BlendMode.Normal);u._removeFilter(this.context);b&&this.context.restore()};Object.defineProperty(a.prototype,"context",{get:function(){return this.surface.context},enumerable:!0,configurable:!0});a.prototype.resetTransform=function(){this.surface.context.setTransform(1,0,0,1,0,0)};a.prototype.reset=function(){var a=this.surface.context;a.setTransform(1,0,0,1,0,0);a.fillStyle="#000000";a.strokeStyle=
"#000000";a.globalAlpha=1;a.globalColorMatrix=null;a.globalCompositeOperation=d(g.BlendMode.Normal)};a.prototype.fill=function(a){var b=this.surface.context,d=this.region;b.fillStyle=a;b.fillRect(d.x,d.y,d.w,d.h)};a.prototype.clear=function(a){var b=this.surface.context,d=this.region;a||(a=d);b.clearRect(a.x,a.y,a.w,a.h)};return a}();a.Canvas2DSurfaceRegion=w;var y=function(){function a(b,d){this.canvas=b;this.context=b.getContext("2d");this.w=b.width;this.h=b.height;this._regionAllocator=d}a.prototype.allocate=
function(a,b){var d=this._regionAllocator.allocate(a,b);return d?new w(this,d,a,b):null};a.prototype.free=function(a){this._regionAllocator.free(a.region)};return a}();a.Canvas2DSurface=y})(g.Canvas2D||(g.Canvas2D={}))})(c.GFX||(c.GFX={}))})(Shumway||(Shumway={}));__extends=this&&this.__extends||function(c,g){function E(){this.constructor=c}for(var r in g)g.hasOwnProperty(r)&&(c[r]=g[r]);E.prototype=g.prototype;c.prototype=new E};
(function(c){(function(g){(function(b){var u=c.Debug.assert,f=c.GFX.Geometry.Rectangle,a=c.GFX.Geometry.Point,h=c.GFX.Geometry.Matrix,p=c.GFX.BlendMode,r=c.NumberUtilities.clamp,v=c.NumberUtilities.pow2,D=function(){return function(a,b){this.surfaceRegion=a;this.scale=b}}();b.MipMapLevel=D;var A=function(){function a(b,d,c,e){this._node=d;this._levels=[];this._surfaceRegionAllocator=c;this._size=e;this._renderer=b}a.prototype.getLevel=function(a){a=Math.max(a.getAbsoluteScaleX(),a.getAbsoluteScaleY());
var b=0;1!==a&&(b=r(Math.round(Math.log(a)/Math.LN2),-5,3));this._node.hasFlags(512)||(b=r(b,-5,0));a=v(b);var d=5+b,b=this._levels[d];if(!b){var c=this._node.getBounds().clone();c.scale(a,a);c.snap();var f=this._surfaceRegionAllocator.allocate(c.w,c.h,null),g=f.region,b=this._levels[d]=new D(f,a),d=new e(f);d.clip.set(g);d.matrix.setElements(a,0,0,a,g.x-c.x,g.y-c.y);d.flags|=64;this._renderer.renderNodeWithState(this._node,d);d.free()}return b};return a}();b.MipMap=A;var d=function(a){function b(){a.apply(this,
arguments);this.blending=this.imageSmoothing=this.snapToDevicePixels=!0;this.debugLayers=!1;this.filters=this.masking=!0;this.cacheShapes=!1;this.cacheShapesMaxSize=256;this.cacheShapesThreshold=16;this.alpha=!1}__extends(b,a);return b}(g.RendererOptions);b.Canvas2DRendererOptions=d;f.createMaxI16();var e=function(a){function b(d){a.call(this);this.clip=f.createEmpty();this.clipList=[];this.clipPath=null;this.flags=0;this.target=null;this.matrix=h.createIdentity();this.colorMatrix=g.ColorMatrix.createIdentity();
b.allocationCount++;this.target=d}__extends(b,a);b.prototype.set=function(a){this.clip.set(a.clip);this.clipPath=a.clipPath;this.target=a.target;this.matrix.set(a.matrix);this.colorMatrix.set(a.colorMatrix);this.flags=a.flags;c.ArrayUtilities.copyFrom(this.clipList,a.clipList)};b.prototype.clone=function(){var a=b.allocate();a||(a=new b(this.target));a.set(this);return a};b.allocate=function(){var a=b._dirtyStack,d=null;a.length&&(d=a.pop());return d};b.prototype.free=function(){this.clipPath=null;
b._dirtyStack.push(this)};b.prototype.transform=function(a){var b=this.clone();b.matrix.preMultiply(a.getMatrix());a.hasColorMatrix()&&b.colorMatrix.multiply(a.getColorMatrix());return b};b.prototype.hasFlags=function(a){return(this.flags&a)===a};b.prototype.removeFlags=function(a){this.flags&=~a};b.prototype.toggleFlags=function(a,b){this.flags=b?this.flags|a:this.flags&~a};b.prototype.beginClipPath=function(a){this.target.context.save();this.clipPath=new Path2D};b.prototype.applyClipPath=function(){var a=
this.target.context;a.setTransform(1,0,0,1,0,0);a.clip(this.clipPath);var b=this.matrix;a.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty)};b.prototype.closeClipPath=function(){this.target.context.restore()};b.allocationCount=0;b._dirtyStack=[];return b}(g.State);b.RenderState=e;var w=function(){function a(){this.culledNodes=this.groups=this.shapes=this._count=0}a.prototype.enter=function(a){this._count++};a.prototype.leave=function(){};return a}();b.FrameInfo=w;var G=function(r){function t(a,b,c){void 0===
c&&(c=new d);r.call(this,a,b,c);this._visited=0;this._frameInfo=new w;this._fontSize=0;this._layers=[];if(a instanceof HTMLCanvasElement){var e=a;this._viewport=new f(0,0,e.width,e.height);this._target=this._createTarget(e)}else{this._addLayer("Background Layer");c=this._addLayer("Canvas Layer");e=document.createElement("canvas");c.appendChild(e);this._viewport=new f(0,0,a.scrollWidth,a.scrollHeight);var g=this;b.addEventListener(1,function(){g._onStageBoundsChanged(e)});this._onStageBoundsChanged(e)}t._prepareSurfaceAllocators()}
__extends(t,r);t.prototype._addLayer=function(a){a=document.createElement("div");a.style.position="absolute";a.style.overflow="hidden";a.style.width="100%";a.style.height="100%";a.style.zIndex=this._layers.length+"";this._container.appendChild(a);this._layers.push(a);return a};Object.defineProperty(t.prototype,"_backgroundVideoLayer",{get:function(){return this._layers[0]},enumerable:!0,configurable:!0});t.prototype._createTarget=function(a){return new b.Canvas2DSurfaceRegion(new b.Canvas2DSurface(a),
new g.RegionAllocator.Region(0,0,a.width,a.height),a.width,a.height)};t.prototype._onStageBoundsChanged=function(a){var b=this._stage.getBounds(!0);b.snap();for(var d=this._devicePixelRatio=window.devicePixelRatio||1,c=b.w/d+"px",d=b.h/d+"px",e=0;e<this._layers.length;e++){var f=this._layers[e];f.style.width=c;f.style.height=d}a.width=b.w;a.height=b.h;a.style.position="absolute";a.style.width=c;a.style.height=d;this._target=this._createTarget(a);this._fontSize=10*this._devicePixelRatio};t._prepareSurfaceAllocators=
function(){t._initializedCaches||(t._surfaceCache=new g.SurfaceRegionAllocator.SimpleAllocator(function(a,d){var c=document.createElement("canvas");"undefined"!==typeof registerScratchCanvas&&registerScratchCanvas(c);var e=Math.max(1024,a),f=Math.max(1024,d);c.width=e;c.height=f;var h=null,h=512<=a||512<=d?new g.RegionAllocator.GridAllocator(e,f,e,f):new g.RegionAllocator.BucketAllocator(e,f);return new b.Canvas2DSurface(c,h)}),t._shapeCache=new g.SurfaceRegionAllocator.SimpleAllocator(function(a,
d){var c=document.createElement("canvas");"undefined"!==typeof registerScratchCanvas&&registerScratchCanvas(c);c.width=1024;c.height=1024;var e=e=new g.RegionAllocator.CompactAllocator(1024,1024);return new b.Canvas2DSurface(c,e)}),t._initializedCaches=!0)};t.prototype.render=function(){var a=this._stage,b=this._target,d=this._options,c=this._viewport;b.reset();b.context.save();b.context.beginPath();b.context.rect(c.x,c.y,c.w,c.h);b.context.clip();this._renderStageToTarget(b,a,c);b.reset();d.paintViewport&&
(b.context.beginPath(),b.context.rect(c.x,c.y,c.w,c.h),b.context.strokeStyle="#FF4981",b.context.lineWidth=2,b.context.stroke());b.context.restore()};t.prototype.renderNode=function(a,b,d){var c=new e(this._target);c.clip.set(b);c.flags=256;c.matrix.set(d);a.visit(this,c);c.free()};t.prototype.renderNodeWithState=function(a,b){a.visit(this,b)};t.prototype._renderWithCache=function(a,b){var d=b.matrix,c=a.getBounds();if(c.isEmpty())return!1;var e=this._options.cacheShapesMaxSize,f=Math.max(d.getAbsoluteScaleX(),
d.getAbsoluteScaleY()),g=!!(b.flags&16),h=!!(b.flags&8);if(b.hasFlags(256)){if(h||g||!b.colorMatrix.isIdentity()||a.hasFlags(256)||100<this._options.cacheShapesThreshold||c.w*f>e||c.h*f>e)return!1;(f=a.properties.mipMap)||(f=a.properties.mipMap=new A(this,a,t._shapeCache,e));g=f.getLevel(d);e=g.surfaceRegion;f=e.region;return g?(g=b.target.context,g.imageSmoothingEnabled=g.mozImageSmoothingEnabled=!0,g.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),g.drawImage(e.surface.canvas,f.x,f.y,f.w,f.h,c.x,c.y,c.w,
c.h),!0):!1}};t.prototype._intersectsClipList=function(a,b){var d=a.getBounds(!0),c=!1;b.matrix.transformRectangleAABB(d);b.clip.intersects(d)&&(c=!0);var e=b.clipList;if(c&&e.length)for(var c=!1,f=0;f<e.length;f++)if(d.intersects(e[f])){c=!0;break}d.free();return c};t.prototype.visitGroup=function(a,b){this._frameInfo.groups++;a.getBounds();if((!a.hasFlags(4)||b.flags&4)&&a.hasFlags(1)){var d=b.flags&1;if(!d&&((a.getLayer().blendMode!==p.Normal||a.getLayer().mask)&&this._options.blending||a.getLayer().filters&&
this._options.filters))b=b.clone(),b.flags|=1,this._renderLayer(a,b),b.free();else if(d&&b.removeFlags(1),this._intersectsClipList(a,b))for(var d=null,c=a.getChildren(),e=0;e<c.length;e++){var f=c[e],g=f.getTransform(),h=b.transform(g);h.toggleFlags(4096,f.hasFlags(64));if(0<f.clip){d=d||new Uint8Array(c.length);d[f.clip+e]++;var m=h.clone();m.flags|=16;m.beginClipPath(g.getMatrix());f.visit(this,m);m.applyClipPath();m.free()}else f.visit(this,h);if(d&&0<d[e])for(;d[e]--;)b.closeClipPath();h.free()}else this._frameInfo.culledNodes++;
this._renderDebugInfo(a,b)}};t.prototype._renderDebugInfo=function(a,b){if(b.flags&1024){var d=b.target.context,e=a.getBounds(!0),f=a.properties.style;f||(f=a.properties.style=c.ColorStyle.randomStyle());d.strokeStyle=f;b.matrix.transformRectangleAABB(e);d.setTransform(1,0,0,1,0,0);e.free();e=a.getBounds();f=t._debugPoints;b.matrix.transformRectangle(e,f);d.lineWidth=1;d.beginPath();d.moveTo(f[0].x,f[0].y);d.lineTo(f[1].x,f[1].y);d.lineTo(f[2].x,f[2].y);d.lineTo(f[3].x,f[3].y);d.lineTo(f[0].x,f[0].y);
d.stroke()}};t.prototype.visitStage=function(a,b){var d=b.target.context,c=a.getBounds(!0);b.matrix.transformRectangleAABB(c);c.intersect(b.clip);b.target.reset();b=b.clone();this._options.clear&&b.target.clear(b.clip);a.hasFlags(2)||!a.color||b.flags&32||(this._container.style.backgroundColor=a.color.toCSSStyle());this.visitGroup(a,b);a.dirtyRegion&&(d.restore(),b.target.reset(),d.globalAlpha=.4,b.hasFlags(2048)&&a.dirtyRegion.render(b.target.context),a.dirtyRegion.clear());b.free()};t.prototype.visitShape=
function(a,d){if(this._intersectsClipList(a,d)){var c=d.matrix;d.flags&8192&&(c=c.clone(),c.snap());var e=d.target.context;b.Filters._applyColorMatrix(e,d.colorMatrix);a.source instanceof g.RenderableVideo?this.visitRenderableVideo(a.source,d):0<e.globalAlpha&&this.visitRenderable(a.source,d,a.ratio);d.flags&8192&&c.free();b.Filters._removeFilter(e)}};t.prototype.visitRenderableVideo=function(a,b){if(a.video&&a.video.videoWidth){var d=this._devicePixelRatio,e=b.matrix.clone();e.scale(1/d,1/d);var d=
a.getBounds(),f=c.GFX.Geometry.Matrix.createIdentity();f.scale(d.w/a.video.videoWidth,d.h/a.video.videoHeight);e.preMultiply(f);f.free();d=e.toCSSTransform();a.video.style.transformOrigin="0 0";a.video.style.transform=d;var g=this._backgroundVideoLayer;g!==a.video.parentElement&&(g.appendChild(a.video),a.addEventListener(2,function I(a){g.removeChild(a.video);a.removeEventListener(2,I)}));e.free()}};t.prototype.visitRenderable=function(a,b,d){var c=a.getBounds();if(!(b.flags&32||c.isEmpty())){if(b.hasFlags(64))b.removeFlags(64);
else if(this._renderWithCache(a,b))return;var e=b.matrix,c=b.target.context,f=!!(b.flags&16),g=!!(b.flags&8);c.setTransform(e.a,e.b,e.c,e.d,e.tx,e.ty);this._frameInfo.shapes++;c.imageSmoothingEnabled=c.mozImageSmoothingEnabled=b.hasFlags(4096);e=a.properties.renderCount||0;a.properties.renderCount=++e;a.render(c,d,null,f?b.clipPath:null,g)}};t.prototype._renderLayer=function(a,b){var d=a.getLayer(),c=d.mask;if(c){var e=!a.hasFlags(16)||!c.hasFlags(16);this._renderWithMask(a,c,d.blendMode,e,b)}else{c=
f.allocate();if(e=this._renderToTemporarySurface(a,a.getLayerBounds(!!this._options.filters),b,c,b.target.surface))b.target.draw(e,c.x,c.y,c.w,c.h,b.colorMatrix,this._options.blending?d.blendMode:p.Normal,this._options.filters?d.filters:null,this._devicePixelRatio),e.free();c.free()}};t.prototype._renderWithMask=function(a,b,d,c,e){var g=b.getTransform().getConcatenatedMatrix(!0);b.parent||(g=g.scale(this._devicePixelRatio,this._devicePixelRatio));var h=a.getBounds().clone();e.matrix.transformRectangleAABB(h);
h.snap();if(!h.isEmpty()){var m=b.getBounds().clone();g.transformRectangleAABB(m);m.snap();if(!m.isEmpty()){var u=e.clip.clone();u.intersect(h);u.intersect(m);u.snap();u.isEmpty()||(h=e.clone(),h.clip.set(u),a=this._renderToTemporarySurface(a,a.getBounds(),h,f.createEmpty(),null),h.free(),m=e.clone(),m.clip.set(u),m.matrix=g,m.flags|=4,c&&(m.flags|=8),b=this._renderToTemporarySurface(b,b.getBounds(),m,f.createEmpty(),a.surface),m.free(),a.draw(b,0,0,u.w,u.h,m.colorMatrix,p.Alpha,null,this._devicePixelRatio),
e.target.draw(a,u.x,u.y,u.w,u.h,h.colorMatrix,d,null,this._devicePixelRatio),b.free(),a.free())}}};t.prototype._renderStageToTarget=function(a,b,d){f.allocationCount=h.allocationCount=e.allocationCount=0;a=new e(a);a.clip.set(d);this._options.paintRenderable||(a.flags|=32);this._options.paintBounds&&(a.flags|=1024);this._options.paintDirtyRegion&&(a.flags|=2048);this._options.paintFlashing&&(a.flags|=512);this._options.cacheShapes&&(a.flags|=256);this._options.imageSmoothing&&(a.flags|=4096);this._options.snapToDevicePixels&&
(a.flags|=8192);this._frameInfo.enter(a);b.visit(this,a);this._frameInfo.leave()};t.prototype._renderToTemporarySurface=function(a,b,d,c,e){var g=d.matrix;b=b.clone();g.transformRectangleAABB(b);b.snap();c.set(b);c.intersect(d.clip);c.snap();if(c.isEmpty())return null;e=this._allocateSurface(c.w,c.h,e);b=e.region;b=new f(b.x,b.y,c.w,c.h);e.context.setTransform(1,0,0,1,0,0);e.clear();g=g.clone();g.translate(b.x-c.x,b.y-c.y);e.context.save();d=d.clone();d.target=e;d.matrix=g;d.clip.set(b);a.visit(this,
d);d.free();e.context.restore();return e};t.prototype._allocateSurface=function(a,b,d){return t._surfaceCache.allocate(a,b,d)};t.prototype.screenShot=function(a,b,d){b&&(b=this._stage.content.groupChild.child,u(b instanceof g.Stage),a=b.content.getBounds(!0),b.content.getTransform().getConcatenatedMatrix().transformRectangleAABB(a),a.intersect(this._viewport));a||(a=new f(0,0,this._target.w,this._target.h));b=a.w;var c=a.h,e=this._devicePixelRatio;d&&(b/=e,c/=e,e=1);d=document.createElement("canvas");
d.width=b;d.height=c;var h=d.getContext("2d");h.fillStyle=this._container.style.backgroundColor;h.fillRect(0,0,b,c);h.drawImage(this._target.context.canvas,a.x,a.y,a.w,a.h,0,0,b,c);return new g.ScreenShot(d.toDataURL("image/png"),b,c,e)};t._initializedCaches=!1;t._debugPoints=a.createEmptyPoints(4);return t}(g.Renderer);b.Canvas2DRenderer=G})(g.Canvas2D||(g.Canvas2D={}));var E=g.Geometry.Point,r=g.Geometry.Matrix,B=g.Geometry.Rectangle,v=function(){function b(){}b.prototype.onMouseUp=function(b,c){b.state=
this};b.prototype.onMouseDown=function(b,c){b.state=this};b.prototype.onMouseMove=function(b,c){b.state=this};b.prototype.onMouseWheel=function(b,c){b.state=this};b.prototype.onMouseClick=function(b,c){b.state=this};b.prototype.onKeyUp=function(b,c){b.state=this};b.prototype.onKeyDown=function(b,c){b.state=this};b.prototype.onKeyPress=function(b,c){b.state=this};return b}();g.UIState=v;var H=function(b){function c(){b.apply(this,arguments);this._keyCodes=[]}__extends(c,b);c.prototype.onMouseDown=
function(b,a){a.altKey&&(b.state=new p(b.worldView,b.getMousePosition(a,null),b.worldView.getTransform().getMatrix(!0)))};c.prototype.onMouseClick=function(b,a){};c.prototype.onKeyDown=function(b,a){this._keyCodes[a.keyCode]=!0};c.prototype.onKeyUp=function(b,a){this._keyCodes[a.keyCode]=!1};return c}(v),z=function(b){function c(){b.apply(this,arguments);this._keyCodes=[];this._paused=!1;this._mousePosition=new E(0,0)}__extends(c,b);c.prototype.onMouseMove=function(b,a){this._mousePosition=b.getMousePosition(a,
null);this._update(b)};c.prototype.onMouseDown=function(b,a){};c.prototype.onMouseClick=function(b,a){};c.prototype.onMouseWheel=function(b,a){var c="DOMMouseScroll"===a.type?-a.detail:a.wheelDelta/40;if(a.altKey){a.preventDefault();var g=b.getMousePosition(a,null),m=b.worldView.getTransform().getMatrix(!0),c=1+c/1E3;m.translate(-g.x,-g.y);m.scale(c,c);m.translate(g.x,g.y);b.worldView.getTransform().setMatrix(m)}};c.prototype.onKeyPress=function(b,a){if(a.altKey){var c=a.keyCode||a.which;console.info("onKeyPress Code: "+
c);switch(c){case 248:this._paused=!this._paused;a.preventDefault();break;case 223:b.toggleOption("paintRenderable");a.preventDefault();break;case 8730:b.toggleOption("paintViewport");a.preventDefault();break;case 8747:b.toggleOption("paintBounds");a.preventDefault();break;case 8706:b.toggleOption("paintDirtyRegion");a.preventDefault();break;case 231:b.toggleOption("clear");a.preventDefault();break;case 402:b.toggleOption("paintFlashing"),a.preventDefault()}this._update(b)}};c.prototype.onKeyDown=
function(b,a){this._keyCodes[a.keyCode]=!0;this._update(b)};c.prototype.onKeyUp=function(b,a){this._keyCodes[a.keyCode]=!1;this._update(b)};c.prototype._update=function(b){b.paused=this._paused;if(b.getOption("paintViewport")){var a=g.viewportLoupeDiameter.value,c=g.viewportLoupeDiameter.value;b.viewport=new B(this._mousePosition.x-a/2,this._mousePosition.y-c/2,a,c)}else b.viewport=null};return c}(v);(function(b){function c(){b.apply(this,arguments);this._startTime=Date.now()}__extends(c,b);c.prototype.onMouseMove=
function(b,a){if(!(10>Date.now()-this._startTime)){var c=b._world;c&&(b.state=new p(c,b.getMousePosition(a,null),c.getTransform().getMatrix(!0)))}};c.prototype.onMouseUp=function(b,a){b.state=new H;b.selectNodeUnderMouse(a)};return c})(v);var p=function(b){function c(f,a,g){b.call(this);this._target=f;this._startPosition=a;this._startMatrix=g}__extends(c,b);c.prototype.onMouseMove=function(b,a){a.preventDefault();var c=b.getMousePosition(a,null);c.sub(this._startPosition);this._target.getTransform().setMatrix(this._startMatrix.clone().translate(c.x,
c.y));b.state=this};c.prototype.onMouseUp=function(b,a){b.state=new H};return c}(v),v=function(){function b(m,f,a){function h(a){v._state.onMouseWheel(v,a);v._persistentState.onMouseWheel(v,a)}void 0===f&&(f=!1);void 0===a&&(a=void 0);this._state=new H;this._persistentState=new z;this.paused=!1;this.viewport=null;this._selectedNodes=[];this._isRendering=!1;this._rAF=void 0;this._eventListeners=Object.create(null);this._fullScreen=!1;this._container=m;this._stage=new g.Stage(512,512,!0);this._worldView=
this._stage.content;this._world=new g.Group;this._worldView.addChild(this._world);this._disableHiDPI=f;f=document.createElement("div");f.style.position="absolute";f.style.width="100%";f.style.height="100%";f.style.zIndex="0";m.appendChild(f);if(g.hud.value&&c.Tools){var p=document.createElement("div");p.style.position="absolute";p.style.width="100%";p.style.height="100%";p.style.pointerEvents="none";var r=document.createElement("div");r.style.position="absolute";r.style.width="100%";r.style.height=
"20px";r.style.pointerEvents="none";p.appendChild(r);m.appendChild(p);this._fps=new c.Tools.Mini.FPS(r)}else this._fps=null;this.transparent=p=0===a;void 0===a||0===a||c.ColorUtilities.rgbaToCSSStyle(a);this._options=new g.Canvas2D.Canvas2DRendererOptions;this._options.alpha=p;this._renderer=new g.Canvas2D.Canvas2DRenderer(f,this._stage,this._options);this._listenForContainerSizeChanges();this._onMouseUp=this._onMouseUp.bind(this);this._onMouseDown=this._onMouseDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);
var v=this;window.addEventListener("mouseup",function(a){v._state.onMouseUp(v,a);v._render()},!1);window.addEventListener("mousemove",function(a){v._state.onMouseMove(v,a);v._persistentState.onMouseMove(v,a)},!1);window.addEventListener("DOMMouseScroll",h);window.addEventListener("mousewheel",h);m.addEventListener("mousedown",function(a){v._state.onMouseDown(v,a)});window.addEventListener("keydown",function(a){v._state.onKeyDown(v,a);if(v._state!==v._persistentState)v._persistentState.onKeyDown(v,
a)},!1);window.addEventListener("keypress",function(a){v._state.onKeyPress(v,a);if(v._state!==v._persistentState)v._persistentState.onKeyPress(v,a)},!1);window.addEventListener("keyup",function(a){v._state.onKeyUp(v,a);if(v._state!==v._persistentState)v._persistentState.onKeyUp(v,a)},!1)}b.prototype._listenForContainerSizeChanges=function(){var b=this._containerWidth,c=this._containerHeight;this._onContainerSizeChanged();var a=this;setInterval(function(){if(b!==a._containerWidth||c!==a._containerHeight)a._onContainerSizeChanged(),
b=a._containerWidth,c=a._containerHeight},10)};b.prototype._onContainerSizeChanged=function(){var b=this.getRatio(),c=Math.ceil(this._containerWidth*b),a=Math.ceil(this._containerHeight*b);this._stage.setBounds(new B(0,0,c,a));this._stage.content.setBounds(new B(0,0,c,a));this._worldView.getTransform().setMatrix(new r(b,0,0,b,0,0));this._dispatchEvent("resize")};b.prototype.addEventListener=function(b,c){this._eventListeners[b]||(this._eventListeners[b]=[]);this._eventListeners[b].push(c)};b.prototype._dispatchEvent=
function(b){if(b=this._eventListeners[b])for(var c=0;c<b.length;c++)b[c]()};b.prototype.startRendering=function(){if(!this._isRendering){this._isRendering=!0;var b=this;this._rAF=requestAnimationFrame(function a(){b.render();b._rAF=requestAnimationFrame(a)})}};b.prototype.stopRendering=function(){this._isRendering&&(this._isRendering=!1,cancelAnimationFrame(this._rAF))};Object.defineProperty(b.prototype,"state",{set:function(b){this._state=b},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"cursor",{set:function(b){this._container.style.cursor=b},enumerable:!0,configurable:!0});b.prototype._render=function(){g.RenderableVideo.checkForVideoUpdates();var b=(this._stage.readyToRender()||g.forcePaint.value)&&!this.paused,c=0;if(b){var a=this._renderer;a.viewport=this.viewport?this.viewport:this._stage.getBounds();this._dispatchEvent("render");c=performance.now();a.render();c=performance.now()-c}this._fps&&this._fps.tickAndRender(!b,c)};b.prototype.render=function(){this._render()};Object.defineProperty(b.prototype,
"world",{get:function(){return this._world},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"worldView",{get:function(){return this._worldView},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0});b.prototype.getDisplayParameters=function(){var b=this.getRatio();return{stageWidth:this._containerWidth,
stageHeight:this._containerHeight,pixelRatio:b,screenWidth:window.screen?window.screen.width:640,screenHeight:window.screen?window.screen.height:480}};b.prototype.toggleOption=function(b){var c=this._options;c[b]=!c[b]};b.prototype.getOption=function(b){return this._options[b]};b.prototype.getRatio=function(){var b=window.devicePixelRatio||1,c=1;1===b||this._disableHiDPI||(c=b/1);return c};Object.defineProperty(b.prototype,"_containerWidth",{get:function(){return this._container.clientWidth},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"_containerHeight",{get:function(){return this._container.clientHeight},enumerable:!0,configurable:!0});b.prototype.queryNodeUnderMouse=function(b){return this._world};b.prototype.selectNodeUnderMouse=function(b){(b=this._world)&&this._selectedNodes.push(b);this._render()};b.prototype.getMousePosition=function(b,c){var a=this._container,g=a.getBoundingClientRect(),m=this.getRatio(),a=new E(a.scrollWidth/g.width*(b.clientX-g.left)*m,a.scrollHeight/
g.height*(b.clientY-g.top)*m);if(!c)return a;g=r.createIdentity();c.getTransform().getConcatenatedMatrix().inverse(g);g.transformPoint(a);return a};b.prototype.getMouseWorldPosition=function(b){return this.getMousePosition(b,this._world)};b.prototype._onMouseDown=function(b){};b.prototype._onMouseUp=function(b){};b.prototype._onMouseMove=function(b){};b.prototype.screenShot=function(b,c,a){return this._renderer.screenShot(b,c,a)};return b}();g.Easel=v;var r=c.GFX.Geometry.Matrix,b=function(b){function c(){b.apply(this,
arguments);this.layout=0}__extends(c,b);return c}(g.RendererOptions);g.TreeRendererOptions=b;v=function(c){function p(f,a,g){void 0===g&&(g=new b);c.call(this,f,a,g);this._canvas=document.createElement("canvas");this._container.appendChild(this._canvas);this._context=this._canvas.getContext("2d");this._listenForContainerSizeChanges()}__extends(p,c);p.prototype._listenForContainerSizeChanges=function(){var b=this._containerWidth,a=this._containerHeight;this._onContainerSizeChanged();var c=this;setInterval(function(){if(b!==
c._containerWidth||a!==c._containerHeight)c._onContainerSizeChanged(),b=c._containerWidth,a=c._containerHeight},10)};p.prototype._getRatio=function(){var b=window.devicePixelRatio||1,a=1;1!==b&&(a=b/1);return a};p.prototype._onContainerSizeChanged=function(){var b=this._getRatio(),a=Math.ceil(this._containerWidth*b),c=Math.ceil(this._containerHeight*b),g=this._canvas;0<b?(g.width=a*b,g.height=c*b,g.style.width=a+"px",g.style.height=c+"px"):(g.width=a,g.height=c)};Object.defineProperty(p.prototype,
"_containerWidth",{get:function(){return this._container.clientWidth},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"_containerHeight",{get:function(){return this._container.clientHeight},enumerable:!0,configurable:!0});p.prototype.render=function(){var b=this._context;b.save();b.clearRect(0,0,this._canvas.width,this._canvas.height);b.scale(1,1);0===this._options.layout&&this._renderNodeSimple(this._context,this._stage,r.createIdentity());b.restore()};p.prototype._renderNodeSimple=
function(b,a,c){function m(a){var c=a.getChildren();a.hasFlags(4096)?b.fillStyle="red":b.fillStyle="white";var h=String(a.id);a instanceof g.RenderableText?h="T"+h:a instanceof g.RenderableShape?h="S"+h:a instanceof g.RenderableBitmap?h="B"+h:a instanceof g.RenderableVideo&&(h="V"+h);a instanceof g.Renderable&&(h=h+" ["+a._parents.length+"]");a=b.measureText(h).width;b.fillText(h,r,u);if(c){r+=a+4;d=Math.max(d,r+20);for(h=0;h<c.length;h++)m(c[h]),h<c.length-1&&(u+=18,u>p._canvas.height&&(b.fillStyle=
"gray",r=r-A+d+8,A=d+8,u=0,b.fillStyle="white"));r-=a+4}}var p=this;b.save();b.font="16px Arial";b.fillStyle="white";var r=0,u=0,A=0,d=0;m(a);b.restore()};return p}(g.Renderer);g.TreeRenderer=v})(c.GFX||(c.GFX={}));(function(g){(function(E){var r=c.GFX.BlurFilter,B=c.GFX.DropshadowFilter,v=c.GFX.Shape,H=c.GFX.Group,z=c.GFX.RenderableShape,p=c.GFX.RenderableMorphShape,b=c.GFX.RenderableBitmap,m=c.GFX.RenderableVideo,u=c.GFX.RenderableText,f=c.GFX.ColorMatrix,a=c.ShapeData,h=c.ArrayUtilities.DataBuffer,
C=c.GFX.Stage,N=c.GFX.Geometry.Matrix,J=c.GFX.Geometry.Rectangle,D=function(){function a(){}a.prototype.writeMouseEvent=function(a,b){var f=this.output;f.writeInt(300);var g=c.Remoting.MouseEventNames.indexOf(a.type);f.writeInt(g);f.writeFloat(b.x);f.writeFloat(b.y);f.writeInt(a.buttons);f.writeInt((a.ctrlKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0))};a.prototype.writeKeyboardEvent=function(a){var b=this.output;b.writeInt(301);var f=c.Remoting.KeyboardEventNames.indexOf(a.type);b.writeInt(f);b.writeInt(a.keyCode);
b.writeInt(a.charCode);b.writeInt(a.location);b.writeInt((a.ctrlKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0))};a.prototype.writeFocusEvent=function(a){var b=this.output;b.writeInt(302);b.writeInt(a)};return a}();E.GFXChannelSerializer=D;D=function(){function a(b,c,f){function g(a){a=a.getBounds(!0);var c=b.easel.getRatio();a.scale(1/c,1/c);a.snap();h.setBounds(a)}var h=this.stage=new C(128,512);"undefined"!==typeof registerInspectorStage&&registerInspectorStage(h);g(b.stage);b.stage.addEventListener(1,
g);b.content=h.content;f&&this.stage.setFlags(2);c.addChild(this.stage);this._nodes=[];this._assets=[];this._easelHost=b;this._canvas=document.createElement("canvas");this._context=this._canvas.getContext("2d")}a.prototype._registerAsset=function(a,b,c){"undefined"!==typeof registerInspectorAsset&&registerInspectorAsset(a,b,c);this._assets[a]=c};a.prototype._makeNode=function(a){if(-1===a)return null;var b=null;return b=a&134217728?this._assets[a&-134217729].wrap():this._nodes[a]};a.prototype._getAsset=
function(a){return this._assets[a]};a.prototype._getBitmapAsset=function(a){return this._assets[a]};a.prototype._getVideoAsset=function(a){return this._assets[a]};a.prototype._getTextAsset=function(a){return this._assets[a]};a.prototype.registerFont=function(a,b,f){c.registerCSSFont(a,b,!inFirefox);inFirefox?f(null):window.setTimeout(f,400)};a.prototype.registerImage=function(a,b,c,f,g,h){this._registerAsset(a,b,this._decodeImage(c,f,g,h))};a.prototype.registerVideo=function(a){this._registerAsset(a,
0,new m(a,this))};a.prototype._decodeImage=function(a,e,f,g){var h=new Image,m=b.FromImage(h,-1,-1);h.src=URL.createObjectURL(new Blob([e],{type:c.getMIMETypeForImageType(a)}));h.onload=function(){m.setBounds(new J(0,0,h.width,h.height));f&&m.mask(f);m.invalidate();g({width:h.width,height:h.height})};h.onerror=function(){g(null)};return m};a.prototype.sendVideoPlaybackEvent=function(a,b,c){this._easelHost.sendVideoPlaybackEvent(a,b,c)};return a}();E.GFXChannelDeserializerContext=D;D=function(){function m(){}
m.prototype.read=function(){for(var a=0,b=this.input,c=0,f=0,g=0,h=0,l=0,m=0,p=0,q=0,n=0;0<b.bytesAvailable;)switch(a=b.readInt(),a){case 0:return;case 101:c++;this._readUpdateGraphics();break;case 102:f++;this._readUpdateBitmapData();break;case 103:g++;this._readUpdateTextContent();break;case 100:h++;this._readUpdateFrame();break;case 104:l++;this._readUpdateStage();break;case 107:m++;this._readUpdateCurrentMouseTarget();break;case 105:p++;this._readUpdateNetStream();break;case 200:q++;this._readDrawToBitmap();
break;case 106:n++,this._readRequestBitmapData()}};m.prototype._readMatrix=function(){var a=this.input,b=m._temporaryReadMatrix,c=1,f=0,g=0,h=1,l=0,p=0;switch(a.readInt()){case 1:c=a.readFloat(),h=a.readFloat();case 0:l=a.readFloat()/20;p=a.readFloat()/20;break;case 2:c=h=a.readFloat();l=a.readFloat()/20;p=a.readFloat()/20;break;case 3:c=a.readFloat(),f=a.readFloat(),g=a.readFloat(),h=a.readFloat(),l=a.readFloat()/20,p=a.readFloat()/20}b.setElements(c,f,g,h,l,p);return b};m.prototype._readRectangle=
function(){var a=this.input,b=m._temporaryReadRectangle;b.setElements(a.readInt()/20,a.readInt()/20,a.readInt()/20,a.readInt()/20);return b};m.prototype._readColorMatrix=function(){var a=this.input,b=m._temporaryReadColorMatrix,c=1,f=1,g=1,h=1,l=0,p=0,r=0,q=0;switch(a.readInt()){case 0:return m._temporaryReadColorMatrixIdentity;case 1:h=a.readFloat();break;case 2:g=f=c=0;h=a.readFloat();l=a.readInt();p=a.readInt();r=a.readInt();q=a.readInt();break;case 3:c=a.readFloat(),f=a.readFloat(),g=a.readFloat(),
h=a.readFloat(),l=a.readInt(),p=a.readInt(),r=a.readInt(),q=a.readInt()}b.setMultipliersAndOffsets(c,f,g,h,l,p,r,q);return b};m.prototype._readAsset=function(){var a=this.input.readInt(),b=this.inputAssets[a];this.inputAssets[a]=null;return b};m.prototype._readUpdateGraphics=function(){for(var b=this.input,c=this.context,f=b.readInt(),g=b.readInt(),h=c._getAsset(f),m=this._readRectangle(),l=a.FromPlainObject(this._readAsset()),r=b.readInt(),u=[],q=0;q<r;q++){var n=b.readInt();u.push(c._getBitmapAsset(n))}if(h)h.update(l,
u,m);else{b=l.morphCoordinates?new p(f,l,u,m):new z(f,l,u,m);for(q=0;q<u.length;q++)u[q]&&u[q].addRenderableParent(b);c._registerAsset(f,g,b)}};m.prototype._readUpdateBitmapData=function(){var a=this.input,c=this.context,f=a.readInt(),g=a.readInt(),m=c._getBitmapAsset(f),p=this._readRectangle(),a=a.readInt(),l=h.FromPlainObject(this._readAsset());m?m.updateFromDataBuffer(a,l):(m=b.FromDataBuffer(a,l,p),c._registerAsset(f,g,m))};m.prototype._readUpdateTextContent=function(){var a=this.input,b=this.context,
c=a.readInt(),f=a.readInt(),g=b._getTextAsset(c),m=this._readRectangle(),l=this._readMatrix(),p=a.readInt(),r=a.readInt(),q=a.readInt(),n=a.readBoolean(),k=a.readInt(),v=a.readInt(),A=this._readAsset(),D=h.FromPlainObject(this._readAsset()),z=null,H=a.readInt();H&&(z=new h(4*H),a.readBytes(z,0,4*H));g?(g.setBounds(m),g.setContent(A,D,l,z),g.setStyle(p,r,k,v),g.reflow(q,n)):(g=new u(m),g.setContent(A,D,l,z),g.setStyle(p,r,k,v),g.reflow(q,n),b._registerAsset(c,f,g));if(this.output)for(a=g.textRect,
this.output.writeInt(20*a.w),this.output.writeInt(20*a.h),this.output.writeInt(20*a.x),g=g.lines,a=g.length,this.output.writeInt(a),b=0;b<a;b++)this._writeLineMetrics(g[b])};m.prototype._writeLineMetrics=function(a){this.output.writeInt(a.x);this.output.writeInt(a.width);this.output.writeInt(a.ascent);this.output.writeInt(a.descent);this.output.writeInt(a.leading)};m.prototype._readUpdateStage=function(){var a=this.context,b=this.input.readInt();a._nodes[b]||(a._nodes[b]=a.stage.content);var b=this.input.readInt(),
f=this._readRectangle();a.stage.content.setBounds(f);a.stage.color=c.Color.FromARGB(b);a.stage.align=this.input.readInt();a.stage.scaleMode=this.input.readInt();b=this.input.readInt();a._easelHost.fullscreen=0===b||1===b};m.prototype._readUpdateCurrentMouseTarget=function(){var a=this.context;this.input.readInt();var b=this.input.readInt();a._easelHost.cursor=c.UI.toCSSCursor(b)};m.prototype._readUpdateNetStream=function(){var a=this.context,b=this.input.readInt(),c=a._getVideoAsset(b),f=this._readRectangle();
c||(a.registerVideo(b),c=a._getVideoAsset(b));c.setBounds(f)};m.prototype._readFilters=function(a){var b=this.input,h=b.readInt(),m=[];if(h){for(var p=0;p<h;p++){var t=b.readInt();switch(t){case g.FilterType.Blur:m.push(new r(b.readFloat(),b.readFloat(),b.readInt()));break;case g.FilterType.DropShadow:m.push(new B(b.readFloat(),b.readFloat(),b.readFloat(),b.readFloat(),b.readInt(),b.readFloat(),b.readBoolean(),b.readBoolean(),b.readBoolean(),b.readInt(),b.readFloat()));break;case g.FilterType.ColorMatrix:t=
new Float32Array(20);t[0]=b.readFloat();t[4]=b.readFloat();t[8]=b.readFloat();t[12]=b.readFloat();t[16]=b.readFloat()/255;t[1]=b.readFloat();t[5]=b.readFloat();t[9]=b.readFloat();t[13]=b.readFloat();t[17]=b.readFloat()/255;t[2]=b.readFloat();t[6]=b.readFloat();t[10]=b.readFloat();t[14]=b.readFloat();t[18]=b.readFloat()/255;t[3]=b.readFloat();t[7]=b.readFloat();t[11]=b.readFloat();t[15]=b.readFloat();t[19]=b.readFloat()/255;m.push(new f(t));break;default:c.Debug.somewhatImplemented(g.FilterType[t])}}a.getLayer().filters=
m}};m.prototype._readUpdateFrame=function(){var a=this.input,b=this.context,c=a.readInt(),f=0,g=b._nodes[c];g||(g=b._nodes[c]=new H);c=a.readInt();c&1&&g.getTransform().setMatrix(this._readMatrix());c&8&&g.getTransform().setColorMatrix(this._readColorMatrix());if(c&64){var h=a.readInt();g.getLayer().mask=0<=h?b._makeNode(h):null}c&128&&(g.clip=a.readInt());c&32&&(f=a.readInt()/65535,g.getLayer().blendMode=a.readInt(),this._readFilters(g),g.toggleFlags(1,a.readBoolean()),g.toggleFlags(16,a.readBoolean()),
g.toggleFlags(32,!!a.readInt()),g.toggleFlags(64,!!a.readInt()));if(c&4){c=a.readInt();h=g;h.clearChildren();for(var l=0;l<c;l++){var m=a.readInt(),m=b._makeNode(m);h.addChild(m)}}f&&(m=g.getChildren()[0],m instanceof v&&(m.ratio=f))};m.prototype._readDrawToBitmap=function(){var a=this.input,c=this.context,f=a.readInt(),g=a.readInt(),h=a.readInt(),m,l,p;m=h&1?this._readMatrix().clone():N.createIdentity();h&8&&(l=this._readColorMatrix());h&16&&(p=this._readRectangle());h=a.readInt();a.readBoolean();
a=c._getBitmapAsset(f);g=c._makeNode(g);a?a.drawNode(g,m,l,h,p):c._registerAsset(f,-1,b.FromNode(g,m,l,h,p))};m.prototype._readRequestBitmapData=function(){var a=this.output,b=this.context,c=this.input.readInt();b._getBitmapAsset(c).readImageData(a)};m._temporaryReadMatrix=N.createIdentity();m._temporaryReadRectangle=J.createEmpty();m._temporaryReadColorMatrix=f.createIdentity();m._temporaryReadColorMatrixIdentity=f.createIdentity();return m}();E.GFXChannelDeserializer=D})(g.GFX||(g.GFX={}))})(c.Remoting||
(c.Remoting={}));(function(g){var E=c.GFX.Geometry.Point,r=c.ArrayUtilities.DataBuffer;g.ContextMenuButton=2;var B=function(){function v(g){this._easel=g;var r=g.transparent;this._group=g.world;this._content=null;this._fullscreen=!1;this._context=new c.Remoting.GFX.GFXChannelDeserializerContext(this,this._group,r);this._addEventListeners();c.registerFallbackFont()}v.prototype.onSendUpdates=function(c,g){throw Error("This method is abstract");};Object.defineProperty(v.prototype,"easel",{get:function(){return this._easel},
enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"stage",{get:function(){return this._easel.stage},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"content",{set:function(c){this._content=c},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"cursor",{set:function(c){this._easel.cursor=c},enumerable:!0,configurable:!0});Object.defineProperty(v.prototype,"fullscreen",{set:function(c){this._fullscreen!==c&&(this._fullscreen=c,"undefined"!==typeof ShumwayCom&&
ShumwayCom.setFullscreen&&ShumwayCom.setFullscreen(c))},enumerable:!0,configurable:!0});v.prototype._mouseEventListener=function(v){if(v.button!==g.ContextMenuButton){var z=this._easel.getMousePosition(v,this._content),z=new E(z.x,z.y),p=new r,b=new c.Remoting.GFX.GFXChannelSerializer;b.output=p;b.writeMouseEvent(v,z);this.onSendUpdates(p,[])}};v.prototype._keyboardEventListener=function(g){var v=new r,p=new c.Remoting.GFX.GFXChannelSerializer;p.output=v;p.writeKeyboardEvent(g);this.onSendUpdates(v,
[])};v.prototype._addEventListeners=function(){for(var c=this._mouseEventListener.bind(this),g=this._keyboardEventListener.bind(this),p=v._mouseEvents,b=0;b<p.length;b++)window.addEventListener(p[b],c);c=v._keyboardEvents;for(b=0;b<c.length;b++)window.addEventListener(c[b],g);this._addFocusEventListeners();this._easel.addEventListener("resize",this._resizeEventListener.bind(this))};v.prototype._sendFocusEvent=function(g){var v=new r,p=new c.Remoting.GFX.GFXChannelSerializer;p.output=v;p.writeFocusEvent(g);
this.onSendUpdates(v,[])};v.prototype._addFocusEventListeners=function(){var c=this;document.addEventListener("visibilitychange",function(g){c._sendFocusEvent(document.hidden?0:1)});window.addEventListener("focus",function(g){c._sendFocusEvent(3)});window.addEventListener("blur",function(g){c._sendFocusEvent(2)})};v.prototype._resizeEventListener=function(){this.onDisplayParameters(this._easel.getDisplayParameters())};v.prototype.onDisplayParameters=function(c){throw Error("This method is abstract");
};v.prototype.processUpdates=function(g,r,p){void 0===p&&(p=null);var b=new c.Remoting.GFX.GFXChannelDeserializer;b.input=g;b.inputAssets=r;b.output=p;b.context=this._context;b.read()};v.prototype.processVideoControl=function(c,g,p){var b=this._context,m=b._getVideoAsset(c);if(!m){if(1!==g)return;b.registerVideo(c);m=b._getVideoAsset(c)}return m.processControlRequest(g,p)};v.prototype.processRegisterFont=function(c,g,p){this._context.registerFont(c,g,p)};v.prototype.processRegisterImage=function(c,
g,p,b,m,r){this._context.registerImage(c,g,p,b,m,r)};v.prototype.processFSCommand=function(c,g){"undefined"!==typeof ShumwayCom&&"test"===ShumwayCom.environment&&ShumwayCom.processFSCommand(c,g)};v.prototype.processFrame=function(){"undefined"!==typeof ShumwayCom&&"test"===ShumwayCom.environment&&ShumwayCom.processFrame()};v.prototype.onVideoPlaybackEvent=function(c,g,p){throw Error("This method is abstract");};v.prototype.sendVideoPlaybackEvent=function(c,g,p){this.onVideoPlaybackEvent(c,g,p)};v._mouseEvents=
c.Remoting.MouseEventNames;v._keyboardEvents=c.Remoting.KeyboardEventNames;return v}();g.EaselHost=B;(function(r){var B=c.ArrayUtilities.DataBuffer,z=function(c){function b(b,g){c.call(this,b);this._peer=g;this._peer.onSyncMessage=function(b){return this._onWindowMessage(b,!1)}.bind(this);this._peer.onAsyncMessage=function(b){this._onWindowMessage(b,!0)}.bind(this)}__extends(b,c);b.prototype.onSendUpdates=function(b,c){var f=b.getBytes();this._peer.postAsyncMessage({type:"gfx",updates:f,assets:c},
[f.buffer])};b.prototype.onDisplayParameters=function(b){this._peer.postAsyncMessage({type:"displayParameters",params:b})};b.prototype.onVideoPlaybackEvent=function(b,c,f){this._peer.postAsyncMessage({type:"videoPlayback",id:b,eventType:c,data:f})};b.prototype._sendRegisterFontResponse=function(b,c){this._peer.postAsyncMessage({type:"registerFontResponse",requestId:b,result:c})};b.prototype._sendRegisterImageResponse=function(b,c){this._peer.postAsyncMessage({type:"registerImageResponse",requestId:b,
result:c})};b.prototype._onWindowMessage=function(b,c){var f;if("object"===typeof b&&null!==b)if("player"===b.type){var a=B.FromArrayBuffer(b.updates.buffer);c?this.processUpdates(a,b.assets):(f=new B,this.processUpdates(a,b.assets,f),f=f.toPlainObject())}else"frame"===b.type?this.processFrame():"videoControl"===b.type?f=this.processVideoControl(b.id,b.eventType,b.data):"registerFont"===b.type?this.processRegisterFont(b.syncId,b.data,this._sendRegisterFontResponse.bind(this,b.requestId)):"registerImage"===
b.type?this.processRegisterImage(b.syncId,b.symbolId,b.imageType,b.data,b.alphaData,this._sendRegisterImageResponse.bind(this,b.requestId)):"fscommand"===b.type&&this.processFSCommand(b.command,b.args);return f};return b}(g.EaselHost);r.WindowEaselHost=z})(g.Window||(g.Window={}));(function(r){function B(a,b){a.writeInt(b.length);a.writeRawBytes(b)}function z(a,b){return"byteLength"in a&&"buffer"in a&&(a.constructor&&a.constructor.name)===b}function p(a){return"byteLength"in a&&"ArrayBuffer"===(a.constructor&&
a.constructor.name)}function b(b){function f(a){switch(typeof a){case "undefined":d.writeByte(C.Undefined);break;case "boolean":d.writeByte(a?C.True:C.False);break;case "number":d.writeByte(C.Number);d.writeDouble(a);break;case "string":d.writeByte(C.String);d.writeUTF(a);break;default:if(null===a){d.writeByte(C.Null);break}if(Array.isArray(a)){d.writeByte(C.Array);d.writeInt(a.length);for(var b=0;b<a.length;b++)f(a[b])}else if(z(a,"Uint8Array"))d.writeByte(C.Uint8Array),B(d,a);else if("length"in
a&&"buffer"in a&&"littleEndian"in a)d.writeByte(a.littleEndian?C.PlainObjectDataBufferLE:C.PlainObjectDataBufferBE),B(d,new Uint8Array(a.buffer,0,a.length));else if(p(a))d.writeByte(C.ArrayBuffer),B(d,new Uint8Array(a));else if(z(a,"Int32Array"))d.writeByte(C.Int32Array),B(d,new Uint8Array(a.buffer,a.byteOffset,a.byteLength));else{if(!c.isNullOrUndefined(a.buffer)&&p(a.buffer)&&"number"===typeof a.byteOffset)throw Error("Some unsupported TypedArray is used");d.writeByte(C.Object);for(b in a)d.writeUTF(b),
f(a[b]);d.writeUTF("")}}}var d=new a;f(b);return d.getBytes()}function m(b){var c=new a,d=b.readInt();b.readBytes(c,0,d);return c.getBytes()}function u(b){var c=new a,d=b.readInt();b.readBytes(c,0,d);return f(c)}function f(a){var b=a.readByte();switch(b){case C.Null:return null;case C.True:return!0;case C.False:return!1;case C.Number:return a.readDouble();case C.String:return a.readUTF();case C.Array:for(var b=[],c=a.readInt(),e=0;e<c;e++)b[e]=f(a);return b;case C.Object:for(b={};c=a.readUTF();)b[c]=
f(a);return b;case C.ArrayBuffer:return m(a).buffer;case C.Uint8Array:return m(a);case C.PlainObjectDataBufferBE:case C.PlainObjectDataBufferLE:return a=m(a),new h(a.buffer,a.length,b===C.PlainObjectDataBufferLE);case C.Int32Array:return new Int32Array(m(a).buffer)}}var a=c.ArrayUtilities.DataBuffer,h=c.ArrayUtilities.PlainObjectDataBuffer,C;(function(a){a[a.Undefined=0]="Undefined";a[a.Null=1]="Null";a[a.True=2]="True";a[a.False=3]="False";a[a.Number=4]="Number";a[a.String=5]="String";a[a.Array=
6]="Array";a[a.Object=7]="Object";a[a.ArrayBuffer=8]="ArrayBuffer";a[a.Uint8Array=9]="Uint8Array";a[a.PlainObjectDataBufferLE=10]="PlainObjectDataBufferLE";a[a.PlainObjectDataBufferBE=11]="PlainObjectDataBufferBE";a[a.Int32Array=12]="Int32Array"})(C||(C={}));var E=function(){function c(b){this._maxRecordingSize=b;this._recording=new a;this._recordingStarted=0;this._recording.writeRawBytes(new Uint8Array([77,83,87,70]));this._stopped=!1}c.prototype.stop=function(){this._stopped=!0};c.prototype.getRecording=
function(){return new Blob([this._recording.getBytes()],{type:"application/octet-stream"})};c.prototype.dump=function(){(new J(this._recording.getBytes())).dump()};c.prototype._createRecord=function(a,b){this._stopped||(this._recording.length+8+(b?b.length:0)>=this._maxRecordingSize?(console.error("Recording limit reached"),this._stopped=!0):(0===this._recordingStarted?(this._recordingStarted=Date.now(),this._recording.writeInt(0)):this._recording.writeInt(Date.now()-this._recordingStarted),this._recording.writeInt(a),
null!==b?(this._recording.writeInt(b.length),this._recording.writeRawBytes(b.getBytes())):this._recording.writeInt(0)))};c.prototype.recordPlayerCommand=function(c,d,e){var f=new a;B(f,d);f.writeInt(e.length);e.forEach(function(a){a=b(a);B(f,a)});this._createRecord(c?2:1,f)};c.prototype.recordFrame=function(){this._createRecord(3,null)};c.prototype.recordFont=function(c,d){var e=new a;e.writeInt(c);B(e,b(d));this._createRecord(4,e)};c.prototype.recordImage=function(c,d,e,f,g){var h=new a;h.writeInt(c);
h.writeInt(d);h.writeInt(e);B(h,b(f));B(h,b(g));this._createRecord(5,h)};c.prototype.recordFSCommand=function(b,c){var e=new a;e.writeUTF(b);e.writeUTF(c||"");this._createRecord(6,e)};return c}();r.MovieRecorder=E;var J=function(){function b(c){this._buffer=new a;this._buffer.writeRawBytes(c);this._buffer.position=4}b.prototype.readNextRecord=function(){if(this._buffer.position>=this._buffer.length)return 0;var b=this._buffer.readInt(),c=this._buffer.readInt(),e=this._buffer.readInt(),f=null;0<e&&
(f=new a,this._buffer.readBytes(f,0,e));this.currentTimestamp=b;this.currentType=c;this.currentData=f;return c};b.prototype.parsePlayerCommand=function(){for(var a=m(this.currentData),b=this.currentData.readInt(),c=[],f=0;f<b;f++)c.push(u(this.currentData));return{updates:a,assets:c}};b.prototype.parseFSCommand=function(){var a=this.currentData.readUTF(),b=this.currentData.readUTF();return{command:a,args:b}};b.prototype.parseFont=function(){var a=this.currentData.readInt(),b=u(this.currentData);return{syncId:a,
data:b}};b.prototype.parseImage=function(){var a=this.currentData.readInt(),b=this.currentData.readInt(),c=this.currentData.readInt(),f=u(this.currentData),g=u(this.currentData);return{syncId:a,symbolId:b,imageType:c,data:f,alphaData:g}};b.prototype.dump=function(){for(var a;a=this.readNextRecord();)switch(console.log("record "+a+" @"+this.currentTimestamp),a){case 1:case 2:console.log(this.parsePlayerCommand());break;case 6:console.log(this.parseFSCommand());break;case 4:console.log(this.parseFont());
break;case 5:console.log(this.parseImage())}};return b}();r.MovieRecordParser=J;a=c.ArrayUtilities.DataBuffer;E=function(b){function c(a){b.call(this,a);this.alwaysRenderFrame=this.ignoreTimestamps=!1;this.cpuTimeRendering=this.cpuTimeUpdates=0;this.onComplete=null}__extends(c,b);Object.defineProperty(c.prototype,"cpuTime",{get:function(){return this.cpuTimeUpdates+this.cpuTimeRendering},enumerable:!0,configurable:!0});c.prototype.playUrl=function(a){var b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType=
"arraybuffer";b.onload=function(){this.playBytes(new Uint8Array(b.response))}.bind(this);b.send()};c.prototype.playBytes=function(a){this._parser=new r.MovieRecordParser(a);this._lastTimestamp=0;this._parseNext()};c.prototype.onSendUpdates=function(a,b){};c.prototype.onDisplayParameters=function(a){};c.prototype.onVideoPlaybackEvent=function(a,b,c){};c.prototype._parseNext=function(){if(0!==this._parser.readNextRecord()){var a=this._runRecord.bind(this),b=this._parser.currentTimestamp-this._lastTimestamp;
this._lastTimestamp=this._parser.currentTimestamp;5>b?Promise.resolve(void 0).then(a):this.ignoreTimestamps?setTimeout(a):setTimeout(a,b)}else if(this.onComplete)this.onComplete()};c.prototype._runRecord=function(){var b,c=performance.now();switch(this._parser.currentType){case 1:case 2:b=this._parser.parsePlayerCommand();var f=2===this._parser.currentType,g=a.FromArrayBuffer(b.updates.buffer);f?this.processUpdates(g,b.assets):(f=new a,this.processUpdates(g,b.assets,f));break;case 3:this.processFrame();
break;case 4:b=this._parser.parseFont();this.processRegisterFont(b.syncId,b.data,function(){});break;case 5:b=this._parser.parseImage();this.processRegisterImage(b.syncId,b.symbolId,b.imageType,b.data,b.alphaData,function(){});break;case 6:b=this._parser.parseFSCommand();this.processFSCommand(b.command,b.args);break;default:throw Error("Invalid movie record type");}this.cpuTimeUpdates+=performance.now()-c;3===this._parser.currentType&&this.alwaysRenderFrame?requestAnimationFrame(this._renderFrameJustAfterRAF.bind(this)):
this._parseNext()};c.prototype._renderFrameJustAfterRAF=function(){var a=performance.now();this.easel.render();this.cpuTimeRendering+=performance.now()-a;this._parseNext()};return c}(g.EaselHost);r.PlaybackEaselHost=E;E=function(a){function b(c,e,f){void 0===f&&(f=0);a.call(this,c,e);this._recorder=null;this._recorder=new r.MovieRecorder(f)}__extends(b,a);Object.defineProperty(b.prototype,"recorder",{get:function(){return this._recorder},enumerable:!0,configurable:!0});b.prototype._onWindowMessage=
function(b,c){switch(b.type){case "player":this._recorder.recordPlayerCommand(c,b.updates,b.assets);break;case "frame":this._recorder.recordFrame();break;case "registerFont":this._recorder.recordFont(b.syncId,b.data);break;case "registerImage":this._recorder.recordImage(b.syncId,b.symbolId,b.imageType,b.data,b.alphaData);break;case "fscommand":this._recorder.recordFSCommand(b.command,b.args)}return a.prototype._onWindowMessage.call(this,b,c)};return b}(c.GFX.Window.WindowEaselHost);r.RecordingEaselHost=
E})(g.Test||(g.Test={}))})(c.GFX||(c.GFX={}))})(Shumway||(Shumway={}));console.timeEnd("Load GFX Dependencies");
